<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Windowsä½¿ç”¨oh-my-poshç¾åŒ–PowerShellå’ŒCmd</title>
    <link href="/posts/Windows/Windows%E4%BD%BF%E7%94%A8oh-my-posh%E7%BE%8E%E5%8C%96PowerShell%E5%92%8CCmd/46872/"/>
    <url>/posts/Windows/Windows%E4%BD%BF%E7%94%A8oh-my-posh%E7%BE%8E%E5%8C%96PowerShell%E5%92%8CCmd/46872/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç½®å‡†å¤‡ï¼šå®‰è£…-Nerd-Font"><a href="#å‰ç½®å‡†å¤‡ï¼šå®‰è£…-Nerd-Font" class="headerlink" title="å‰ç½®å‡†å¤‡ï¼šå®‰è£… Nerd Font"></a>å‰ç½®å‡†å¤‡ï¼šå®‰è£… Nerd Font</h2><p>Oh My Posh éœ€è¦ä½¿ç”¨ Nerd Font æ‰èƒ½æ­£å¸¸æ˜¾ç¤ºå›¾æ ‡å’Œç‰¹æ®Šå­—ç¬¦ã€‚</p><ol><li>å‰å¾€ <a href="https://www.nerdfonts.com/font-downloads">Nerd Fonts å®˜ç½‘</a> ä¸‹è½½å­—ä½“</li><li>æ¨èé€‰æ‹© <strong>JetBrains Mono</strong>ï¼ˆæŒ‰ <code>Ctrl+F</code> æœç´¢ <code>JetBrains</code> å³å¯æ‰¾åˆ°ï¼‰</li><li>ä¸‹è½½åè§£å‹ï¼ŒåŒå‡»å®‰è£… <code>JetBrainsMonoNerdFont-Regular.ttf</code></li></ol><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šå®‰è£…å®Œæˆåï¼Œéœ€è¦åœ¨ Windows Terminal çš„è®¾ç½®ä¸­å°†å­—ä½“æ›´æ”¹ä¸ºåˆšå®‰è£…çš„ Nerd Fontï¼Œå¦åˆ™å›¾æ ‡ä¼šæ˜¾ç¤ºä¸ºä¹±ç ã€‚</p></blockquote><h2 id="ç¾åŒ–-PowerShell"><a href="#ç¾åŒ–-PowerShell" class="headerlink" title="ç¾åŒ– PowerShell"></a>ç¾åŒ– PowerShell</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…-Oh-My-Posh"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£…-Oh-My-Posh" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£… Oh My Posh"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£… Oh My Posh</h3><p><strong>æ–¹å¼ä¸€ï¼šä½¿ç”¨ winget å‘½ä»¤å®‰è£…ï¼ˆæ¨èï¼‰</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">winget install JanDeDobbeleer.OhMyPosh<br></code></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…</strong></p><ul><li>å‰å¾€ <a href="https://github.com/JanDeDobbeleer/oh-my-posh/releases">GitHub Releases</a> ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ <code>install-x64.msi</code></li><li>åŒå‡»è¿è¡Œå®‰è£…ç¨‹åº</li></ul><h3 id="ç¬¬äºŒæ­¥ï¼šé…ç½®-PowerShell"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®-PowerShell" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½® PowerShell"></a>ç¬¬äºŒæ­¥ï¼šé…ç½® PowerShell</h3><ol><li>æŸ¥çœ‹ PowerShell é…ç½®æ–‡ä»¶è·¯å¾„ï¼š</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$PROFILE</span><br></code></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ VS Code æ‰“å¼€é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºåä¼šè‡ªåŠ¨æ‰“å¼€ï¼‰ï¼š</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">code <span class="hljs-variable">$PROFILE</span><br></code></pre></td></tr></table></figure><ol start="3"><li>åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</li></ol><p><strong>ä½¿ç”¨é»˜è®¤ä¸»é¢˜ï¼š</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">oh</span><span class="hljs-literal">-my-posh</span> init pwsh <span class="hljs-literal">--config</span> <span class="hljs-string">&quot;<span class="hljs-variable">$env:POSH_THEMES_PATH</span>\paradox.omp.json&quot;</span> | <span class="hljs-built_in">Invoke-Expression</span><br></code></pre></td></tr></table></figure><p><strong>ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜ï¼ˆéœ€è¦å…ˆä¸‹è½½ä¸»é¢˜æ–‡ä»¶ï¼‰ï¼š</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">oh</span><span class="hljs-literal">-my-posh</span> init pwsh <span class="hljs-literal">--config</span> <span class="hljs-string">&quot;C:\oh-my-posh\themes\M365Princess.omp.json&quot;</span> | <span class="hljs-built_in">Invoke-Expression</span><br><span class="hljs-built_in">Import-Module</span> <span class="hljs-literal">-Name</span> Terminal<span class="hljs-literal">-Icons</span><br></code></pre></td></tr></table></figure><blockquote><p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š<code>$env:POSH_THEMES_PATH</code> æ˜¯ Oh My Posh å®‰è£…åçš„å†…ç½®ä¸»é¢˜è·¯å¾„ã€‚å¦‚éœ€ä½¿ç”¨è‡ªå®šä¹‰ä¸»é¢˜ï¼Œéœ€å…ˆä» <a href="https://ohmyposh.dev/docs/themes">å®˜æ–¹ä¸»é¢˜åº“</a> ä¸‹è½½ <code>.omp.json</code> æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ã€‚</p></blockquote><h3 id="ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ‰§è¡Œç­–ç•¥"><a href="#ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ‰§è¡Œç­–ç•¥" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ‰§è¡Œç­–ç•¥"></a>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®æ‰§è¡Œç­–ç•¥</h3><p>å¦‚æœæ‰“å¼€æ–°çš„ PowerShell çª—å£æ—¶å‡ºç°è„šæœ¬é”™è¯¯ï¼Œè¯´æ˜æ‰§è¡Œç­–ç•¥å—åˆ°é™åˆ¶ã€‚éœ€è¦ä»¥<strong>ç®¡ç†å‘˜èº«ä»½</strong>è¿è¡Œ PowerShellï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">Set-ExecutionPolicy</span> <span class="hljs-literal">-ExecutionPolicy</span> Unrestricted<br></code></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥ï¼šå®‰è£…-Terminal-Iconsï¼ˆå¯é€‰ï¼‰"><a href="#ç¬¬å››æ­¥ï¼šå®‰è£…-Terminal-Iconsï¼ˆå¯é€‰ï¼‰" class="headerlink" title="ç¬¬å››æ­¥ï¼šå®‰è£… Terminal-Iconsï¼ˆå¯é€‰ï¼‰"></a>ç¬¬å››æ­¥ï¼šå®‰è£… Terminal-Iconsï¼ˆå¯é€‰ï¼‰</h3><p>Terminal-Icons å¯ä»¥ä¸ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ·»åŠ å½©è‰²å›¾æ ‡ï¼Œå¢å¼ºè§†è§‰æ•ˆæœã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">Install-Module</span> <span class="hljs-literal">-Name</span> Terminal<span class="hljs-literal">-Icons</span> <span class="hljs-literal">-Repository</span> PSGallery<br></code></pre></td></tr></table></figure><h3 id="éªŒè¯æ•ˆæœ"><a href="#éªŒè¯æ•ˆæœ" class="headerlink" title="éªŒè¯æ•ˆæœ"></a>éªŒè¯æ•ˆæœ</h3><p>é‡æ–°æ‰“å¼€ PowerShell çª—å£ï¼Œå¦‚æœé…ç½®æˆåŠŸï¼Œä½ ä¼šçœ‹åˆ°å¸¦æœ‰å›¾æ ‡å’Œé¢œè‰²çš„æ–°å‘½ä»¤æç¤ºç¬¦ã€‚</p><h2 id="ç¾åŒ–-Cmd"><a href="#ç¾åŒ–-Cmd" class="headerlink" title="ç¾åŒ– Cmd"></a>ç¾åŒ– Cmd</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…-Clink"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£…-Clink" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£… Clink"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£… Clink</h3><p>Clink æ˜¯ä¸€ä¸ªå¢å¼º Cmd çš„å·¥å…·ï¼Œå¯ä»¥ä¸º Cmd æ·»åŠ ç±»ä¼¼ PowerShell çš„è‡ªåŠ¨è¡¥å…¨ç­‰åŠŸèƒ½ã€‚</p><ul><li>å‰å¾€ <a href="https://github.com/chrisant996/clink/releases">Clink Releases</a> ä¸‹è½½æœ€æ–°ç‰ˆå®‰è£…åŒ…</li><li>åŒå‡» <code>clink.*_setup.exe</code> å®Œæˆå®‰è£…</li></ul><h3 id="ç¬¬äºŒæ­¥ï¼šé…ç½®-Oh-My-Posh"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®-Oh-My-Posh" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½® Oh My Posh"></a>ç¬¬äºŒæ­¥ï¼šé…ç½® Oh My Posh</h3><ol><li>åœ¨ <code>%LOCALAPPDATA%\clink</code> ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ <code>oh-my-posh.lua</code></li><li>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</li></ol><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs lua"><span class="hljs-comment">-- oh-my-posh.lua</span><br><span class="hljs-keyword">local</span> handle = <span class="hljs-built_in">io</span>.<span class="hljs-built_in">popen</span>(<span class="hljs-string">&#x27;oh-my-posh init cmd --config &quot;C:\\oh-my-posh\\themes\\M365Princess.omp.json&quot;&#x27;</span>)<br><span class="hljs-keyword">if</span> handle <span class="hljs-keyword">then</span><br>    <span class="hljs-keyword">local</span> code = handle:<span class="hljs-built_in">read</span>(<span class="hljs-string">&#x27;*a&#x27;</span>):<span class="hljs-built_in">gsub</span>(<span class="hljs-string">&#x27;\r&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)   <span class="hljs-comment">-- å»æ‰ \r</span><br>    handle:<span class="hljs-built_in">close</span>()<br>    <span class="hljs-built_in">load</span>(code)()                                    <span class="hljs-comment">-- å®‰å…¨åŠ è½½</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h3 id="éªŒè¯æ•ˆæœ-1"><a href="#éªŒè¯æ•ˆæœ-1" class="headerlink" title="éªŒè¯æ•ˆæœ"></a>éªŒè¯æ•ˆæœ</h3><p>é‡æ–°æ‰“å¼€ Cmd çª—å£ï¼Œå³å¯çœ‹åˆ°ç¾åŒ–åçš„å‘½ä»¤æç¤ºç¬¦ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œä½ çš„ PowerShell å’Œ Cmd ç°åœ¨éƒ½æ‹¥æœ‰äº†ä¸€ä¸ªç¾è§‚ä¸”ä¿¡æ¯ä¸°å¯Œçš„å‘½ä»¤æç¤ºç¬¦ã€‚å¦‚æœæƒ³è¦æ›´æ¢ä¸»é¢˜ï¼Œåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ <code>.omp.json</code> è·¯å¾„å³å¯ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>oh-my-posh</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>PowerShell</tag>
      
      <tag>Cmd</tag>
      
      <tag>oh-my-posh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Difyæœ¬åœ°Dockeréƒ¨ç½²</title>
    <link href="/posts/AI/Dify%E6%9C%AC%E5%9C%B0Docker%E9%83%A8%E7%BD%B2/35265/"/>
    <url>/posts/AI/Dify%E6%9C%AC%E5%9C%B0Docker%E9%83%A8%E7%BD%B2/35265/</url>
    
    <content type="html"><![CDATA[<h2 id="Difyæœ¬åœ°Dockeréƒ¨ç½²"><a href="#Difyæœ¬åœ°Dockeréƒ¨ç½²" class="headerlink" title="Difyæœ¬åœ°Dockeréƒ¨ç½²"></a>Difyæœ¬åœ°Dockeréƒ¨ç½²</h2><p>æ‹‰å–gitä»£ç :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> http://github.com/langgenius/dify.git<br></code></pre></td></tr></table></figure><p>å®‰è£…é¡¹ç›®è·¯å¾„ä¸‹ï¼Œæœç´¢<code>docker-compose.yaml</code>ï¼Œå³é”®æ‰“å¼€æ‰€åœ¨æ–‡ä»¶å¤¹</p><ul><li>åº”è¯¥åœ¨ dify&#x2F;docker&#x2F; ç›®å½•ä¸‹</li></ul><p><code>.env.example</code> å¤åˆ¶å¹¶ä¿®æ”¹æˆ<code>.env</code> æ–‡ä»¶ã€‚<br>æ‰¾åˆ°<code>REDIS_SENTINEL_SOCKET_TIMEOUT</code>å’Œ<code>CELERY_SENTINEL_SOCKET_TIMEOUT</code>ä¿®æ”¹ä¸º10å³å¯ã€‚</p><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker compose up -d<br></code></pre></td></tr></table></figure><h2 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker compose down<br></code></pre></td></tr></table></figure><h2 id="æ›´æ–°Dify"><a href="#æ›´æ–°Dify" class="headerlink" title="æ›´æ–°Dify"></a>æ›´æ–°Dify</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> dify/docker<br>docker compose down<br>git pull origin main<br>docker compose pull<br>docker compose up -d<br></code></pre></td></tr></table></figure><h2 id="Difyé…ç½®"><a href="#Difyé…ç½®" class="headerlink" title="Difyé…ç½®"></a>Difyé…ç½®</h2><p>æ‰“å¼€æµè§ˆå™¨ï¼Œæœ¬åœ°è®¿é—®ï¼š127.0.0.1</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Docker</tag>
      
      <tag>Dify</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>n8næ±‰åŒ–æœ¬åœ°Dockeréƒ¨ç½²</title>
    <link href="/posts/AI/n8n%E6%B1%89%E5%8C%96%E6%9C%AC%E5%9C%B0Docker%E9%83%A8%E7%BD%B2/45178/"/>
    <url>/posts/AI/n8n%E6%B1%89%E5%8C%96%E6%9C%AC%E5%9C%B0Docker%E9%83%A8%E7%BD%B2/45178/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰ç½®è¦æ±‚"><a href="#å‰ç½®è¦æ±‚" class="headerlink" title="å‰ç½®è¦æ±‚"></a>å‰ç½®è¦æ±‚</h2><ul><li>Docker å’Œ Docker Compose å·²å®‰è£…</li></ul><h3 id="1-ä¸‹è½½æ±‰åŒ–åŒ…"><a href="#1-ä¸‹è½½æ±‰åŒ–åŒ…" class="headerlink" title="1. ä¸‹è½½æ±‰åŒ–åŒ…"></a>1. ä¸‹è½½æ±‰åŒ–åŒ…</h3><p>å‰å¾€Â <a href="https://github.com/other-blowsnow/n8n-i18n-chinese/releases">n8n æ±‰åŒ–åŒ…é¡¹ç›®</a>Â ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æ±‰åŒ–æ–‡ä»¶ã€‚</p><p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p><ol><li>ä¸‹è½½æœ€æ–°çš„æ±‰åŒ–åŒ…å‹ç¼©æ–‡ä»¶</li><li>è§£å‹ä¸‹è½½çš„æ–‡ä»¶</li><li>ç¡®ä¿è§£å‹ååŒ…å«Â <code>editor-ui/dist</code>Â æ–‡ä»¶å¤¹</li></ol><h3 id="2-Docker-Compose-éƒ¨ç½²ï¼ˆæ¨èï¼‰"><a href="#2-Docker-Compose-éƒ¨ç½²ï¼ˆæ¨èï¼‰" class="headerlink" title="2. Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰"></a>2. Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰</h3><p>åˆ›å»ºÂ <code>docker-compose.yml</code>Â æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">n8n:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">n8nio/n8n</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">n8n</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;5678:5678&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-comment"># è¿è¡Œæ•°æ®æŒ‚è½½ - ç¡®ä¿å·¥ä½œæµæ•°æ®æŒä¹…åŒ–</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./n8n_data:/home/node/.n8n</span><br>      <span class="hljs-comment"># æ±‰åŒ–åŒ…æŒ‚è½½ - æ›¿æ¢ä¸ºä½ çš„æ±‰åŒ–åŒ…è·¯å¾„</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./editor-ui/dist:/usr/local/lib/node_modules/n8n/node_modules/n8n-editor-ui/dist</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">N8N_HOST=localhost</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">N8N_PORT=5678</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">N8N_PROTOCOL=http</span><br>      <span class="hljs-comment"># å¯é€‰ï¼šè®¾ç½®åŸºæœ¬è®¤è¯ï¼ˆå¢å¼ºå®‰å…¨æ€§ï¼‰</span><br>      <span class="hljs-comment"># - N8N_BASIC_AUTH_ACTIVE=true</span><br>      <span class="hljs-comment"># - N8N_BASIC_AUTH_USER=myuser</span><br>      <span class="hljs-comment"># - N8N_BASIC_AUTH_PASSWORD=mypassword</span><br>      <span class="hljs-comment"># æ—¶åŒºè®¾ç½®ï¼ˆäºšæ´²/ä¸Šæµ·ï¼‰</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">GENERIC_TIMEZONE=Asia/Shanghai</span><br>      <span class="hljs-comment"># è°ƒè¯•æ—¶ç¦ç”¨å®‰å…¨Cookieï¼ˆæ–¹ä¾¿æœ¬åœ°è®¿é—®ï¼‰</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">N8N_SECURE_COOKIE=false</span><br>      <span class="hljs-comment"># è®¾ç½®é»˜è®¤è¯­è¨€ä¸ºç®€ä½“ä¸­æ–‡</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">N8N_DEFAULT_LOCALE=zh-CN</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">n8n-network</span><br><br><span class="hljs-attr">networks:</span><br>  <span class="hljs-attr">n8n-network:</span><br>    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span><br></code></pre></td></tr></table></figure><p><strong>å¯åŠ¨æœåŠ¡ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose up -d<br></code></pre></td></tr></table></figure><h3 id="3-Docker-ç›´æ¥éƒ¨ç½²ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰"><a href="#3-Docker-ç›´æ¥éƒ¨ç½²ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰" class="headerlink" title="3. Docker ç›´æ¥éƒ¨ç½²ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰"></a>3. Docker ç›´æ¥éƒ¨ç½²ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰</h3><p>åˆ›å»ºå¯åŠ¨è„šæœ¬æˆ–ç›´æ¥è¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -it --name n8nChinese \<br>  -p 5678:5678 \<br>  -v <span class="hljs-string">&quot;/path/to/editor-ui-dist:/usr/local/lib/node_modules/n8n/node_modules/n8n-editor-ui/dist&quot;</span> \<br>  -v <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;HOME&#125;</span>/.n8n:/home/node/.n8n&quot;</span> \<br>  -e N8N_DEFAULT_LOCALE=zh-CN \<br>  -e N8N_SECURE_COOKIE=<span class="hljs-literal">false</span> \<br>  n8nio/n8n<br></code></pre></td></tr></table></figure><h3 id="4-è®¿é—®å’Œåˆå§‹åŒ–"><a href="#4-è®¿é—®å’Œåˆå§‹åŒ–" class="headerlink" title="4. è®¿é—®å’Œåˆå§‹åŒ–"></a>4. è®¿é—®å’Œåˆå§‹åŒ–</h3><ol><li>æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š<a href="http://localhost:5678/">http://localhost:5678</a></li><li>é¦–æ¬¡è®¿é—®éœ€è¦è¾“å…¥é‚®ç®±åœ°å€è¿›è¡Œæ³¨å†Œ</li><li>n8n ä¼šå‘è¯¥é‚®ç®±å‘é€æ¿€æ´»ç </li><li>æŒ‰æç¤ºè¾“å…¥æ¿€æ´»ç å®Œæˆåˆå§‹åŒ–</li></ol><h2 id="âš ï¸-é‡è¦æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-é‡è¦æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸Â é‡è¦æ³¨æ„äº‹é¡¹"></a>âš ï¸Â é‡è¦æ³¨æ„äº‹é¡¹</h2><ul><li><strong>æ•°æ®æŒä¹…åŒ–</strong>ï¼šåŠ¡å¿…æŒ‚è½½æœ¬åœ°ç›®å½•ä¿å­˜å·¥ä½œæµæ•°æ®ï¼Œé¿å…å®¹å™¨é‡å¯åæ•°æ®ä¸¢å¤±</li><li><strong>ç«¯å£å†²çª</strong>ï¼šå¦‚ç«¯å£ 5678 è¢«å ç”¨ï¼Œå¯ä¿®æ”¹Â <code>-p</code>Â å‚æ•°æ˜ å°„å…¶ä»–ç«¯å£</li><li><strong>æ±‰åŒ–é…ç½®</strong>ï¼š<code>N8N_DEFAULT_LOCALE=zh-CN</code>Â ç¯å¢ƒå˜é‡å¼ºåˆ¶è®¾ç½®ä¸ºç®€ä½“ä¸­æ–‡ç•Œé¢</li><li><strong>å®‰å…¨è­¦å‘Š</strong>ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®å¯ç”¨åŸºæœ¬è®¤è¯å’Œå®‰å…¨Cookieè®¾ç½®</li></ul>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AI</tag>
      
      <tag>Docker</tag>
      
      <tag>n8n</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬</title>
    <link href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-PostgreSQL%E7%89%88%E6%9C%AC/61171/"/>
    <url>/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-PostgreSQL%E7%89%88%E6%9C%AC/61171/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬"><a href="#ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬" class="headerlink" title="ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬"></a>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬</h1><p>æœ¬æ–‡æ¡£åŸºäº <a href="/posts/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.html">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡</a> ä¸­çš„è®¾è®¡ï¼Œæä¾› PostgreSQL 14+ ç‰ˆæœ¬çš„å»ºè¡¨è¯­å¥ã€‚</p><h2 id="1-æ•°æ®åº“åˆ›å»º"><a href="#1-æ•°æ®åº“åˆ›å»º" class="headerlink" title="1. æ•°æ®åº“åˆ›å»º"></a>1. æ•°æ®åº“åˆ›å»º</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“</span><br><span class="hljs-keyword">CREATE</span> DATABASE &quot;rbac_system&quot;<br>    <span class="hljs-keyword">WITH</span><br>    OWNER <span class="hljs-operator">=</span> postgres<br>    ENCODING <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;UTF8&#x27;</span><br>    LC_COLLATE <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;en_US.utf8&#x27;</span><br>    LC_CTYPE <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;en_US.utf8&#x27;</span><br>    TABLESPACE <span class="hljs-operator">=</span> pg_default<br>    CONNECTION LIMIT <span class="hljs-operator">=</span> <span class="hljs-number">-1</span>;<br><br><span class="hljs-comment">-- è¿æ¥åˆ°æ•°æ®åº“</span><br>\c &quot;rbac_system&quot;;<br><br><span class="hljs-comment">-- åˆ›å»ºUUIDæ‰©å±•</span><br><span class="hljs-keyword">CREATE</span> EXTENSION IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> &quot;uuid-ossp&quot;;<br><br><span class="hljs-comment">-- åˆ›å»ºåŠ å¯†æ‰©å±•</span><br><span class="hljs-keyword">CREATE</span> EXTENSION IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> &quot;pgcrypto&quot;;<br></code></pre></td></tr></table></figure><h2 id="2-æšä¸¾ç±»å‹å®šä¹‰"><a href="#2-æšä¸¾ç±»å‹å®šä¹‰" class="headerlink" title="2. æšä¸¾ç±»å‹å®šä¹‰"></a>2. æšä¸¾ç±»å‹å®šä¹‰</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- ç”¨æˆ·æ€§åˆ«æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE gender_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><br><span class="hljs-comment">-- çŠ¶æ€æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE status_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);<br><br><span class="hljs-comment">-- èœå•ç±»å‹æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE menu_type_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br><br><span class="hljs-comment">-- æ•°æ®æƒé™èŒƒå›´æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE data_scope_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>);<br><br><span class="hljs-comment">-- ä¸šåŠ¡ç±»å‹æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE business_type_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>, <span class="hljs-string">&#x27;5&#x27;</span>, <span class="hljs-string">&#x27;6&#x27;</span>);<br><br><span class="hljs-comment">-- æ“ä½œç±»åˆ«æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE operator_type_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>);<br><br><span class="hljs-comment">-- æ˜¯å¦æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE yes_no_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;Y&#x27;</span>, <span class="hljs-string">&#x27;N&#x27;</span>);<br><br><span class="hljs-comment">-- å‘¨æœŸå•ä½æšä¸¾</span><br><span class="hljs-keyword">CREATE</span> TYPE cycle_unit_enum <span class="hljs-keyword">AS</span> ENUM (<span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="3-åºåˆ—å®šä¹‰"><a href="#3-åºåˆ—å®šä¹‰" class="headerlink" title="3. åºåˆ—å®šä¹‰"></a>3. åºåˆ—å®šä¹‰</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºè‡ªå¢åºåˆ—</span><br><span class="hljs-keyword">CREATE</span> SEQUENCE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> seq_sys_id<br>    <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span><br>    INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span><br>    <span class="hljs-keyword">NO</span> MINVALUE<br>    <span class="hljs-keyword">NO</span> MAXVALUE<br>    CACHE <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºåºåˆ—å‡½æ•°</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> next_id()<br><span class="hljs-keyword">RETURNS</span> <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">AS</span> $$<br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">RETURN</span> nextval(<span class="hljs-string">&#x27;seq_sys_id&#x27;</span>);<br><span class="hljs-keyword">END</span>;<br>$$ <span class="hljs-keyword">LANGUAGE</span> PLPGSQL;<br></code></pre></td></tr></table></figure><h2 id="4-æ ¸å¿ƒä¸šåŠ¡è¡¨"><a href="#4-æ ¸å¿ƒä¸šåŠ¡è¡¨" class="headerlink" title="4. æ ¸å¿ƒä¸šåŠ¡è¡¨"></a>4. æ ¸å¿ƒä¸šåŠ¡è¡¨</h2><h3 id="4-1-éƒ¨é—¨è¡¨-sys-dept"><a href="#4-1-éƒ¨é—¨è¡¨-sys-dept" class="headerlink" title="4.1 éƒ¨é—¨è¡¨ (sys_dept)"></a>4.1 éƒ¨é—¨è¡¨ (sys_dept)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_dept (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    dept_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    dept_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    parent_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    leader_id <span class="hljs-type">BIGINT</span>,<br>    leader_phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),<br>    leader_email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    tenant_id <span class="hljs-type">BIGINT</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_dept_code <span class="hljs-keyword">UNIQUE</span> (dept_code, tenant_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_dept <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.dept_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.dept_code <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨ç¼–ç &#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.parent_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çˆ¶éƒ¨é—¨ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.leader_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è´Ÿè´£äººç”¨æˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.leader_phone <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è´Ÿè´£äººè”ç³»ç”µè¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.leader_email <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è´Ÿè´£äººé‚®ç®±&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dept.tenant_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_dept_parent_id <span class="hljs-keyword">ON</span> sys_dept (parent_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_dept_status <span class="hljs-keyword">ON</span> sys_dept (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_dept_delete_flag <span class="hljs-keyword">ON</span> sys_dept (delete_flag);<br><span class="hljs-keyword">CREATE</span> INDEX idx_dept_tenant_id <span class="hljs-keyword">ON</span> sys_dept (tenant_id);<br></code></pre></td></tr></table></figure><h3 id="4-2-å²—ä½è¡¨-sys-post"><a href="#4-2-å²—ä½è¡¨-sys-post" class="headerlink" title="4.2 å²—ä½è¡¨ (sys_post)"></a>4.2 å²—ä½è¡¨ (sys_post)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_post (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    post_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    post_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    dept_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    tenant_id <span class="hljs-type">BIGINT</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_post_code <span class="hljs-keyword">UNIQUE</span> (post_code, tenant_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_post <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å²—ä½è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å²—ä½ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.post_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å²—ä½åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.post_code <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å²—ä½ç¼–ç &#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.dept_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ‰€å±éƒ¨é—¨ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_post.tenant_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_post_dept_id <span class="hljs-keyword">ON</span> sys_post (dept_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_post_status <span class="hljs-keyword">ON</span> sys_post (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_post_delete_flag <span class="hljs-keyword">ON</span> sys_post (delete_flag);<br><span class="hljs-keyword">CREATE</span> INDEX idx_post_tenant_id <span class="hljs-keyword">ON</span> sys_post (tenant_id);<br></code></pre></td></tr></table></figure><h3 id="4-3-ç”¨æˆ·è¡¨-sys-user"><a href="#4-3-ç”¨æˆ·è¡¨-sys-user" class="headerlink" title="4.3 ç”¨æˆ·è¡¨ (sys_user)"></a>4.3 ç”¨æˆ·è¡¨ (sys_user)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_user (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    nickname <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    real_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),<br>    avatar <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    sex gender_enum <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    birthday <span class="hljs-type">DATE</span>,<br>    dept_id <span class="hljs-type">BIGINT</span>,<br>    post_id <span class="hljs-type">BIGINT</span>,<br>    address <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    last_login_time <span class="hljs-type">TIMESTAMP</span>,<br>    last_login_ip <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    tenant_id <span class="hljs-type">BIGINT</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_username <span class="hljs-keyword">UNIQUE</span> (username, tenant_id),<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_email <span class="hljs-keyword">UNIQUE</span> (email, tenant_id),<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_phone <span class="hljs-keyword">UNIQUE</span> (phone, tenant_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_user <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.username <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.password <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¯†ç &#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.nickname <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜µç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.real_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çœŸå®å§“å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.email <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é‚®ç®±&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.phone <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ‰‹æœºå·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.avatar <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤´åƒåœ°å€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.sex <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ€§åˆ«ï¼š0-æœªçŸ¥ï¼Œ1-ç”·ï¼Œ2-å¥³&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.birthday <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”Ÿæ—¥&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.dept_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.post_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å²—ä½ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.address <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åœ°å€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.last_login_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æœ€åç™»å½•æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.last_login_ip <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æœ€åç™»å½•IP&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user.tenant_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_user_dept_id <span class="hljs-keyword">ON</span> sys_user (dept_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_user_post_id <span class="hljs-keyword">ON</span> sys_user (post_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_user_status <span class="hljs-keyword">ON</span> sys_user (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_user_delete_flag <span class="hljs-keyword">ON</span> sys_user (delete_flag);<br><span class="hljs-keyword">CREATE</span> INDEX idx_user_tenant_id <span class="hljs-keyword">ON</span> sys_user (tenant_id);<br></code></pre></td></tr></table></figure><h3 id="4-4-è§’è‰²è¡¨-sys-role"><a href="#4-4-è§’è‰²è¡¨-sys-role" class="headerlink" title="4.4 è§’è‰²è¡¨ (sys_role)"></a>4.4 è§’è‰²è¡¨ (sys_role)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_role (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    role_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    role_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    data_scope data_scope_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    tenant_id <span class="hljs-type">BIGINT</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_role_code <span class="hljs-keyword">UNIQUE</span> (role_code, tenant_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_role <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.role_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.role_code <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²ç¼–ç &#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.data_scope <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ•°æ®æƒé™ï¼š1-å…¨éƒ¨ï¼Œ2-æœ¬éƒ¨é—¨ï¼Œ3-æœ¬éƒ¨é—¨åŠä¸‹çº§ï¼Œ4-è‡ªå®šä¹‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role.tenant_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_role_status <span class="hljs-keyword">ON</span> sys_role (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_role_data_scope <span class="hljs-keyword">ON</span> sys_role (data_scope);<br><span class="hljs-keyword">CREATE</span> INDEX idx_role_delete_flag <span class="hljs-keyword">ON</span> sys_role (delete_flag);<br><span class="hljs-keyword">CREATE</span> INDEX idx_role_tenant_id <span class="hljs-keyword">ON</span> sys_role (tenant_id);<br></code></pre></td></tr></table></figure><h3 id="4-5-èœå•è¡¨-sys-menu"><a href="#4-5-èœå•è¡¨-sys-menu" class="headerlink" title="4.5 èœå•è¡¨ (sys_menu)"></a>4.5 èœå•è¡¨ (sys_menu)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_menu (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    menu_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    menu_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    parent_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    menu_type menu_type_enum <span class="hljs-keyword">NOT NULL</span>,<br>    path <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    component <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    icon <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    permission <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    target <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;_self&#x27;</span>,<br>    is_cache status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    is_visible status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    is_external status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    tenant_id <span class="hljs-type">BIGINT</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_menu_code <span class="hljs-keyword">UNIQUE</span> (menu_code, tenant_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_menu <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;èœå•è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;èœå•ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.menu_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;èœå•åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.menu_code <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;èœå•ç¼–ç /æƒé™æ ‡è¯†&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.parent_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çˆ¶èœå•ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.menu_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;èœå•ç±»å‹ï¼š1-ç›®å½•ï¼Œ2-èœå•ï¼Œ3-æŒ‰é’®&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.path <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è·¯ç”±è·¯å¾„&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.component <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç»„ä»¶è·¯å¾„&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.icon <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å›¾æ ‡&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.permission <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æƒé™æ ‡è¯†&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.target <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ‰“å¼€æ–¹å¼ï¼š_self-å½“å‰é¡µï¼Œ_blank-æ–°é¡µ&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.is_cache <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦ç¼“å­˜ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.is_visible <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦æ˜¾ç¤ºï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.is_external <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦å¤–é“¾ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_menu.tenant_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_menu_parent_id <span class="hljs-keyword">ON</span> sys_menu (parent_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_menu_menu_type <span class="hljs-keyword">ON</span> sys_menu (menu_type);<br><span class="hljs-keyword">CREATE</span> INDEX idx_menu_status <span class="hljs-keyword">ON</span> sys_menu (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_menu_delete_flag <span class="hljs-keyword">ON</span> sys_menu (delete_flag);<br><span class="hljs-keyword">CREATE</span> INDEX idx_menu_tenant_id <span class="hljs-keyword">ON</span> sys_menu (tenant_id);<br></code></pre></td></tr></table></figure><h2 id="5-å…³è”è¡¨"><a href="#5-å…³è”è¡¨" class="headerlink" title="5. å…³è”è¡¨"></a>5. å…³è”è¡¨</h2><h3 id="5-1-ç”¨æˆ·è§’è‰²å…³è”è¡¨-sys-user-role"><a href="#5-1-ç”¨æˆ·è§’è‰²å…³è”è¡¨-sys-user-role" class="headerlink" title="5.1 ç”¨æˆ·è§’è‰²å…³è”è¡¨ (sys_user_role)"></a>5.1 ç”¨æˆ·è§’è‰²å…³è”è¡¨ (sys_user_role)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_user_role (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    role_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_user_role <span class="hljs-keyword">UNIQUE</span> (user_id, role_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_user_role <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·è§’è‰²å…³è”è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user_role.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user_role.user_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_user_role.role_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_user_role_user_id <span class="hljs-keyword">ON</span> sys_user_role (user_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_user_role_role_id <span class="hljs-keyword">ON</span> sys_user_role (role_id);<br></code></pre></td></tr></table></figure><h3 id="5-2-è§’è‰²èœå•å…³è”è¡¨-sys-role-menu"><a href="#5-2-è§’è‰²èœå•å…³è”è¡¨-sys-role-menu" class="headerlink" title="5.2 è§’è‰²èœå•å…³è”è¡¨ (sys_role_menu)"></a>5.2 è§’è‰²èœå•å…³è”è¡¨ (sys_role_menu)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_role_menu (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    role_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    menu_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_role_menu <span class="hljs-keyword">UNIQUE</span> (role_id, menu_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_role_menu <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²èœå•å…³è”è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role_menu.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role_menu.role_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role_menu.menu_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;èœå•ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_role_menu_role_id <span class="hljs-keyword">ON</span> sys_role_menu (role_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_role_menu_menu_id <span class="hljs-keyword">ON</span> sys_role_menu (menu_id);<br></code></pre></td></tr></table></figure><h3 id="5-3-è§’è‰²éƒ¨é—¨å…³è”è¡¨-sys-role-dept"><a href="#5-3-è§’è‰²éƒ¨é—¨å…³è”è¡¨-sys-role-dept" class="headerlink" title="5.3 è§’è‰²éƒ¨é—¨å…³è”è¡¨ (sys_role_dept)"></a>5.3 è§’è‰²éƒ¨é—¨å…³è”è¡¨ (sys_role_dept)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_role_dept (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    role_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    dept_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_role_dept <span class="hljs-keyword">UNIQUE</span> (role_id, dept_id)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_role_dept <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²éƒ¨é—¨å…³è”è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role_dept.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role_dept.role_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_role_dept.dept_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_role_dept_role_id <span class="hljs-keyword">ON</span> sys_role_dept (role_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_role_dept_dept_id <span class="hljs-keyword">ON</span> sys_role_dept (dept_id);<br></code></pre></td></tr></table></figure><h2 id="6-æ—¥å¿—è¡¨"><a href="#6-æ—¥å¿—è¡¨" class="headerlink" title="6. æ—¥å¿—è¡¨"></a>6. æ—¥å¿—è¡¨</h2><h3 id="6-1-ç™»å½•æ—¥å¿—è¡¨-sys-login-log"><a href="#6-1-ç™»å½•æ—¥å¿—è¡¨-sys-login-log" class="headerlink" title="6.1 ç™»å½•æ—¥å¿—è¡¨ (sys_login_log)"></a>6.1 ç™»å½•æ—¥å¿—è¡¨ (sys_login_log)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_login_log (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    user_id <span class="hljs-type">BIGINT</span>,<br>    ipaddr <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    login_location <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    browser <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    os <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    device <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    msg <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    login_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span><br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_login_log <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç™»å½•æ—¥å¿—è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ—¥å¿—ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.username <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.user_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.ipaddr <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç™»å½•IPåœ°å€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.login_location <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç™»å½•åœ°ç‚¹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.browser <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æµè§ˆå™¨ç±»å‹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.os <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œç³»ç»Ÿ&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.device <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è®¾å¤‡ç±»å‹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç™»å½•çŠ¶æ€ï¼š0-å¤±è´¥ï¼Œ1-æˆåŠŸ&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.msg <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æç¤ºä¿¡æ¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.login_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç™»å½•æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_login_log.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_login_log_user_id <span class="hljs-keyword">ON</span> sys_login_log (user_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_login_log_username <span class="hljs-keyword">ON</span> sys_login_log (username);<br><span class="hljs-keyword">CREATE</span> INDEX idx_login_log_login_time <span class="hljs-keyword">ON</span> sys_login_log (login_time);<br><span class="hljs-keyword">CREATE</span> INDEX idx_login_log_username_time <span class="hljs-keyword">ON</span> sys_login_log (username, login_time);<br></code></pre></td></tr></table></figure><h3 id="6-2-æ“ä½œæ—¥å¿—è¡¨-sys-operation-log"><a href="#6-2-æ“ä½œæ—¥å¿—è¡¨-sys-operation-log" class="headerlink" title="6.2 æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)"></a>6.2 æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_operation_log (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    business_type business_type_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    business_type_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    <span class="hljs-keyword">method</span> <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    request_method <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    operator_type operator_type_enum <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    operator_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    dept_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    operation_url <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    operation_ip <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    operation_location <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    operation_param TEXT,<br>    json_result TEXT,<br>    operation_status status_enum <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    error_msg <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">2000</span>),<br>    operation_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    cost_time <span class="hljs-type">BIGINT</span><br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_operation_log <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œæ—¥å¿—è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ—¥å¿—ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.title <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œæ¨¡å—&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.business_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¸šåŠ¡ç±»å‹ï¼ˆ0-å…¶ä»– 1-æ–°å¢ 2-ä¿®æ”¹ 3-åˆ é™¤ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.business_type_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¸šåŠ¡ç±»å‹åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.method <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚æ–¹å¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.request_method <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚ç±»å‹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operator_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œç±»åˆ«ï¼ˆ0-å…¶å®ƒ 1-åå°ç”¨æˆ· 2-æ‰‹æœºç«¯ç”¨æˆ·ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operator_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œäººå‘˜&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.dept_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operation_url <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚URL&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operation_ip <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œåœ°å€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operation_location <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œåœ°ç‚¹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operation_param <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚å‚æ•°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.json_result <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¿”å›å‚æ•°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operation_status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œçŠ¶æ€ï¼š0-æ­£å¸¸ï¼Œ1-å¼‚å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.error_msg <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é”™è¯¯æ¶ˆæ¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.operation_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_operation_log.cost_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ¶ˆè€—æ—¶é—´&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_operation_log_user_id <span class="hljs-keyword">ON</span> sys_operation_log (operator_name);<br><span class="hljs-keyword">CREATE</span> INDEX idx_operation_log_operation_time <span class="hljs-keyword">ON</span> sys_operation_log (operation_time);<br><span class="hljs-keyword">CREATE</span> INDEX idx_operation_log_business_type <span class="hljs-keyword">ON</span> sys_operation_log (business_type);<br><span class="hljs-keyword">CREATE</span> INDEX idx_operation_log_status <span class="hljs-keyword">ON</span> sys_operation_log (operation_status);<br></code></pre></td></tr></table></figure><h3 id="6-3-é”™è¯¯æ—¥å¿—è¡¨-sys-error-log"><a href="#6-3-é”™è¯¯æ—¥å¿—è¡¨-sys-error-log" class="headerlink" title="6.3 é”™è¯¯æ—¥å¿—è¡¨ (sys_error_log)"></a>6.3 é”™è¯¯æ—¥å¿—è¡¨ (sys_error_log)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_error_log (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    request_uri <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    request_method <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    request_params TEXT,<br>    user_id <span class="hljs-type">BIGINT</span>,<br>    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    user_ip <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>),<br>    user_agent <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    exception_info TEXT <span class="hljs-keyword">NOT NULL</span>,<br>    exception_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>),<br>    stack_trace TEXT,<br>    line_number <span class="hljs-type">INTEGER</span>,<br>    class_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    method_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    process_user_id <span class="hljs-type">BIGINT</span>,<br>    process_user_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    process_remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    process_time <span class="hljs-type">TIMESTAMP</span>,<br>    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span><br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_error_log <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é”™è¯¯æ—¥å¿—è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ—¥å¿—ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.title <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é”™è¯¯æ ‡é¢˜&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.request_uri <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚URL&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.request_method <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚æ–¹å¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.request_params <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¯·æ±‚å‚æ•°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.user_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.username <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.user_ip <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ“ä½œIPåœ°å€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.user_agent <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”¨æˆ·ä»£ç†&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.exception_info <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é”™è¯¯æ¶ˆæ¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.exception_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¼‚å¸¸åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.stack_trace <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é”™è¯¯å †æ ˆ&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.line_number <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é”™è¯¯è¡Œå·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.class_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;Javaç±»å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.method_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ–¹æ³•å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.process_user_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤„ç†äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.process_user_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤„ç†äºº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.process_remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤„ç†å¤‡æ³¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.process_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤„ç†æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_error_log.create_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_error_log_user_id <span class="hljs-keyword">ON</span> sys_error_log (user_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_error_log_create_time <span class="hljs-keyword">ON</span> sys_error_log (create_time);<br><span class="hljs-keyword">CREATE</span> INDEX idx_error_log_status <span class="hljs-keyword">ON</span> sys_error_log (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_error_log_exception_name <span class="hljs-keyword">ON</span> sys_error_log (exception_name);<br></code></pre></td></tr></table></figure><h2 id="7-ç§Ÿæˆ·ç®¡ç†è¡¨"><a href="#7-ç§Ÿæˆ·ç®¡ç†è¡¨" class="headerlink" title="7. ç§Ÿæˆ·ç®¡ç†è¡¨"></a>7. ç§Ÿæˆ·ç®¡ç†è¡¨</h2><h3 id="7-1-ç§Ÿæˆ·è¡¨-sys-tenant"><a href="#7-1-ç§Ÿæˆ·è¡¨-sys-tenant" class="headerlink" title="7.1 ç§Ÿæˆ·è¡¨ (sys_tenant)"></a>7.1 ç§Ÿæˆ·è¡¨ (sys_tenant)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_tenant (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    tenant_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    tenant_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    contact_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    contact_phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),<br>    contact_email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>),<br>    company_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    domain <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    address <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),<br>    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),<br>    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    package_id <span class="hljs-type">BIGINT</span>,<br>    expire_time <span class="hljs-type">TIMESTAMP</span>,<br>    account_count <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_tenant_code <span class="hljs-keyword">UNIQUE</span> (tenant_code)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_tenant <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.tenant_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.tenant_code <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ç¼–ç &#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.contact_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è”ç³»äºº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.contact_phone <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è”ç³»ç”µè¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.contact_email <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è”ç³»é‚®ç®±&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.company_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¼ä¸šåç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.domain <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åŸŸå&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.address <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åœ°å€&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.phone <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç”µè¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.email <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é‚®ç®±&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.package_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¥—é¤ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.expire_time <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ°æœŸæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.account_count <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è´¦å·æ•°é‡&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_package_id <span class="hljs-keyword">ON</span> sys_tenant (package_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_status <span class="hljs-keyword">ON</span> sys_tenant (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_delete_flag <span class="hljs-keyword">ON</span> sys_tenant (delete_flag);<br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_expire_time <span class="hljs-keyword">ON</span> sys_tenant (expire_time);<br></code></pre></td></tr></table></figure><h3 id="7-2-ç§Ÿæˆ·å¥—é¤è¡¨-sys-tenant-package"><a href="#7-2-ç§Ÿæˆ·å¥—é¤è¡¨-sys-tenant-package" class="headerlink" title="7.2 ç§Ÿæˆ·å¥—é¤è¡¨ (sys_tenant_package)"></a>7.2 ç§Ÿæˆ·å¥—é¤è¡¨ (sys_tenant_package)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_tenant_package (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    package_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    package_code <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    max_users <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">10</span>,<br>    max_storage <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1073741824</span>,<br>    price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0.00</span>,<br>    cycle_unit cycle_unit_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    features TEXT,<br>    description <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    sort_order <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_package_code <span class="hljs-keyword">UNIQUE</span> (package_code)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_tenant_package <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·å¥—é¤è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¥—é¤ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.package_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¥—é¤åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.package_code <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¥—é¤ç¼–ç &#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.max_users <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æœ€å¤§ç”¨æˆ·æ•°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.max_storage <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æœ€å¤§å­˜å‚¨ç©ºé—´ï¼ˆå­—èŠ‚ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.price <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä»·æ ¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.cycle_unit <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è®¡è´¹å‘¨æœŸï¼š1-æœˆï¼Œ2-å­£ï¼Œ3-å¹´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.features <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åŠŸèƒ½ç‰¹æ€§ï¼ˆJSONæ ¼å¼ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.description <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¥—é¤æè¿°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.sort_order <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_package.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_package_status <span class="hljs-keyword">ON</span> sys_tenant_package (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_package_delete_flag <span class="hljs-keyword">ON</span> sys_tenant_package (delete_flag);<br></code></pre></td></tr></table></figure><h3 id="7-3-ç§Ÿæˆ·é…ç½®è¡¨-sys-tenant-config"><a href="#7-3-ç§Ÿæˆ·é…ç½®è¡¨-sys-tenant-config" class="headerlink" title="7.3 ç§Ÿæˆ·é…ç½®è¡¨ (sys_tenant_config)"></a>7.3 ç§Ÿæˆ·é…ç½®è¡¨ (sys_tenant_config)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_tenant_config (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    tenant_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span>,<br>    config_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    config_value TEXT,<br>    config_type status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    is_encrypted status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_tenant_key <span class="hljs-keyword">UNIQUE</span> (tenant_id, config_key)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_tenant_config <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·é…ç½®è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é…ç½®ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.tenant_id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.config_key <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é…ç½®é”®&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.config_value <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;é…ç½®å€¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.config_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç³»ç»Ÿå†…ç½®ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.is_encrypted <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åŠ å¯†ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_tenant_config.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_config_tenant_id <span class="hljs-keyword">ON</span> sys_tenant_config (tenant_id);<br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_config_key <span class="hljs-keyword">ON</span> sys_tenant_config (config_key);<br><span class="hljs-keyword">CREATE</span> INDEX idx_tenant_config_type <span class="hljs-keyword">ON</span> sys_tenant_config (config_type);<br></code></pre></td></tr></table></figure><h2 id="8-ç³»ç»Ÿé…ç½®è¡¨"><a href="#8-ç³»ç»Ÿé…ç½®è¡¨" class="headerlink" title="8. ç³»ç»Ÿé…ç½®è¡¨"></a>8. ç³»ç»Ÿé…ç½®è¡¨</h2><h3 id="8-1-å­—å…¸ç±»å‹è¡¨-sys-dict-type"><a href="#8-1-å­—å…¸ç±»å‹è¡¨-sys-dict-type" class="headerlink" title="8.1 å­—å…¸ç±»å‹è¡¨ (sys_dict_type)"></a>8.1 å­—å…¸ç±»å‹è¡¨ (sys_dict_type)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_dict_type (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    dict_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    dict_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_dict_type <span class="hljs-keyword">UNIQUE</span> (dict_type)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_dict_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸ç±»å‹è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸ä¸»é”®&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.dict_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.dict_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸ç±»å‹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäºº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äºº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_type.remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_dict_type_status <span class="hljs-keyword">ON</span> sys_dict_type (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_dict_type_delete_flag <span class="hljs-keyword">ON</span> sys_dict_type (delete_flag);<br></code></pre></td></tr></table></figure><h3 id="8-2-å­—å…¸æ•°æ®è¡¨-sys-dict-data"><a href="#8-2-å­—å…¸æ•°æ®è¡¨-sys-dict-data" class="headerlink" title="8.2 å­—å…¸æ•°æ®è¡¨ (sys_dict_data)"></a>8.2 å­—å…¸æ•°æ®è¡¨ (sys_dict_data)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_dict_data (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    dict_sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    dict_label <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    dict_value <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    dict_type <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    css_class <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    list_class <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),<br>    is_default yes_no_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;N&#x27;</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_dict_data <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸æ•°æ®è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ•°æ®ç¼–å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.dict_sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.dict_label <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸æ ‡ç­¾&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.dict_value <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸é”®å€¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.dict_type <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å­—å…¸ç±»å‹&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.css_class <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¡¨æ ¼å›æ˜¾æ ·å¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.list_class <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;è¡¨æ ¼åˆ—è¡¨æ ·å¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.is_default <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦é»˜è®¤ï¼ˆYæ˜¯ Nå¦ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäºº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äºº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_dict_data.remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_dict_data_type_status <span class="hljs-keyword">ON</span> sys_dict_data (dict_type, status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_dict_data_sort <span class="hljs-keyword">ON</span> sys_dict_data (dict_sort);<br><span class="hljs-keyword">CREATE</span> INDEX idx_dict_data_delete_flag <span class="hljs-keyword">ON</span> sys_dict_data (delete_flag);<br><br><span class="hljs-comment">-- æ·»åŠ å¤–é”®çº¦æŸ</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_dict_data <span class="hljs-keyword">ADD CONSTRAINT</span> fk_data_type<br><span class="hljs-keyword">FOREIGN KEY</span> (dict_type) <span class="hljs-keyword">REFERENCES</span> sys_dict_type (dict_type) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br></code></pre></td></tr></table></figure><h3 id="8-3-å‚æ•°é…ç½®è¡¨-sys-params"><a href="#8-3-å‚æ•°é…ç½®è¡¨-sys-params" class="headerlink" title="8.3 å‚æ•°é…ç½®è¡¨ (sys_params)"></a>8.3 å‚æ•°é…ç½®è¡¨ (sys_params)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> sys_params (<br>    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY KEY</span> <span class="hljs-keyword">DEFAULT</span> next_id(),<br>    param_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    param_key <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span>,<br>    param_value <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    is_system status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    is_encrypted status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    sort <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,<br>    status status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span>,<br>    remark <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),<br>    create_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    creator <span class="hljs-type">BIGINT</span>,<br>    update_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>    updater <span class="hljs-type">BIGINT</span>,<br>    delete_flag status_enum <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span>,<br>    delete_at <span class="hljs-type">TIMESTAMP</span>,<br>    version <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,<br>    <span class="hljs-keyword">CONSTRAINT</span> uk_param_key <span class="hljs-keyword">UNIQUE</span> (param_key)<br>);<br><br><span class="hljs-comment">-- æ·»åŠ æ³¨é‡Š</span><br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">TABLE</span> sys_params <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å‚æ•°é…ç½®è¡¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.id <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å‚æ•°ID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.param_name <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å‚æ•°åç§°&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.param_key <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å‚æ•°é”®å&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.param_value <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å‚æ•°é”®å€¼&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.is_system <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ç³»ç»Ÿå†…ç½®ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.is_encrypted <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åŠ å¯†ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.sort <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ’åº&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.status <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.remark <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.create_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.creator <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.update_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.updater <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.delete_flag <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.delete_at <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>;<br>COMMENT <span class="hljs-keyword">ON</span> <span class="hljs-keyword">COLUMN</span> sys_params.version <span class="hljs-keyword">IS</span> <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>;<br><br><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span><br><span class="hljs-keyword">CREATE</span> INDEX idx_params_is_system <span class="hljs-keyword">ON</span> sys_params (is_system);<br><span class="hljs-keyword">CREATE</span> INDEX idx_params_status <span class="hljs-keyword">ON</span> sys_params (status);<br><span class="hljs-keyword">CREATE</span> INDEX idx_params_delete_flag <span class="hljs-keyword">ON</span> sys_params (delete_flag);<br></code></pre></td></tr></table></figure><h2 id="9-å¤–é”®çº¦æŸ"><a href="#9-å¤–é”®çº¦æŸ" class="headerlink" title="9. å¤–é”®çº¦æŸ"></a>9. å¤–é”®çº¦æŸ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- éƒ¨é—¨è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_dept <span class="hljs-keyword">ADD CONSTRAINT</span> fk_dept_leader<br><span class="hljs-keyword">FOREIGN KEY</span> (leader_id) <span class="hljs-keyword">REFERENCES</span> sys_user (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><br><span class="hljs-comment">-- å²—ä½è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_post <span class="hljs-keyword">ADD CONSTRAINT</span> fk_post_dept<br><span class="hljs-keyword">FOREIGN KEY</span> (dept_id) <span class="hljs-keyword">REFERENCES</span> sys_dept (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- ç”¨æˆ·è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_user <span class="hljs-keyword">ADD CONSTRAINT</span> fk_user_dept<br><span class="hljs-keyword">FOREIGN KEY</span> (dept_id) <span class="hljs-keyword">REFERENCES</span> sys_dept (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><span class="hljs-keyword">ALTER TABLE</span> sys_user <span class="hljs-keyword">ADD CONSTRAINT</span> fk_user_post<br><span class="hljs-keyword">FOREIGN KEY</span> (post_id) <span class="hljs-keyword">REFERENCES</span> sys_post (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><br><span class="hljs-comment">-- ç”¨æˆ·è§’è‰²å…³è”è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_user_role <span class="hljs-keyword">ADD CONSTRAINT</span> fk_ur_user<br><span class="hljs-keyword">FOREIGN KEY</span> (user_id) <span class="hljs-keyword">REFERENCES</span> sys_user (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><span class="hljs-keyword">ALTER TABLE</span> sys_user_role <span class="hljs-keyword">ADD CONSTRAINT</span> fk_ur_role<br><span class="hljs-keyword">FOREIGN KEY</span> (role_id) <span class="hljs-keyword">REFERENCES</span> sys_role (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- è§’è‰²èœå•å…³è”è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_role_menu <span class="hljs-keyword">ADD CONSTRAINT</span> fk_rm_role<br><span class="hljs-keyword">FOREIGN KEY</span> (role_id) <span class="hljs-keyword">REFERENCES</span> sys_role (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><span class="hljs-keyword">ALTER TABLE</span> sys_role_menu <span class="hljs-keyword">ADD CONSTRAINT</span> fk_rm_menu<br><span class="hljs-keyword">FOREIGN KEY</span> (menu_id) <span class="hljs-keyword">REFERENCES</span> sys_menu (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- è§’è‰²éƒ¨é—¨å…³è”è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_role_dept <span class="hljs-keyword">ADD CONSTRAINT</span> fk_rd_role<br><span class="hljs-keyword">FOREIGN KEY</span> (role_id) <span class="hljs-keyword">REFERENCES</span> sys_role (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><span class="hljs-keyword">ALTER TABLE</span> sys_role_dept <span class="hljs-keyword">ADD CONSTRAINT</span> fk_rd_dept<br><span class="hljs-keyword">FOREIGN KEY</span> (dept_id) <span class="hljs-keyword">REFERENCES</span> sys_dept (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- ç§Ÿæˆ·ç›¸å…³å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> sys_tenant <span class="hljs-keyword">ADD CONSTRAINT</span> fk_tenant_package<br><span class="hljs-keyword">FOREIGN KEY</span> (package_id) <span class="hljs-keyword">REFERENCES</span> sys_tenant_package (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><span class="hljs-keyword">ALTER TABLE</span> sys_tenant_config <span class="hljs-keyword">ADD CONSTRAINT</span> fk_config_tenant<br><span class="hljs-keyword">FOREIGN KEY</span> (tenant_id) <span class="hljs-keyword">REFERENCES</span> sys_tenant (id) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br></code></pre></td></tr></table></figure><h2 id="10-è§¦å‘å™¨å’Œå‡½æ•°"><a href="#10-è§¦å‘å™¨å’Œå‡½æ•°" class="headerlink" title="10. è§¦å‘å™¨å’Œå‡½æ•°"></a>10. è§¦å‘å™¨å’Œå‡½æ•°</h2><h3 id="10-1-æ›´æ–°æ—¶é—´è§¦å‘å™¨å‡½æ•°"><a href="#10-1-æ›´æ–°æ—¶é—´è§¦å‘å™¨å‡½æ•°" class="headerlink" title="10.1 æ›´æ–°æ—¶é—´è§¦å‘å™¨å‡½æ•°"></a>10.1 æ›´æ–°æ—¶é—´è§¦å‘å™¨å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> update_modified_column()<br><span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">TRIGGER</span> <span class="hljs-keyword">AS</span> $$<br><span class="hljs-keyword">BEGIN</span><br>    NEW.update_at <span class="hljs-operator">=</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>;<br>    <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;<br><span class="hljs-keyword">END</span>;<br>$$ <span class="hljs-keyword">language</span> <span class="hljs-string">&#x27;plpgsql&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="10-2-åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨"><a href="#10-2-åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨" class="headerlink" title="10.2 åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨"></a>10.2 åˆ›å»ºæ›´æ–°æ—¶é—´è§¦å‘å™¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- éƒ¨é—¨è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_dept_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_dept<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- å²—ä½è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_post_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_post<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- ç”¨æˆ·è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_user_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_user<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- è§’è‰²è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_role_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_role<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- èœå•è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_menu_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_menu<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- ç§Ÿæˆ·è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_tenant_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_tenant<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- ç§Ÿæˆ·å¥—é¤è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_tenant_package_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_tenant_package<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- ç§Ÿæˆ·é…ç½®è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_tenant_config_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_tenant_config<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- å­—å…¸ç±»å‹è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_dict_type_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_dict_type<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- å­—å…¸æ•°æ®è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_dict_data_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_dict_data<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br><br><span class="hljs-comment">-- å‚æ•°é…ç½®è¡¨è§¦å‘å™¨</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> tr_params_update BEFORE <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> sys_params<br>    <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> update_modified_column();<br></code></pre></td></tr></table></figure><h3 id="10-3-å¯†ç åŠ å¯†å‡½æ•°"><a href="#10-3-å¯†ç åŠ å¯†å‡½æ•°" class="headerlink" title="10.3 å¯†ç åŠ å¯†å‡½æ•°"></a>10.3 å¯†ç åŠ å¯†å‡½æ•°</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> encrypt_password(p_password TEXT)<br><span class="hljs-keyword">RETURNS</span> TEXT <span class="hljs-keyword">AS</span> $$<br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">RETURN</span> encode(digest(p_password, <span class="hljs-string">&#x27;sha256&#x27;</span>), <span class="hljs-string">&#x27;hex&#x27;</span>);<br><span class="hljs-keyword">END</span>;<br>$$ <span class="hljs-keyword">LANGUAGE</span> plpgsql SECURITY DEFINER;<br></code></pre></td></tr></table></figure><h2 id="11-åˆå§‹åŒ–æ•°æ®"><a href="#11-åˆå§‹åŒ–æ•°æ®" class="headerlink" title="11. åˆå§‹åŒ–æ•°æ®"></a>11. åˆå§‹åŒ–æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- é»˜è®¤è¶…çº§ç®¡ç†å‘˜</span><br><span class="hljs-keyword">INSERT INTO</span> sys_user (id, username, password, nickname, real_name, email, status)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;admin&#x27;</span>, encrypt_password(<span class="hljs-string">&#x27;admin123&#x27;</span>), <span class="hljs-string">&#x27;è¶…çº§ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;ç³»ç»Ÿç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;admin@example.com&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);<br><br><span class="hljs-comment">-- é»˜è®¤è§’è‰²</span><br><span class="hljs-keyword">INSERT INTO</span> sys_role (id, role_name, role_code, remark, data_scope)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;è¶…çº§ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;ROLE_ADMIN&#x27;</span>, <span class="hljs-string">&#x27;ç³»ç»Ÿè¶…çº§ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>);<br><br><span class="hljs-comment">-- ç”¨æˆ·è§’è‰²å…³è”</span><br><span class="hljs-keyword">INSERT INTO</span> sys_user_role (user_id, role_id) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">-- é»˜è®¤éƒ¨é—¨</span><br><span class="hljs-keyword">INSERT INTO</span> sys_dept (id, dept_name, dept_code, parent_id, status)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;æ€»å…¬å¸&#x27;</span>, <span class="hljs-string">&#x27;ROOT&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;1&#x27;</span>);<br><br><span class="hljs-comment">-- æ›´æ–°è¶…çº§ç®¡ç†å‘˜éƒ¨é—¨</span><br><span class="hljs-keyword">UPDATE</span> sys_user <span class="hljs-keyword">SET</span> dept_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- é»˜è®¤èœå•æ•°æ®</span><br><span class="hljs-keyword">INSERT INTO</span> sys_menu (menu_name, menu_code, parent_id, menu_type, path, icon, sort) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;ç³»ç»Ÿç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;/system&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:user&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;è§’è‰²ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:role&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;role&#x27;</span>, <span class="hljs-string">&#x27;role&#x27;</span>, <span class="hljs-number">2</span>),<br>(<span class="hljs-string">&#x27;èœå•ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:menu&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;menu&#x27;</span>, <span class="hljs-string">&#x27;menu&#x27;</span>, <span class="hljs-number">3</span>),<br>(<span class="hljs-string">&#x27;éƒ¨é—¨ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:dept&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;dept&#x27;</span>, <span class="hljs-string">&#x27;dept&#x27;</span>, <span class="hljs-number">4</span>),<br>(<span class="hljs-string">&#x27;å²—ä½ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:post&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-number">5</span>);<br><br><span class="hljs-comment">-- é»˜è®¤å­—å…¸ç±»å‹</span><br><span class="hljs-keyword">INSERT INTO</span> sys_dict_type (dict_name, dict_type) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;ç”¨æˆ·æ€§åˆ«&#x27;</span>, <span class="hljs-string">&#x27;user_gender&#x27;</span>),<br>(<span class="hljs-string">&#x27;èœå•ç±»å‹&#x27;</span>, <span class="hljs-string">&#x27;menu_type&#x27;</span>),<br>(<span class="hljs-string">&#x27;æ•°æ®æƒé™&#x27;</span>, <span class="hljs-string">&#x27;data_scope&#x27;</span>),<br>(<span class="hljs-string">&#x27;ä¸šåŠ¡ç±»å‹&#x27;</span>, <span class="hljs-string">&#x27;business_type&#x27;</span>);<br><br><span class="hljs-comment">-- é»˜è®¤å­—å…¸æ•°æ®</span><br><span class="hljs-keyword">INSERT INTO</span> sys_dict_data (dict_label, dict_value, dict_type, dict_sort) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;æœªçŸ¥&#x27;</span>, <span class="hljs-string">&#x27;0&#x27;</span>, <span class="hljs-string">&#x27;user_gender&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;ç”·&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;user_gender&#x27;</span>, <span class="hljs-number">2</span>),<br>(<span class="hljs-string">&#x27;å¥³&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;user_gender&#x27;</span>, <span class="hljs-number">3</span>),<br>(<span class="hljs-string">&#x27;ç›®å½•&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;menu_type&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;èœå•&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;menu_type&#x27;</span>, <span class="hljs-number">2</span>),<br>(<span class="hljs-string">&#x27;æŒ‰é’®&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;menu_type&#x27;</span>, <span class="hljs-number">3</span>),<br>(<span class="hljs-string">&#x27;å…¨éƒ¨æ•°æ®&#x27;</span>, <span class="hljs-string">&#x27;1&#x27;</span>, <span class="hljs-string">&#x27;data_scope&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;æœ¬éƒ¨é—¨æ•°æ®&#x27;</span>, <span class="hljs-string">&#x27;2&#x27;</span>, <span class="hljs-string">&#x27;data_scope&#x27;</span>, <span class="hljs-number">2</span>),<br>(<span class="hljs-string">&#x27;æœ¬éƒ¨é—¨åŠä¸‹çº§&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;data_scope&#x27;</span>, <span class="hljs-number">3</span>),<br>(<span class="hljs-string">&#x27;è‡ªå®šä¹‰æ•°æ®&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>, <span class="hljs-string">&#x27;data_scope&#x27;</span>, <span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><h2 id="12-å®Œæ•´SQLè„šæœ¬"><a href="#12-å®Œæ•´SQLè„šæœ¬" class="headerlink" title="12. å®Œæ•´SQLè„šæœ¬"></a>12. å®Œæ•´SQLè„šæœ¬</h2><p>å®Œæ•´çš„PostgreSQLå»ºè¡¨è„šæœ¬å·²ä¿å­˜ä¸ºï¼š</p><ul><li><a href="/assets/sql/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-PostgreSQL%E7%89%88%E6%9C%AC-complete.sql">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬-complete.sql</a> - å¯ç›´æ¥æ‰§è¡Œçš„å®Œæ•´SQLè„šæœ¬</li></ul><h2 id="13-ç›¸å…³é“¾æ¥"><a href="#13-ç›¸å…³é“¾æ¥" class="headerlink" title="13. ç›¸å…³é“¾æ¥"></a>13. ç›¸å…³é“¾æ¥</h2><ul><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/13770/">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡</a> - [[ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡]]</li><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-MySQL%E7%89%88%E6%9C%AC/30189/">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬</a> - [[ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬]]</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>RBAC</tag>
      
      <tag>PostgreSQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬</title>
    <link href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-MySQL%E7%89%88%E6%9C%AC/30189/"/>
    <url>/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-MySQL%E7%89%88%E6%9C%AC/30189/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬"><a href="#ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬" class="headerlink" title="ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬"></a>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬</h1><p>æœ¬æ–‡æ¡£åŸºäº <a href="/posts/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1.html">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡</a> ä¸­çš„è®¾è®¡ï¼Œæä¾› MySQL 8.0+ ç‰ˆæœ¬çš„å»ºè¡¨è¯­å¥ã€‚</p><h2 id="1-æ•°æ®åº“åˆ›å»º"><a href="#1-æ•°æ®åº“åˆ›å»º" class="headerlink" title="1. æ•°æ®åº“åˆ›å»º"></a>1. æ•°æ®åº“åˆ›å»º</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“</span><br><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> `rbac_system`<br><span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">CHARACTER SET</span> utf8mb4<br><span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;<br><br>USE `rbac_system`;<br></code></pre></td></tr></table></figure><h2 id="2-æ ¸å¿ƒä¸šåŠ¡è¡¨"><a href="#2-æ ¸å¿ƒä¸šåŠ¡è¡¨" class="headerlink" title="2. æ ¸å¿ƒä¸šåŠ¡è¡¨"></a>2. æ ¸å¿ƒä¸šåŠ¡è¡¨</h2><h3 id="2-1-éƒ¨é—¨è¡¨-sys-dept"><a href="#2-1-éƒ¨é—¨è¡¨-sys-dept" class="headerlink" title="2.1 éƒ¨é—¨è¡¨ (sys_dept)"></a>2.1 éƒ¨é—¨è¡¨ (sys_dept)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_dept` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span>,<br>  `dept_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span>,<br>  `dept_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;éƒ¨é—¨ç¼–ç &#x27;</span>,<br>  `parent_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;çˆ¶éƒ¨é—¨ID&#x27;</span>,<br>  `leader_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è´Ÿè´£äººç”¨æˆ·ID&#x27;</span>,<br>  `leader_phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è´Ÿè´£äººè”ç³»ç”µè¯&#x27;</span>,<br>  `leader_email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è´Ÿè´£äººé‚®ç®±&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_dept_code` (`dept_code`, `tenant_id`),<br>  KEY `idx_parent_id` (`parent_id`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;éƒ¨é—¨è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="2-2-å²—ä½è¡¨-sys-post"><a href="#2-2-å²—ä½è¡¨-sys-post" class="headerlink" title="2.2 å²—ä½è¡¨ (sys_post)"></a>2.2 å²—ä½è¡¨ (sys_post)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_post` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;å²—ä½ID&#x27;</span>,<br>  `post_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å²—ä½åç§°&#x27;</span>,<br>  `post_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å²—ä½ç¼–ç &#x27;</span>,<br>  `dept_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;æ‰€å±éƒ¨é—¨ID&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_post_code` (`post_code`, `tenant_id`),<br>  KEY `idx_dept_id` (`dept_id`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;å²—ä½è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="2-3-ç”¨æˆ·è¡¨-sys-user"><a href="#2-3-ç”¨æˆ·è¡¨-sys-user" class="headerlink" title="2.3 ç”¨æˆ·è¡¨ (sys_user)"></a>2.3 ç”¨æˆ·è¡¨ (sys_user)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_user` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br>  `username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>,<br>  `password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å¯†ç &#x27;</span>,<br>  `nickname` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ˜µç§°&#x27;</span>,<br>  `real_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;çœŸå®å§“å&#x27;</span>,<br>  `email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é‚®ç®±&#x27;</span>,<br>  `phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ‰‹æœºå·&#x27;</span>,<br>  `avatar` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤´åƒåœ°å€&#x27;</span>,<br>  `sex` <span class="hljs-type">CHAR</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ€§åˆ«ï¼š0-æœªçŸ¥ï¼Œ1-ç”·ï¼Œ2-å¥³&#x27;</span>,<br>  `birthday` <span class="hljs-type">DATE</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”Ÿæ—¥&#x27;</span>,<br>  `dept_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span>,<br>  `post_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å²—ä½ID&#x27;</span>,<br>  `address` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åœ°å€&#x27;</span>,<br>  `remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `last_login_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æœ€åç™»å½•æ—¶é—´&#x27;</span>,<br>  `last_login_ip` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æœ€åç™»å½•IP&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_username` (`username`, `tenant_id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_email` (`email`, `tenant_id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_phone` (`phone`, `tenant_id`),<br>  KEY `idx_dept_id` (`dept_id`),<br>  KEY `idx_post_id` (`post_id`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="2-4-è§’è‰²è¡¨-sys-role"><a href="#2-4-è§’è‰²è¡¨-sys-role" class="headerlink" title="2.4 è§’è‰²è¡¨ (sys_role)"></a>2.4 è§’è‰²è¡¨ (sys_role)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_role` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  `role_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²åç§°&#x27;</span>,<br>  `role_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²ç¼–ç &#x27;</span>,<br>  `remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>,<br>  `data_scope` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;æ•°æ®æƒé™ï¼š1-å…¨éƒ¨ï¼Œ2-æœ¬éƒ¨é—¨ï¼Œ3-æœ¬éƒ¨é—¨åŠä¸‹çº§ï¼Œ4-è‡ªå®šä¹‰&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_role_code` (`role_code`, `tenant_id`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_data_scope` (`data_scope`),<br>  KEY `idx_delete_flag` (`delete_flag`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;è§’è‰²è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="2-5-èœå•è¡¨-sys-menu"><a href="#2-5-èœå•è¡¨-sys-menu" class="headerlink" title="2.5 èœå•è¡¨ (sys_menu)"></a>2.5 èœå•è¡¨ (sys_menu)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_menu` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;èœå•ID&#x27;</span>,<br>  `menu_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;èœå•åç§°&#x27;</span>,<br>  `menu_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;èœå•ç¼–ç /æƒé™æ ‡è¯†&#x27;</span>,<br>  `parent_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;çˆ¶èœå•ID&#x27;</span>,<br>  `menu_type` TINYINT <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;èœå•ç±»å‹ï¼š1-ç›®å½•ï¼Œ2-èœå•ï¼Œ3-æŒ‰é’®&#x27;</span>,<br>  `path` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è·¯ç”±è·¯å¾„&#x27;</span>,<br>  `component` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç»„ä»¶è·¯å¾„&#x27;</span>,<br>  `icon` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å›¾æ ‡&#x27;</span>,<br>  `permission` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æƒé™æ ‡è¯†&#x27;</span>,<br>  `target` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;_self&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ‰“å¼€æ–¹å¼ï¼š_self-å½“å‰é¡µï¼Œ_blank-æ–°é¡µ&#x27;</span>,<br>  `is_cache` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦ç¼“å­˜ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `is_visible` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦æ˜¾ç¤ºï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `is_external` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦å¤–é“¾ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_menu_code` (`menu_code`, `tenant_id`),<br>  KEY `idx_parent_id` (`parent_id`),<br>  KEY `idx_menu_type` (`menu_type`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;èœå•è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="3-å…³è”è¡¨"><a href="#3-å…³è”è¡¨" class="headerlink" title="3. å…³è”è¡¨"></a>3. å…³è”è¡¨</h2><h3 id="3-1-ç”¨æˆ·è§’è‰²å…³è”è¡¨-sys-user-role"><a href="#3-1-ç”¨æˆ·è§’è‰²å…³è”è¡¨-sys-user-role" class="headerlink" title="3.1 ç”¨æˆ·è§’è‰²å…³è”è¡¨ (sys_user_role)"></a>3.1 ç”¨æˆ·è§’è‰²å…³è”è¡¨ (sys_user_role)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_user_role` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br>  `user_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br>  `role_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_user_role` (`user_id`, `role_id`),<br>  KEY `idx_user_id` (`user_id`),<br>  KEY `idx_role_id` (`role_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç”¨æˆ·è§’è‰²å…³è”è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="3-2-è§’è‰²èœå•å…³è”è¡¨-sys-role-menu"><a href="#3-2-è§’è‰²èœå•å…³è”è¡¨-sys-role-menu" class="headerlink" title="3.2 è§’è‰²èœå•å…³è”è¡¨ (sys_role_menu)"></a>3.2 è§’è‰²èœå•å…³è”è¡¨ (sys_role_menu)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_role_menu` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br>  `role_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  `menu_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;èœå•ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_role_menu` (`role_id`, `menu_id`),<br>  KEY `idx_role_id` (`role_id`),<br>  KEY `idx_menu_id` (`menu_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;è§’è‰²èœå•å…³è”è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="3-3-è§’è‰²éƒ¨é—¨å…³è”è¡¨-sys-role-dept"><a href="#3-3-è§’è‰²éƒ¨é—¨å…³è”è¡¨-sys-role-dept" class="headerlink" title="3.3 è§’è‰²éƒ¨é—¨å…³è”è¡¨ (sys_role_dept)"></a>3.3 è§’è‰²éƒ¨é—¨å…³è”è¡¨ (sys_role_dept)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_role_dept` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br>  `role_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è§’è‰²ID&#x27;</span>,<br>  `dept_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;éƒ¨é—¨ID&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_role_dept` (`role_id`, `dept_id`),<br>  KEY `idx_role_id` (`role_id`),<br>  KEY `idx_dept_id` (`dept_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;è§’è‰²éƒ¨é—¨å…³è”è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="4-æ—¥å¿—è¡¨"><a href="#4-æ—¥å¿—è¡¨" class="headerlink" title="4. æ—¥å¿—è¡¨"></a>4. æ—¥å¿—è¡¨</h2><h3 id="4-1-ç™»å½•æ—¥å¿—è¡¨-sys-login-log"><a href="#4-1-ç™»å½•æ—¥å¿—è¡¨-sys-login-log" class="headerlink" title="4.1 ç™»å½•æ—¥å¿—è¡¨ (sys_login_log)"></a>4.1 ç™»å½•æ—¥å¿—è¡¨ (sys_login_log)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_login_log` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;æ—¥å¿—ID&#x27;</span>,<br>  `username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>,<br>  `user_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br>  `ipaddr` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç™»å½•IPåœ°å€&#x27;</span>,<br>  `login_location` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç™»å½•åœ°ç‚¹&#x27;</span>,<br>  `browser` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æµè§ˆå™¨ç±»å‹&#x27;</span>,<br>  `os` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œç³»ç»Ÿ&#x27;</span>,<br>  `device` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è®¾å¤‡ç±»å‹&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;ç™»å½•çŠ¶æ€ï¼š0-å¤±è´¥ï¼Œ1-æˆåŠŸ&#x27;</span>,<br>  `msg` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æç¤ºä¿¡æ¯&#x27;</span>,<br>  `login_time` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;ç™»å½•æ—¶é—´&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  KEY `idx_user_id` (`user_id`),<br>  KEY `idx_username` (`username`),<br>  KEY `idx_login_time` (`login_time`),<br>  KEY `idx_username_time` (`username`, `login_time`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç™»å½•æ—¥å¿—è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="4-2-æ“ä½œæ—¥å¿—è¡¨-sys-operation-log"><a href="#4-2-æ“ä½œæ—¥å¿—è¡¨-sys-operation-log" class="headerlink" title="4.2 æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)"></a>4.2 æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_operation_log` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;æ—¥å¿—ID&#x27;</span>,<br>  `title` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œæ¨¡å—&#x27;</span>,<br>  `business_type` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;ä¸šåŠ¡ç±»å‹ï¼ˆ0-å…¶ä»– 1-æ–°å¢ 2-ä¿®æ”¹ 3-åˆ é™¤ï¼‰&#x27;</span>,<br>  `business_type_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ä¸šåŠ¡ç±»å‹åç§°&#x27;</span>,<br>  `<span class="hljs-keyword">method</span>` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚æ–¹å¼&#x27;</span>,<br>  `request_method` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚ç±»å‹&#x27;</span>,<br>  `operator_type` TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œç±»åˆ«ï¼ˆ0-å…¶å®ƒ 1-åå°ç”¨æˆ· 2-æ‰‹æœºç«¯ç”¨æˆ·ï¼‰&#x27;</span>,<br>  `operator_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œäººå‘˜&#x27;</span>,<br>  `dept_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;éƒ¨é—¨åç§°&#x27;</span>,<br>  `operation_url` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚URL&#x27;</span>,<br>  `operation_ip` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œåœ°å€&#x27;</span>,<br>  `operation_location` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œåœ°ç‚¹&#x27;</span>,<br>  `operation_param` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚å‚æ•°&#x27;</span>,<br>  `json_result` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è¿”å›å‚æ•°&#x27;</span>,<br>  `operation_status` TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œçŠ¶æ€ï¼š0-æ­£å¸¸ï¼Œ1-å¼‚å¸¸&#x27;</span>,<br>  `error_msg` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">2000</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é”™è¯¯æ¶ˆæ¯&#x27;</span>,<br>  `operation_time` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>,<br>  `cost_time` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ¶ˆè€—æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  KEY `idx_user_id` (`operator_name`),<br>  KEY `idx_operation_time` (`operation_time`),<br>  KEY `idx_business_type` (`business_type`),<br>  KEY `idx_operation_status` (`operation_status`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;æ“ä½œæ—¥å¿—è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="4-3-é”™è¯¯æ—¥å¿—è¡¨-sys-error-log"><a href="#4-3-é”™è¯¯æ—¥å¿—è¡¨-sys-error-log" class="headerlink" title="4.3 é”™è¯¯æ—¥å¿—è¡¨ (sys_error_log)"></a>4.3 é”™è¯¯æ—¥å¿—è¡¨ (sys_error_log)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_error_log` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;æ—¥å¿—ID&#x27;</span>,<br>  `title` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é”™è¯¯æ ‡é¢˜&#x27;</span>,<br>  `request_uri` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚URL&#x27;</span>,<br>  `request_method` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚æ–¹å¼&#x27;</span>,<br>  `request_params` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è¯·æ±‚å‚æ•°&#x27;</span>,<br>  `user_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ID&#x27;</span>,<br>  `username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>,<br>  `user_ip` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ“ä½œIPåœ°å€&#x27;</span>,<br>  `user_agent` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·ä»£ç†&#x27;</span>,<br>  `exception_info` TEXT <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;é”™è¯¯æ¶ˆæ¯&#x27;</span>,<br>  `exception_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¼‚å¸¸åç§°&#x27;</span>,<br>  `stack_trace` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é”™è¯¯å †æ ˆ&#x27;</span>,<br>  `line_number` <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é”™è¯¯è¡Œå·&#x27;</span>,<br>  `class_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;Javaç±»å&#x27;</span>,<br>  `method_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ–¹æ³•å&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>,<br>  `process_user_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤„ç†äººID&#x27;</span>,<br>  `process_user_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤„ç†äºº&#x27;</span>,<br>  `process_remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤„ç†å¤‡æ³¨&#x27;</span>,<br>  `process_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤„ç†æ—¶é—´&#x27;</span>,<br>  `create_time` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  KEY `idx_user_id` (`user_id`),<br>  KEY `idx_create_time` (`create_time`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_exception_name` (`exception_name`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;é”™è¯¯æ—¥å¿—è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="5-ç§Ÿæˆ·ç®¡ç†è¡¨"><a href="#5-ç§Ÿæˆ·ç®¡ç†è¡¨" class="headerlink" title="5. ç§Ÿæˆ·ç®¡ç†è¡¨"></a>5. ç§Ÿæˆ·ç®¡ç†è¡¨</h2><h3 id="5-1-ç§Ÿæˆ·è¡¨-sys-tenant"><a href="#5-1-ç§Ÿæˆ·è¡¨-sys-tenant" class="headerlink" title="5.1 ç§Ÿæˆ·è¡¨ (sys_tenant)"></a>5.1 ç§Ÿæˆ·è¡¨ (sys_tenant)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_tenant` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  `tenant_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·åç§°&#x27;</span>,<br>  `tenant_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ç¼–ç &#x27;</span>,<br>  `contact_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è”ç³»äºº&#x27;</span>,<br>  `contact_phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è”ç³»ç”µè¯&#x27;</span>,<br>  `contact_email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è”ç³»é‚®ç®±&#x27;</span>,<br>  `company_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ä¼ä¸šåç§°&#x27;</span>,<br>  `domain` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åŸŸå&#x27;</span>,<br>  `address` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åœ°å€&#x27;</span>,<br>  `phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ç”µè¯&#x27;</span>,<br>  `email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é‚®ç®±&#x27;</span>,<br>  `package_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¥—é¤ID&#x27;</span>,<br>  `expire_time` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ°æœŸæ—¶é—´&#x27;</span>,<br>  `account_count` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;è´¦å·æ•°é‡&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_tenant_code` (`tenant_code`),<br>  KEY `idx_package_id` (`package_id`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`),<br>  KEY `idx_expire_time` (`expire_time`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç§Ÿæˆ·è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="5-2-ç§Ÿæˆ·å¥—é¤è¡¨-sys-tenant-package"><a href="#5-2-ç§Ÿæˆ·å¥—é¤è¡¨-sys-tenant-package" class="headerlink" title="5.2 ç§Ÿæˆ·å¥—é¤è¡¨ (sys_tenant_package)"></a>5.2 ç§Ÿæˆ·å¥—é¤è¡¨ (sys_tenant_package)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_tenant_package` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;å¥—é¤ID&#x27;</span>,<br>  `package_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å¥—é¤åç§°&#x27;</span>,<br>  `package_code` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å¥—é¤ç¼–ç &#x27;</span>,<br>  `max_users` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">10</span> COMMENT <span class="hljs-string">&#x27;æœ€å¤§ç”¨æˆ·æ•°&#x27;</span>,<br>  `max_storage` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1073741824</span> COMMENT <span class="hljs-string">&#x27;æœ€å¤§å­˜å‚¨ç©ºé—´ï¼ˆå­—èŠ‚ï¼‰&#x27;</span>,<br>  `price` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0.00</span> COMMENT <span class="hljs-string">&#x27;ä»·æ ¼&#x27;</span>,<br>  `cycle_unit` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;è®¡è´¹å‘¨æœŸï¼š1-æœˆï¼Œ2-å­£ï¼Œ3-å¹´&#x27;</span>,<br>  `features` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åŠŸèƒ½ç‰¹æ€§ï¼ˆJSONæ ¼å¼ï¼‰&#x27;</span>,<br>  `description` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¥—é¤æè¿°&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸&#x27;</span>,<br>  `sort_order` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_package_code` (`package_code`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç§Ÿæˆ·å¥—é¤è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="5-3-ç§Ÿæˆ·é…ç½®è¡¨-sys-tenant-config"><a href="#5-3-ç§Ÿæˆ·é…ç½®è¡¨-sys-tenant-config" class="headerlink" title="5.3 ç§Ÿæˆ·é…ç½®è¡¨ (sys_tenant_config)"></a>5.3 ç§Ÿæˆ·é…ç½®è¡¨ (sys_tenant_config)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_tenant_config` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;é…ç½®ID&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·ID&#x27;</span>,<br>  `config_key` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;é…ç½®é”®&#x27;</span>,<br>  `config_value` TEXT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é…ç½®å€¼&#x27;</span>,<br>  `config_type` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;ç³»ç»Ÿå†…ç½®ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>,<br>  `is_encrypted` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åŠ å¯†ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>,<br>  `remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_tenant_key` (`tenant_id`, `config_key`),<br>  KEY `idx_tenant_id` (`tenant_id`),<br>  KEY `idx_config_key` (`config_key`),<br>  KEY `idx_config_type` (`config_type`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç§Ÿæˆ·é…ç½®è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="6-ç³»ç»Ÿé…ç½®è¡¨"><a href="#6-ç³»ç»Ÿé…ç½®è¡¨" class="headerlink" title="6. ç³»ç»Ÿé…ç½®è¡¨"></a>6. ç³»ç»Ÿé…ç½®è¡¨</h2><h3 id="6-1-å­—å…¸ç±»å‹è¡¨-sys-dict-type"><a href="#6-1-å­—å…¸ç±»å‹è¡¨-sys-dict-type" class="headerlink" title="6.1 å­—å…¸ç±»å‹è¡¨ (sys_dict_type)"></a>6.1 å­—å…¸ç±»å‹è¡¨ (sys_dict_type)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_dict_type` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;å­—å…¸ä¸»é”®&#x27;</span>,<br>  `dict_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å­—å…¸åç§°&#x27;</span>,<br>  `dict_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å­—å…¸ç±»å‹&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäºº&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äºº&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_dict_type` (`dict_type`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;å­—å…¸ç±»å‹è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="6-2-å­—å…¸æ•°æ®è¡¨-sys-dict-data"><a href="#6-2-å­—å…¸æ•°æ®è¡¨-sys-dict-data" class="headerlink" title="6.2 å­—å…¸æ•°æ®è¡¨ (sys_dict_data)"></a>6.2 å­—å…¸æ•°æ®è¡¨ (sys_dict_data)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_dict_data` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;æ•°æ®ç¼–å·&#x27;</span>,<br>  `dict_sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;å­—å…¸æ’åº&#x27;</span>,<br>  `dict_label` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å­—å…¸æ ‡ç­¾&#x27;</span>,<br>  `dict_value` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å­—å…¸é”®å€¼&#x27;</span>,<br>  `dict_type` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å­—å…¸ç±»å‹&#x27;</span>,<br>  `css_class` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è¡¨æ ¼å›æ˜¾æ ·å¼&#x27;</span>,<br>  `list_class` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è¡¨æ ¼åˆ—è¡¨æ ·å¼&#x27;</span>,<br>  `is_default` <span class="hljs-type">CHAR</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;N&#x27;</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦é»˜è®¤ï¼ˆYæ˜¯ Nå¦ï¼‰&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäºº&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äºº&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  `remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  KEY `idx_dict_type_status` (`dict_type`, `status`),<br>  KEY `idx_dict_sort` (`dict_sort`),<br>  KEY `idx_delete_flag` (`delete_flag`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;å­—å…¸æ•°æ®è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="6-3-å‚æ•°é…ç½®è¡¨-sys-params"><a href="#6-3-å‚æ•°é…ç½®è¡¨-sys-params" class="headerlink" title="6.3 å‚æ•°é…ç½®è¡¨ (sys_params)"></a>6.3 å‚æ•°é…ç½®è¡¨ (sys_params)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `sys_params` (<br>  `id` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;å‚æ•°ID&#x27;</span>,<br>  `param_name` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å‚æ•°åç§°&#x27;</span>,<br>  `param_key` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å‚æ•°é”®å&#x27;</span>,<br>  `param_value` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å‚æ•°é”®å€¼&#x27;</span>,<br>  `is_system` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;ç³»ç»Ÿå†…ç½®ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>,<br>  `is_encrypted` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åŠ å¯†ï¼ˆ0-å¦ 1-æ˜¯ï¼‰&#x27;</span>,<br>  `sort` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ’åº&#x27;</span>,<br>  `status` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰&#x27;</span>,<br>  `remark` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å¤‡æ³¨&#x27;</span>,<br>  `create_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `creator` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºäººID&#x27;</span>,<br>  `update_at` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br>  `updater` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°äººID&#x27;</span>,<br>  `delete_flag` TINYINT <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">&#x27;æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯&#x27;</span>,<br>  `delete_at` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ é™¤æ—¶é—´&#x27;</span>,<br>  `version` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span> COMMENT <span class="hljs-string">&#x27;ä¹è§‚é”ç‰ˆæœ¬å·&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY KEY</span> (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_param_key` (`param_key`),<br>  KEY `idx_is_system` (`is_system`),<br>  KEY `idx_status` (`status`),<br>  KEY `idx_delete_flag` (`delete_flag`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_unicode_ci COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;å‚æ•°é…ç½®è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="7-å¤–é”®çº¦æŸ"><a href="#7-å¤–é”®çº¦æŸ" class="headerlink" title="7. å¤–é”®çº¦æŸ"></a>7. å¤–é”®çº¦æŸ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- éƒ¨é—¨è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_dept` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_dept_leader`<br><span class="hljs-keyword">FOREIGN KEY</span> (`leader_id`) <span class="hljs-keyword">REFERENCES</span> `sys_user` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><br><span class="hljs-comment">-- å²—ä½è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_post` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_post_dept`<br><span class="hljs-keyword">FOREIGN KEY</span> (`dept_id`) <span class="hljs-keyword">REFERENCES</span> `sys_dept` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- ç”¨æˆ·è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_user` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_user_dept`<br><span class="hljs-keyword">FOREIGN KEY</span> (`dept_id`) <span class="hljs-keyword">REFERENCES</span> `sys_dept` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><span class="hljs-keyword">ALTER TABLE</span> `sys_user` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_user_post`<br><span class="hljs-keyword">FOREIGN KEY</span> (`post_id`) <span class="hljs-keyword">REFERENCES</span> `sys_post` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><br><span class="hljs-comment">-- ç”¨æˆ·è§’è‰²å…³è”è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_user_role` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_ur_user`<br><span class="hljs-keyword">FOREIGN KEY</span> (`user_id`) <span class="hljs-keyword">REFERENCES</span> `sys_user` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><span class="hljs-keyword">ALTER TABLE</span> `sys_user_role` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_ur_role`<br><span class="hljs-keyword">FOREIGN KEY</span> (`role_id`) <span class="hljs-keyword">REFERENCES</span> `sys_role` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- è§’è‰²èœå•å…³è”è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_role_menu` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_rm_role`<br><span class="hljs-keyword">FOREIGN KEY</span> (`role_id`) <span class="hljs-keyword">REFERENCES</span> `sys_role` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><span class="hljs-keyword">ALTER TABLE</span> `sys_role_menu` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_rm_menu`<br><span class="hljs-keyword">FOREIGN KEY</span> (`menu_id`) <span class="hljs-keyword">REFERENCES</span> `sys_menu` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- è§’è‰²éƒ¨é—¨å…³è”è¡¨å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_role_dept` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_rd_role`<br><span class="hljs-keyword">FOREIGN KEY</span> (`role_id`) <span class="hljs-keyword">REFERENCES</span> `sys_role` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><span class="hljs-keyword">ALTER TABLE</span> `sys_role_dept` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_rd_dept`<br><span class="hljs-keyword">FOREIGN KEY</span> (`dept_id`) <span class="hljs-keyword">REFERENCES</span> `sys_dept` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- ç§Ÿæˆ·ç›¸å…³å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_tenant` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_tenant_package`<br><span class="hljs-keyword">FOREIGN KEY</span> (`package_id`) <span class="hljs-keyword">REFERENCES</span> `sys_tenant_package` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">NULL</span>;<br><span class="hljs-keyword">ALTER TABLE</span> `sys_tenant_config` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_config_tenant`<br><span class="hljs-keyword">FOREIGN KEY</span> (`tenant_id`) <span class="hljs-keyword">REFERENCES</span> `sys_tenant` (`id`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br><br><span class="hljs-comment">-- å­—å…¸æ•°æ®å¤–é”®</span><br><span class="hljs-keyword">ALTER TABLE</span> `sys_dict_data` <span class="hljs-keyword">ADD CONSTRAINT</span> `fk_data_type`<br><span class="hljs-keyword">FOREIGN KEY</span> (`dict_type`) <span class="hljs-keyword">REFERENCES</span> `sys_dict_type` (`dict_type`) <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE;<br></code></pre></td></tr></table></figure><h2 id="8-åˆå§‹åŒ–æ•°æ®"><a href="#8-åˆå§‹åŒ–æ•°æ®" class="headerlink" title="8. åˆå§‹åŒ–æ•°æ®"></a>8. åˆå§‹åŒ–æ•°æ®</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- é»˜è®¤è¶…çº§ç®¡ç†å‘˜</span><br><span class="hljs-keyword">INSERT INTO</span> `sys_user` (`id`, `username`, `password`, `nickname`, `real_name`, `email`, `status`)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;admin&#x27;</span>, <span class="hljs-string">&#x27;$2a$10$7JB720yubVSOfvVtlWGIH.9wNHNl.WPs4F9QDmHtzvpZf4MxOb8.K&#x27;</span>, <span class="hljs-string">&#x27;è¶…çº§ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;ç³»ç»Ÿç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;admin@example.com&#x27;</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">-- é»˜è®¤è§’è‰²</span><br><span class="hljs-keyword">INSERT INTO</span> `sys_role` (`id`, `role_name`, `role_code`, `remark`, `data_scope`)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;è¶…çº§ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-string">&#x27;ROLE_ADMIN&#x27;</span>, <span class="hljs-string">&#x27;ç³»ç»Ÿè¶…çº§ç®¡ç†å‘˜&#x27;</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">-- ç”¨æˆ·è§’è‰²å…³è”</span><br><span class="hljs-keyword">INSERT INTO</span> `sys_user_role` (`user_id`, `role_id`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">-- é»˜è®¤éƒ¨é—¨</span><br><span class="hljs-keyword">INSERT INTO</span> `sys_dept` (`id`, `dept_name`, `dept_code`, `parent_id`, `status`)<br><span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;æ€»å…¬å¸&#x27;</span>, <span class="hljs-string">&#x27;ROOT&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br><br><span class="hljs-comment">-- æ›´æ–°è¶…çº§ç®¡ç†å‘˜éƒ¨é—¨</span><br><span class="hljs-keyword">UPDATE</span> `sys_user` <span class="hljs-keyword">SET</span> `dept_id` <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> `id` <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><br><span class="hljs-comment">-- é»˜è®¤èœå•æ•°æ®</span><br><span class="hljs-keyword">INSERT INTO</span> `sys_menu` (`menu_name`, `menu_code`, `parent_id`, `menu_type`, `path`, `icon`, `sort`) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;ç³»ç»Ÿç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;/system&#x27;</span>, <span class="hljs-string">&#x27;system&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;ç”¨æˆ·ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:user&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-number">1</span>),<br>(<span class="hljs-string">&#x27;è§’è‰²ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:role&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;role&#x27;</span>, <span class="hljs-string">&#x27;role&#x27;</span>, <span class="hljs-number">2</span>),<br>(<span class="hljs-string">&#x27;èœå•ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:menu&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;menu&#x27;</span>, <span class="hljs-string">&#x27;menu&#x27;</span>, <span class="hljs-number">3</span>),<br>(<span class="hljs-string">&#x27;éƒ¨é—¨ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:dept&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;dept&#x27;</span>, <span class="hljs-string">&#x27;dept&#x27;</span>, <span class="hljs-number">4</span>),<br>(<span class="hljs-string">&#x27;å²—ä½ç®¡ç†&#x27;</span>, <span class="hljs-string">&#x27;system:post&#x27;</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-string">&#x27;post&#x27;</span>, <span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><h2 id="9-å®Œæ•´SQLè„šæœ¬"><a href="#9-å®Œæ•´SQLè„šæœ¬" class="headerlink" title="9. å®Œæ•´SQLè„šæœ¬"></a>9. å®Œæ•´SQLè„šæœ¬</h2><p>å®Œæ•´çš„MySQLå»ºè¡¨è„šæœ¬å·²ä¿å­˜ä¸ºï¼š</p><ul><li><a href="/assets/sql/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-MySQL%E7%89%88%E6%9C%AC-complete.sql">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬-complete.sql</a> - å¯ç›´æ¥æ‰§è¡Œçš„å®Œæ•´SQLè„šæœ¬</li></ul><h2 id="10-ç›¸å…³é“¾æ¥"><a href="#10-ç›¸å…³é“¾æ¥" class="headerlink" title="10. ç›¸å…³é“¾æ¥"></a>10. ç›¸å…³é“¾æ¥</h2><ul><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/13770/">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡</a> - [[ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡]]</li><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-PostgreSQL%E7%89%88%E6%9C%AC/61171/">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬</a> - [[ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬]]</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>RBAC</tag>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡</title>
    <link href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/13770/"/>
    <url>/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/13770/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡"><a href="#ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡" class="headerlink" title="ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡"></a>ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡</h1><p>æœ¬æ–‡æ¡£ä»‹ç»äº†ä¸€ä¸ªå®Œæ•´çš„ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡ï¼Œé‡‡ç”¨ RBAC (Role-Based Access Control) æ¨¡å‹ï¼Œå¹¶æ‰©å±•äº†ç»„ç»‡æ¶æ„ç®¡ç†åŠŸèƒ½ï¼Œé€‚ç”¨äºä¸­å¤§å‹ä¼ä¸šç®¡ç†ç³»ç»Ÿã€‚</p><h2 id="1-è¡¨ç»“æ„æ¦‚è§ˆ"><a href="#1-è¡¨ç»“æ„æ¦‚è§ˆ" class="headerlink" title="1. è¡¨ç»“æ„æ¦‚è§ˆ"></a>1. è¡¨ç»“æ„æ¦‚è§ˆ</h2><h3 id="1-1-æ ¸å¿ƒä¸šåŠ¡è¡¨"><a href="#1-1-æ ¸å¿ƒä¸šåŠ¡è¡¨" class="headerlink" title="1.1 æ ¸å¿ƒä¸šåŠ¡è¡¨"></a>1.1 æ ¸å¿ƒä¸šåŠ¡è¡¨</h3><table><thead><tr><th>è¡¨å</th><th>è¡¨è¯´æ˜</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>sys_user</strong></td><td>ç”¨æˆ·è¡¨</td><td>å­˜å‚¨ç³»ç»Ÿç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…å«éƒ¨é—¨ã€å²—ä½å…³è”</td></tr><tr><td><strong>sys_role</strong></td><td>è§’è‰²è¡¨</td><td>å®šä¹‰ç³»ç»Ÿä¸­çš„å„ç§è§’è‰²ï¼ŒåŒ…å«æ•°æ®æƒé™é…ç½®</td></tr><tr><td><strong>sys_menu</strong></td><td>èœå•è¡¨</td><td>ç®¡ç†ç³»ç»Ÿçš„èœå•ç»“æ„å’Œæƒé™ç‚¹</td></tr><tr><td><strong>sys_dept</strong></td><td>éƒ¨é—¨è¡¨</td><td>ç»„ç»‡æ¶æ„ç®¡ç†ï¼Œæ”¯æŒæ ‘å½¢ç»“æ„</td></tr><tr><td><strong>sys_post</strong></td><td>å²—ä½è¡¨</td><td>èŒä½ç®¡ç†ï¼Œä¸éƒ¨é—¨å…³è”</td></tr><tr><td><strong>sys_tenant</strong></td><td>ç§Ÿæˆ·è¡¨</td><td>å¤šç§Ÿæˆ·ç³»ç»Ÿç§Ÿæˆ·ä¿¡æ¯</td></tr><tr><td><strong>sys_tenant_package</strong></td><td>ç§Ÿæˆ·å¥—é¤è¡¨</td><td>ç§Ÿæˆ·å¥—é¤é…ç½®</td></tr><tr><td><strong>sys_tenant_config</strong></td><td>ç§Ÿæˆ·é…ç½®è¡¨</td><td>ç§Ÿæˆ·ä¸ªæ€§åŒ–é…ç½®</td></tr><tr><td><strong>sys_dict_type</strong></td><td>å­—å…¸ç±»å‹è¡¨</td><td>ç³»ç»Ÿå­—å…¸ç±»å‹ç®¡ç†</td></tr><tr><td><strong>sys_dict_data</strong></td><td>å­—å…¸æ•°æ®è¡¨</td><td>å­—å…¸å…·ä½“æ•°æ®</td></tr><tr><td><strong>sys_params</strong></td><td>å‚æ•°è¡¨</td><td>ç³»ç»Ÿå‚æ•°é…ç½®</td></tr><tr><td><strong>sys_login_log</strong></td><td>ç™»å½•æ—¥å¿—è¡¨</td><td>è®°å½•ç”¨æˆ·ç™»å½•ç™»å‡ºæ—¥å¿—</td></tr><tr><td><strong>sys_operation_log</strong></td><td>æ“ä½œæ—¥å¿—è¡¨</td><td>è®°å½•ç”¨æˆ·å…³é”®æ“ä½œæ—¥å¿—</td></tr><tr><td><strong>sys_error_log</strong></td><td>é”™è¯¯æ—¥å¿—è¡¨</td><td>è®°å½•ç³»ç»Ÿé”™è¯¯å’Œå¼‚å¸¸æ—¥å¿—</td></tr></tbody></table><h3 id="1-2-å…³è”è¡¨"><a href="#1-2-å…³è”è¡¨" class="headerlink" title="1.2 å…³è”è¡¨"></a>1.2 å…³è”è¡¨</h3><table><thead><tr><th>è¡¨å</th><th>è¡¨è¯´æ˜</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>sys_user_role</strong></td><td>ç”¨æˆ·è§’è‰²å…³è”è¡¨</td><td>å»ºç«‹ç”¨æˆ·å’Œè§’è‰²ä¹‹é—´çš„å¤šå¯¹å¤šå…³ç³»</td></tr><tr><td><strong>sys_role_menu</strong></td><td>è§’è‰²èœå•å…³è”è¡¨</td><td>å»ºç«‹è§’è‰²å’Œèœå•ä¹‹é—´çš„å¤šå¯¹å¤šå…³ç³»</td></tr><tr><td><strong>sys_role_dept</strong></td><td>è§’è‰²éƒ¨é—¨å…³è”è¡¨</td><td>å»ºç«‹è§’è‰²å’Œæ•°æ®æƒé™éƒ¨é—¨çš„å…³ç³»</td></tr></tbody></table><h3 id="1-3-ç»Ÿä¸€å­—æ®µè§„èŒƒ"><a href="#1-3-ç»Ÿä¸€å­—æ®µè§„èŒƒ" class="headerlink" title="1.3 ç»Ÿä¸€å­—æ®µè§„èŒƒ"></a>1.3 ç»Ÿä¸€å­—æ®µè§„èŒƒ</h3><p>æ‰€æœ‰ä¸šåŠ¡è¡¨ï¼ˆéå…³è”è¡¨ï¼‰éƒ½åŒ…å«ä»¥ä¸‹ç»Ÿä¸€å­—æ®µï¼š</p><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>ä¸»é”®IDï¼Œè‡ªå¢</td><td>-</td></tr><tr><td>create_at</td><td>DATETIME&#x2F;TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td><td>CURRENT_TIMESTAMP</td></tr><tr><td>creator</td><td>BIGINT</td><td>åˆ›å»ºäººID</td><td>-</td></tr><tr><td>update_at</td><td>DATETIME&#x2F;TIMESTAMP</td><td>æ›´æ–°æ—¶é—´</td><td>CURRENT_TIMESTAMP</td></tr><tr><td>updater</td><td>BIGINT</td><td>æ›´æ–°äººID</td><td>-</td></tr><tr><td>delete_flag</td><td>TINYINT&#x2F;SMALLINT</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td><td>0</td></tr><tr><td>delete_at</td><td>DATETIME&#x2F;TIMESTAMP</td><td>åˆ é™¤æ—¶é—´</td><td>NULL</td></tr><tr><td>sort</td><td>INT</td><td>æ’åº</td><td>0</td></tr><tr><td>status</td><td>TINYINT</td><td>çŠ¶æ€: 0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td><td>0</td></tr><tr><td>version</td><td>INT</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td><td>1</td></tr></tbody></table><h3 id="1-4-é¢å¤–ç»Ÿä¸€å­—æ®µè§„èŒƒ"><a href="#1-4-é¢å¤–ç»Ÿä¸€å­—æ®µè§„èŒƒ" class="headerlink" title="1.4 é¢å¤–ç»Ÿä¸€å­—æ®µè§„èŒƒ"></a>1.4 é¢å¤–ç»Ÿä¸€å­—æ®µè§„èŒƒ</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>dept_id</td><td>BIGINT</td><td>éƒ¨é—¨ID</td><td>NULL</td></tr><tr><td>role_id</td><td>BIGINT</td><td>è§’è‰²ID</td><td>NULL</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>ç§Ÿæˆ·ID</td><td>NULL</td></tr></tbody></table><h2 id="2-è¡¨å…³ç³»å›¾"><a href="#2-è¡¨å…³ç³»å›¾" class="headerlink" title="2. è¡¨å…³ç³»å›¾"></a>2. è¡¨å…³ç³»å›¾</h2><pre><code class=" mermaid">erDiagram    %% æ ¸å¿ƒä¸šåŠ¡å…³ç³»    sys_dept ||--o&#123; sys_user : &quot;æ‰€å±éƒ¨é—¨&quot;    sys_dept ||--o&#123; sys_post : &quot;éƒ¨é—¨å²—ä½&quot;    sys_post &#125;o--|| sys_user : &quot;ç”¨æˆ·å²—ä½&quot;    sys_user &#125;o--o&#123; sys_user_role : &quot;ç”¨æˆ·è§’è‰²&quot;    sys_role ||--o&#123; sys_user_role : &quot;è§’è‰²ç”¨æˆ·&quot;    sys_role ||--o&#123; sys_role_menu : &quot;è§’è‰²èœå•&quot;    sys_menu ||--o&#123; sys_role_menu : &quot;èœå•è§’è‰²&quot;    sys_role ||--o&#123; sys_role_dept : &quot;è§’è‰²æ•°æ®æƒé™&quot;    sys_dept ||--o&#123; sys_role_dept : &quot;æ•°æ®æƒé™éƒ¨é—¨&quot;    %% æ—¥å¿—è¡¨å…³ç³»    sys_user ||--o&#123; sys_login_log : &quot;ç”¨æˆ·ç™»å½•æ—¥å¿—&quot;    sys_user ||--o&#123; sys_operation_log : &quot;ç”¨æˆ·æ“ä½œæ—¥å¿—&quot;    sys_user ||--o&#123; sys_error_log : &quot;ç”¨æˆ·é”™è¯¯æ—¥å¿—&quot;    %% ç³»ç»Ÿé…ç½®è¡¨å…³ç³»    sys_tenant_package ||--o&#123; sys_tenant : &quot;ç§Ÿæˆ·å¥—é¤&quot;    sys_tenant ||--o&#123; sys_tenant_config : &quot;ç§Ÿæˆ·é…ç½®&quot;    sys_dict_type ||--o&#123; sys_dict_data : &quot;å­—å…¸æ•°æ®&quot;    %% æ ¸å¿ƒä¸šåŠ¡è¡¨    sys_dept &#123;        bigint id PK        varchar dept_name        varchar dept_code        bigint parent_id        bigint leader_id FK        varchar leader_phone        varchar leader_email        tinyint status        int sort_order        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_post &#123;        bigint id PK        varchar post_name        varchar post_code        bigint dept_id FK        int sort_order        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_user &#123;        bigint id PK        varchar username        varchar password        varchar nickname        varchar real_name        varchar email        varchar phone        varchar avatar        char sex        date birthday        bigint dept_id FK        bigint post_id FK        varchar address        varchar remark        tinyint status        datetime last_login_time        varchar last_login_ip        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_role &#123;        bigint id PK        varchar role_name        varchar role_code        varchar description        tinyint data_scope        int sort_order        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_menu &#123;        bigint id PK        varchar menu_name        varchar menu_code        bigint parent_id        tinyint menu_type        varchar path        varchar component        varchar icon        varchar permission        varchar target        tinyint is_cache        tinyint is_visible        tinyint is_external        int sort_order        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    %% æ—¥å¿—è¡¨    sys_login_log &#123;        bigint id PK        varchar username        bigint user_id FK        varchar ipaddr        varchar login_location        varchar browser        varchar os        varchar device        tinyint status        varchar message        datetime login_time    &#125;    sys_operation_log &#123;        bigint id PK        varchar title        tinyint business_type        varchar business_type_name        varchar method        varchar request_method        tinyint operator_type        varchar operator_name        varchar dept_name        varchar operation_url        varchar operation_ip        varchar operation_location        text operation_param        text json_result        tinyint operation_status        varchar error_msg        datetime operation_time        bigint cost_time    &#125;    sys_error_log &#123;        bigint id PK        varchar title        varchar request_uri        varchar request_method        text request_params        bigint user_id FK        varchar username        varchar user_ip        varchar user_agent        text exception_info        varchar exception_name        text stack_trace        int line_number        varchar class_name        varchar method_name        tinyint status        bigint process_user_id FK        varchar process_user_name        varchar process_remark        datetime process_time        datetime create_time    &#125;    %% ç³»ç»Ÿé…ç½®è¡¨    sys_tenant &#123;        bigint id PK        varchar tenant_name        varchar tenant_code        varchar contact_name        varchar contact_phone        varchar contact_email        varchar domain        bigint package_id FK        datetime expire_time        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_tenant_package &#123;        bigint id PK        varchar package_name        varchar package_code        varchar description        int max_users        int max_roles        int max_menus        bigint max_storage        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_tenant_config &#123;        bigint id PK        bigint tenant_id FK        varchar config_key        text config_value        tinyint config_type        varchar remark        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_dict_type &#123;        bigint id PK        varchar dict_name        varchar dict_type        varchar description        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_dict_data &#123;        bigint id PK        int dict_sort        varchar dict_label        varchar dict_value        varchar dict_type        varchar css_class        varchar list_class        tinyint is_default        tinyint status        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    sys_params &#123;        bigint id PK        varchar param_name        varchar param_key        text param_value        tinyint is_system        varchar remark        datetime create_at        bigint creator        datetime update_at        bigint updater        tinyint delete_flag        datetime delete_at        int version    &#125;    %% å…³è”è¡¨    sys_user_role &#123;        bigint id PK        bigint user_id FK        bigint role_id FK    &#125;    sys_role_menu &#123;        bigint id PK        bigint role_id FK        bigint menu_id FK    &#125;    sys_role_dept &#123;        bigint id PK        bigint role_id FK        bigint dept_id FK    &#125;</code></pre><h2 id="3-è¡¨å­—æ®µè¯¦ç»†è¯´æ˜"><a href="#3-è¡¨å­—æ®µè¯¦ç»†è¯´æ˜" class="headerlink" title="3. è¡¨å­—æ®µè¯¦ç»†è¯´æ˜"></a>3. è¡¨å­—æ®µè¯¦ç»†è¯´æ˜</h2><h3 id="3-1-éƒ¨é—¨è¡¨-sys-dept"><a href="#3-1-éƒ¨é—¨è¡¨-sys-dept" class="headerlink" title="3.1 éƒ¨é—¨è¡¨ (sys_dept)"></a>3.1 éƒ¨é—¨è¡¨ (sys_dept)</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>éƒ¨é—¨ID</td></tr><tr><td>dept_name</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>éƒ¨é—¨åç§°</td></tr><tr><td>dept_code</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>éƒ¨é—¨ç¼–ç </td></tr><tr><td>parent_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>0</td><td>çˆ¶éƒ¨é—¨ID</td></tr><tr><td>leader_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>è´Ÿè´£äººç”¨æˆ·ID</td></tr><tr><td>leader_phone</td><td>VARCHAR</td><td>20</td><td>YES</td><td>NULL</td><td>è´Ÿè´£äººè”ç³»ç”µè¯</td></tr><tr><td>leader_email</td><td>VARCHAR</td><td>100</td><td>YES</td><td>NULL</td><td>è´Ÿè´£äººé‚®ç®±</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>ç§Ÿæˆ·ID</td></tr></tbody></table><h3 id="3-2-å²—ä½è¡¨-sys-post"><a href="#3-2-å²—ä½è¡¨-sys-post" class="headerlink" title="3.2 å²—ä½è¡¨ (sys_post)"></a>3.2 å²—ä½è¡¨ (sys_post)</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>å²—ä½ID</td></tr><tr><td>post_name</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>å²—ä½åç§°</td></tr><tr><td>post_code</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>å²—ä½ç¼–ç </td></tr><tr><td>dept_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>æ‰€å±éƒ¨é—¨ID</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>ç§Ÿæˆ·ID</td></tr></tbody></table><h3 id="3-3-ç”¨æˆ·è¡¨-sys-user"><a href="#3-3-ç”¨æˆ·è¡¨-sys-user" class="headerlink" title="3.3 ç”¨æˆ·è¡¨ (sys_user)"></a>3.3 ç”¨æˆ·è¡¨ (sys_user)</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>ç”¨æˆ·ID</td></tr><tr><td>username</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>ç”¨æˆ·å</td></tr><tr><td>password</td><td>VARCHAR</td><td>100</td><td>NO</td><td>-</td><td>å¯†ç </td></tr><tr><td>nickname</td><td>VARCHAR</td><td>50</td><td>YES</td><td>NULL</td><td>æ˜µç§°</td></tr><tr><td>real_name</td><td>VARCHAR</td><td>50</td><td>YES</td><td>NULL</td><td>çœŸå®å§“å</td></tr><tr><td>email</td><td>VARCHAR</td><td>100</td><td>YES</td><td>NULL</td><td>é‚®ç®±</td></tr><tr><td>phone</td><td>VARCHAR</td><td>20</td><td>YES</td><td>NULL</td><td>æ‰‹æœºå·</td></tr><tr><td>avatar</td><td>VARCHAR</td><td>255</td><td>YES</td><td>NULL</td><td>å¤´åƒåœ°å€</td></tr><tr><td>sex</td><td>CHAR</td><td>1</td><td>YES</td><td>â€˜0â€™</td><td>æ€§åˆ«ï¼š0-æœªçŸ¥ï¼Œ1-ç”·ï¼Œ2-å¥³</td></tr><tr><td>birthday</td><td>DATE</td><td>-</td><td>YES</td><td>NULL</td><td>ç”Ÿæ—¥</td></tr><tr><td>dept_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>éƒ¨é—¨ID</td></tr><tr><td>post_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>å²—ä½ID</td></tr><tr><td>address</td><td>VARCHAR</td><td>200</td><td>YES</td><td>NULL</td><td>åœ°å€</td></tr><tr><td>remark</td><td>VARCHAR</td><td>500</td><td>YES</td><td>NULL</td><td>å¤‡æ³¨</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>last_login_time</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>æœ€åç™»å½•æ—¶é—´</td></tr><tr><td>last_login_ip</td><td>VARCHAR</td><td>50</td><td>YES</td><td>NULL</td><td>æœ€åç™»å½•IP</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>ç§Ÿæˆ·ID</td></tr></tbody></table><h3 id="3-4-è§’è‰²è¡¨-sys-role"><a href="#3-4-è§’è‰²è¡¨-sys-role" class="headerlink" title="3.4 è§’è‰²è¡¨ (sys_role)"></a>3.4 è§’è‰²è¡¨ (sys_role)</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>è§’è‰²ID</td></tr><tr><td>role_name</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>è§’è‰²åç§°</td></tr><tr><td>role_code</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>è§’è‰²ç¼–ç </td></tr><tr><td>remark</td><td>VARCHAR</td><td>200</td><td>YES</td><td>NULL</td><td>å¤‡æ³¨</td></tr><tr><td>data_scope</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>æ•°æ®æƒé™ï¼š1-å…¨éƒ¨ï¼Œ2-æœ¬éƒ¨é—¨ï¼Œ3-æœ¬éƒ¨é—¨åŠä¸‹çº§ï¼Œ4-è‡ªå®šä¹‰</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>ç§Ÿæˆ·ID</td></tr></tbody></table><h3 id="3-5-èœå•è¡¨-sys-menu"><a href="#3-5-èœå•è¡¨-sys-menu" class="headerlink" title="3.5 èœå•è¡¨ (sys_menu)"></a>3.5 èœå•è¡¨ (sys_menu)</h3><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>èœå•ID</td></tr><tr><td>menu_name</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>èœå•åç§°</td></tr><tr><td>menu_code</td><td>VARCHAR</td><td>100</td><td>NO</td><td>-</td><td>èœå•ç¼–ç &#x2F;æƒé™æ ‡è¯†</td></tr><tr><td>parent_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>0</td><td>çˆ¶èœå•ID</td></tr><tr><td>menu_type</td><td>TINYINT</td><td>-</td><td>NO</td><td>-</td><td>èœå•ç±»å‹ï¼š1-ç›®å½•ï¼Œ2-èœå•ï¼Œ3-æŒ‰é’®</td></tr><tr><td>path</td><td>VARCHAR</td><td>200</td><td>YES</td><td>NULL</td><td>è·¯ç”±è·¯å¾„</td></tr><tr><td>component</td><td>VARCHAR</td><td>200</td><td>YES</td><td>NULL</td><td>ç»„ä»¶è·¯å¾„</td></tr><tr><td>icon</td><td>VARCHAR</td><td>100</td><td>YES</td><td>NULL</td><td>å›¾æ ‡</td></tr><tr><td>permission</td><td>VARCHAR</td><td>100</td><td>YES</td><td>NULL</td><td>æƒé™æ ‡è¯†</td></tr><tr><td>target</td><td>VARCHAR</td><td>20</td><td>NO</td><td>â€˜_selfâ€™</td><td>æ‰“å¼€æ–¹å¼ï¼š_self-å½“å‰é¡µï¼Œ_blank-æ–°é¡µ</td></tr><tr><td>is_cache</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦ç¼“å­˜ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>is_visible</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>æ˜¯å¦æ˜¾ç¤ºï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>is_external</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦å¤–é“¾ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>ç§Ÿæˆ·ID</td></tr></tbody></table><h3 id="3-6-æ—¥å¿—è¡¨"><a href="#3-6-æ—¥å¿—è¡¨" class="headerlink" title="3.6 æ—¥å¿—è¡¨"></a>3.6 æ—¥å¿—è¡¨</h3><h4 id="3-6-1-ç™»å½•æ—¥å¿—è¡¨-sys-login-log"><a href="#3-6-1-ç™»å½•æ—¥å¿—è¡¨-sys-login-log" class="headerlink" title="3.6.1 ç™»å½•æ—¥å¿—è¡¨ (sys_login_log)"></a>3.6.1 ç™»å½•æ—¥å¿—è¡¨ (sys_login_log)</h4><p>| å­—æ®µå | ç±»å‹ | é•¿åº¦ | å…è®¸ç©º | é»˜è®¤å€¼ | è¯´æ˜ |<br>| â€” | â€” | â€” | â€” | â€” |<br>| id | BIGINT | - | NO | AUTO_INCREMENT | æ—¥å¿—ID |<br>| user_id | BIGINT | - | YES | NULL | ç”¨æˆ·ID |<br>| username | VARCHAR | 50 | NO | - | ç”¨æˆ·å |<br>| ipaddr | VARCHAR | 50 | NO | - | ç™»å½•IPåœ°å€ |<br>| login_location | VARCHAR | 255 | YES | NULL | ç™»å½•åœ°ç‚¹ |<br>| browser | VARCHAR | 50 | YES | NULL | æµè§ˆå™¨ç±»å‹ |<br>| os | VARCHAR | 50 | YES | NULL | æ“ä½œç³»ç»Ÿ |<br>| status | TINYINT | - | NO | 0 | ç™»å½•çŠ¶æ€ï¼š0-å¤±è´¥ï¼Œ1-æˆåŠŸ |<br>| msg | VARCHAR | 255 | YES | NULL | æç¤ºä¿¡æ¯ |<br>| login_time | DATETIME | - | NO | CURRENT_TIMESTAMP | ç™»å½•æ—¶é—´ |<br>| create_at | DATETIME | - | NO | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |</p><h4 id="3-6-2-æ“ä½œæ—¥å¿—è¡¨-sys-operation-log"><a href="#3-6-2-æ“ä½œæ—¥å¿—è¡¨-sys-operation-log" class="headerlink" title="3.6.2 æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)"></a>3.6.2 æ“ä½œæ—¥å¿—è¡¨ (sys_operation_log)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>æ—¥å¿—ID</td></tr><tr><td>user_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ“ä½œç”¨æˆ·ID</td></tr><tr><td>username</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>æ“ä½œç”¨æˆ·å</td></tr><tr><td>business_type</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>ä¸šåŠ¡ç±»å‹ï¼ˆ0-å…¶ä»– 1-æ–°å¢ 2-ä¿®æ”¹ 3-åˆ é™¤ï¼‰</td></tr><tr><td>method</td><td>VARCHAR</td><td>10</td><td>NO</td><td>-</td><td>è¯·æ±‚æ–¹å¼</td></tr><tr><td>request_method</td><td>VARCHAR</td><td>10</td><td>NO</td><td>-</td><td>è¯·æ±‚ç±»å‹</td></tr><tr><td>operator_type</td><td>TINYINT</td><td>NO</td><td>-</td><td>0</td><td>æ“ä½œç±»åˆ«ï¼ˆ0-å…¶å®ƒ 1-åå°ç”¨æˆ· 2-æ‰‹æœºç«¯ç”¨æˆ·ï¼‰</td></tr><tr><td>oper_name</td><td>VARCHAR</td><td>50</td><td>YES</td><td>NULL</td><td>æ“ä½œäººå‘˜</td></tr><tr><td>dept_name</td><td>VARCHAR</td><td>50</td><td>YES</td><td>NULL</td><td>éƒ¨é—¨åç§°</td></tr><tr><td>oper_url</td><td>VARCHAR</td><td>255</td><td>YES</td><td>NULL</td><td>è¯·æ±‚URL</td></tr><tr><td>oper_ip</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>æ“ä½œåœ°å€</td></tr><tr><td>oper_location</td><td>VARCHAR</td><td>255</td><td>YES</td><td>NULL</td><td>æ“ä½œåœ°ç‚¹</td></tr><tr><td>oper_param</td><td>TEXT</td><td>-</td><td>YES</td><td>NULL</td><td>è¯·æ±‚å‚æ•°</td></tr><tr><td>json_result</td><td>TEXT</td><td>-</td><td>YES</td><td>NULL</td><td>è¿”å›å‚æ•°</td></tr><tr><td>status</td><td>TINYINT</td><td>NO</td><td>NO</td><td>0</td><td>æ“ä½œçŠ¶æ€ï¼š0-æ­£å¸¸ï¼Œ1-å¼‚å¸¸</td></tr><tr><td>error_msg</td><td>VARCHAR</td><td>2000</td><td>YES</td><td>NULL</td><td>é”™è¯¯æ¶ˆæ¯</td></tr><tr><td>oper_time</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>æ“ä½œæ—¶é—´</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr></tbody></table><h4 id="3-3-3-é”™è¯¯æ—¥å¿—è¡¨-sys-error-log"><a href="#3-3-3-é”™è¯¯æ—¥å¿—è¡¨-sys-error-log" class="headerlink" title="3.3.3 é”™è¯¯æ—¥å¿—è¡¨ (sys_error_log)"></a>3.3.3 é”™è¯¯æ—¥å¿—è¡¨ (sys_error_log)</h4><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>æ—¥å¿—ID</td></tr><tr><td>user_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>ç”¨æˆ·ID</td></tr><tr><td>username</td><td>VARCHAR</td><td>50</td><td>YES</td><td>NULL</td><td>ç”¨æˆ·å</td></tr><tr><td>request_url</td><td>VARCHAR</td><td>255</td><td>NO</td><td>-</td><td>è¯·æ±‚URL</td></tr><tr><td>method</td><td>VARCHAR</td><td>10</td><td>NO</td><td>-</td><td>è¯·æ±‚æ–¹å¼</td></tr><tr><td>params</td><td>TEXT</td><td>-</td><td>YES</td><td>NULL</td><td>è¯·æ±‚å‚æ•°</td></tr><tr><td>error_message</td><td>TEXT</td><td>NO</td><td>-</td><td>é”™è¯¯æ¶ˆæ¯</td><td></td></tr><tr><td>error_stack</td><td>TEXT</td><td>-</td><td>YES</td><td>NULL</td><td>é”™è¯¯å †æ ˆ</td></tr><tr><td>line_number</td><td>INT</td><td>-</td><td>YES</td><td>NULL</td><td>é”™è¯¯è¡Œå·</td></tr><tr><td>class_name</td><td>VARCHAR</td><td>200</td><td>YES</td><td>NULL</td><td>Javaç±»å</td></tr><tr><td>method_name</td><td>VARCHAR</td><td>200</td><td>YES</td><td>NULL</td><td>æ–¹æ³•å</td></tr><tr><td>user_agent</td><td>VARCHAR</td><td>500</td><td>YES</td><td>NULL</td><td>ç”¨æˆ·ä»£ç†</td></tr><tr><td>ip</td><td>VARCHAR</td><td>128</td><td>YES</td><td>NULL</td><td>æ“ä½œIPåœ°å€</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>çŠ¶æ€</td></tr><tr><td>error_time</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>é”™è¯¯æ—¶é—´</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr></tbody></table><h3 id="3-7-ç³»ç»Ÿé…ç½®è¡¨"><a href="#3-7-ç³»ç»Ÿé…ç½®è¡¨" class="headerlink" title="3.7 ç³»ç»Ÿé…ç½®è¡¨"></a>3.7 ç³»ç»Ÿé…ç½®è¡¨</h3><h4 id="3-7-1-ç§Ÿæˆ·è¡¨-sys-tenant"><a href="#3-7-1-ç§Ÿæˆ·è¡¨-sys-tenant" class="headerlink" title="3.7.1 ç§Ÿæˆ·è¡¨ (sys_tenant)"></a>3.7.1 ç§Ÿæˆ·è¡¨ (sys_tenant)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>ç§Ÿæˆ·ID</td></tr><tr><td>tenant_name</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>ç§Ÿæˆ·åç§°</td></tr><tr><td>tenant_code</td><td>VARCHAR(20)</td><td>NO</td><td>-</td><td>ç§Ÿæˆ·ç¼–ç </td><td></td></tr><tr><td>contact_name</td><td>VARCHAR(30)</td><td>NO</td><td>-</td><td>è”ç³»äºº</td><td></td></tr><tr><td>contact_phone</td><td>VARCHAR(20)</td><td>YES</td><td>NULL</td><td>è”ç³»ç”µè¯</td><td></td></tr><tr><td>contact_email</td><td>VARCHAR(50)</td><td>YES</td><td>NULL</td><td>è”ç³»é‚®ç®±</td><td></td></tr><tr><td>company_name</td><td>VARCHAR(100)</td><td>YES</td><td>NULL</td><td>ä¼ä¸šåç§°</td><td></td></tr><tr><td>domain</td><td>VARCHAR(100)</td><td>YES</td><td>NULL</td><td>åŸŸå</td><td></td></tr><tr><td>address</td><td>VARCHAR(200)</td><td>YES</td><td>NULL</td><td>åœ°å€</td><td></td></tr><tr><td>phone</td><td>VARCHAR(20)</td><td>YES</td><td>NULL</td><td>ç”µè¯</td><td></td></tr><tr><td>email</td><td>VARCHAR(100)</td><td>YES</td><td>NULL</td><td>é‚®ç®±</td><td></td></tr><tr><td>package_id</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>å¥—é¤ID</td></tr><tr><td>expire_time</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ°æœŸæ—¶é—´</td></tr><tr><td>account_count</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>è´¦å·æ•°é‡</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr></tbody></table><h4 id="3-7-2-ç§Ÿæˆ·å¥—é¤è¡¨-sys-tenant-package"><a href="#3-7-2-ç§Ÿæˆ·å¥—é¤è¡¨-sys-tenant-package" class="headerlink" title="3.7.2 ç§Ÿæˆ·å¥—é¤è¡¨ (sys_tenant_package)"></a>3.7.2 ç§Ÿæˆ·å¥—é¤è¡¨ (sys_tenant_package)</h4><table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>å¥—é¤ID</td></tr><tr><td>package_name</td><td>VARCHAR</td><td>50</td><td>NO</td><td>-</td><td>å¥—é¤åç§°</td></tr><tr><td>package_code</td><td>VARCHAR(20)</td><td>NO</td><td>-</td><td>å¥—é¤ç¼–ç </td><td></td></tr><tr><td>max_users</td><td>INT</td><td>-</td><td>NO</td><td>10</td><td>æœ€å¤§ç”¨æˆ·æ•°</td></tr><tr><td>max_storage</td><td>BIGINT</td><td>-</td><td>NO</td><td>1073741824</td><td>æœ€å¤§å­˜å‚¨ç©ºé—´ï¼ˆå­—èŠ‚ï¼‰</td></tr><tr><td>price</td><td>DECIMAL</td><td>10,2</td><td>-</td><td>NO</td><td>0.00</td></tr><tr><td>cycle_unit</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>è®¡è´¹å‘¨æœŸï¼š1-æœˆï¼Œ2-å­£ï¼Œ3-å¹´</td></tr><tr><td>features</td><td>TEXT</td><td>-</td><td>YES</td><td>NULL</td><td>åŠŸèƒ½ç‰¹æ€§ï¼ˆJSONæ ¼å¼ï¼‰</td></tr><tr><td>description</td><td>VARCHAR(500)</td><td>YES</td><td>NULL</td><td>å¥—é¤æè¿°</td><td></td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-æ­£å¸¸</td></tr><tr><td>sort_order</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr></tbody></table><h4 id="3-7-3-ç§Ÿæˆ·é…ç½®è¡¨-sys-tenant-config"><a href="#3-7-3-ç§Ÿæˆ·é…ç½®è¡¨-sys-tenant-config" class="headerlink" title="3.7.3 ç§Ÿæˆ·é…ç½®è¡¨ (sys_tenant_config)"></a>3.7.3 ç§Ÿæˆ·é…ç½®è¡¨ (sys_tenant_config)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é‚®é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>é…ç½®ID</td></tr><tr><td>tenant_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>ç§Ÿæˆ·ID</td></tr><tr><td>config_key</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>é…ç½®é”®</td><td></td></tr><tr><td>config_value</td><td>TEXT</td><td>-</td><td>YES</td><td>NULL</td><td>é…ç½®å€¼</td></tr><tr><td>config_type</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>ç³»ç»Ÿå†…ç½®ï¼ˆ0-å¦ 1-æ˜¯ï¼‰</td></tr><tr><td>is_encrypted</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åŠ å¯†ï¼ˆ0-å¦ 1-æ˜¯ï¼‰</td></tr><tr><td>remark</td><td>VARCHAR(500)</td><td>YES</td><td>NULL</td><td>å¤‡æ³¨</td><td></td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr></tbody></table><h4 id="3-7-4-å­—å…¸ç±»å‹è¡¨-sys-dict-type"><a href="#3-7-4-å­—å…¸ç±»å‹è¡¨-sys-dict-type" class="headerlink" title="3.7.4 å­—å…¸ç±»å‹è¡¨ (sys_dict_type)"></a>3.7.4 å­—å…¸ç±»å‹è¡¨ (sys_dict_type)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>å­—å…¸ä¸»é”®</td></tr><tr><td>dict_name</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>å­—å…¸åç§°</td><td></td></tr><tr><td>dict_type</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>å­—å…¸ç±»å‹</td><td></td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäºº</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äºº</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>remark</td><td>VARCHAR(500)</td><td>YES</td><td>NULL</td><td>å¤‡æ³¨</td><td></td></tr></tbody></table><h4 id="3-7-5-å­—å…¸æ•°æ®è¡¨-sys-dict-data"><a href="#3-7-5-å­—å…¸æ•°æ®è¡¨-sys-dict-data" class="headerlink" title="3.7.5 å­—å…¸æ•°æ®è¡¨ (sys_dict_data)"></a>3.7.5 å­—å…¸æ•°æ®è¡¨ (sys_dict_data)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>æ•°æ®ç¼–å·</td></tr><tr><td>dict_sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>å­—å…¸æ’åº</td></tr><tr><td>dict_label</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>å­—å…¸æ ‡ç­¾</td><td></td></tr><tr><td>dict_value</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>å­—å…¸é”®å€¼</td><td></td></tr><tr><td>dict_type</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>å­—å…¸ç±»å‹</td><td></td></tr><tr><td>css_class</td><td>VARCHAR(100</td><td>YES</td><td>NULL</td><td>è¡¨æ ¼å›æ˜¾æ ·å¼</td><td></td></tr><tr><td>list_class</td><td>VARCHAR(100)</td><td>YES</td><td>NULL</td><td>è¡¨æ ¼åˆ—è¡¨æ ·å¼</td><td></td></tr><tr><td>is_default</td><td>TINYINT</td><td>-</td><td>NO</td><td>N</td><td>æ˜¯å¦é»˜è®¤ï¼ˆYæ˜¯ Nå¦ï¼‰</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰</td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäºº</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äºº</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr><tr><td>remark</td><td>VARCHAR(500)</td><td>YES</td><td>NULL</td><td>å¤‡æ³¨</td><td></td></tr></tbody></table><h4 id="3-7-6-å‚æ•°è¡¨-sys-params"><a href="#3-7-6-å‚æ•°è¡¨-sys-params" class="headerlink" title="3.7.6 å‚æ•°è¡¨ (sys_params)"></a>3.7.6 å‚æ•°è¡¨ (sys_params)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>å‚æ•°ID</td></tr><tr><td>param_name</td><td>VARCHAR(100)</td><td>NO</td><td>-</td><td>å‚æ•°åç§°</td><td></td></tr><tr><td>param_key</td><td>VARCHAR(100) NO</td><td>-</td><td>å‚æ•°é”®å</td><td></td><td></td></tr><tr><td>param_value</td><td>VARCHAR(500)</td><td>YES</td><td>NULL</td><td>å‚æ•°é”®å€¼</td><td></td></tr><tr><td>param_type</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>ç³»ç»Ÿå†…ç½®ï¼ˆ0-å¦ 1-æ˜¯ï¼‰</td></tr><tr><td>is_encrypted</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åŠ å¯†ï¼ˆ0-å¦ 1-æ˜¯ï¼‰</td></tr><tr><td>sort</td><td>INT</td><td>-</td><td>NO</td><td>0</td><td>æ’åº</td></tr><tr><td>status</td><td>TINYINT</td><td>-</td><td>NO</td><td>1</td><td>çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰</td></tr><tr><td>remark</td><td>VARCHAR(500)</td><td>YES</td><td>NULL</td><td>å¤‡æ³¨</td><td></td></tr><tr><td>create_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP</td><td>åˆ›å»ºæ—¶é—´</td></tr><tr><td>creator</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ›å»ºäººID</td></tr><tr><td>update_at</td><td>DATETIME</td><td>-</td><td>NO</td><td>CURRENT_TIMESTAMP ON UPDATE</td><td>æ›´æ–°æ—¶é—´</td></tr><tr><td>updater</td><td>BIGINT</td><td>-</td><td>YES</td><td>NULL</td><td>æ›´æ–°äººID</td></tr><tr><td>delete_flag</td><td>TINYINT</td><td>-</td><td>NO</td><td>0</td><td>æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯</td></tr><tr><td>delete_at</td><td>DATETIME</td><td>-</td><td>YES</td><td>NULL</td><td>åˆ é™¤æ—¶é—´</td></tr><tr><td>version</td><td>INT</td><td>-</td><td>NO</td><td>1</td><td>ä¹è§‚é”ç‰ˆæœ¬å·</td></tr></tbody></table><h3 id="3-8-å…³è”è¡¨"><a href="#3-8-å…³è”è¡¨" class="headerlink" title="3.8 å…³è”è¡¨"></a>3.8 å…³è”è¡¨</h3><h4 id="3-8-1-ç”¨æˆ·è§’è‰²å…³è”è¡¨-sys-user-role"><a href="#3-8-1-ç”¨æˆ·è§’è‰²å…³è”è¡¨-sys-user-role" class="headerlink" title="3.8.1 ç”¨æˆ·è§’è‰²å…³è”è¡¨ (sys_user_role)"></a>3.8.1 ç”¨æˆ·è§’è‰²å…³è”è¡¨ (sys_user_role)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>ä¸»é”®ID</td></tr><tr><td>user_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>ç”¨æˆ·ID</td></tr><tr><td>role_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>è§’è‰²ID</td></tr></tbody></table><h4 id="3-8-2-è§’è‰²èœå•å…³è”è¡¨-sys-role-menu"><a href="#3-8-2-è§’è‰²èœå•å…³è”è¡¨-sys-role-menu" class="headerlink" title="3.8.2 è§’è‰²èœå•å…³è”è¡¨ (sys_role_menu)"></a>3.8.2 è§’è‰²èœå•å…³è”è¡¨ (sys_role_menu)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>ä¸»é”®ID</td></tr><tr><td>role_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>è§’è‰²ID</td></tr><tr><td>menu_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>èœå•ID</td></tr></tbody></table><h4 id="3-8-3-è§’è‰²éƒ¨é—¨å…³è”è¡¨-sys-role-dept"><a href="#3-8-3-è§’è‰²éƒ¨é—¨å…³è”è¡¨-sys-role-dept" class="headerlink" title="3.8.3 è§’è‰²éƒ¨é—¨å…³è”è¡¨ (sys_role_dept)"></a>3.8.3 è§’è‰²éƒ¨é—¨å…³è”è¡¨ (sys_role_dept)</h4><table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>é•¿åº¦</th><th>å…è®¸ç©º</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>id</td><td>BIGINT</td><td>-</td><td>NO</td><td>AUTO_INCREMENT</td><td>ä¸»é”®ID</td></tr><tr><td>role_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>è§’è‰²ID</td></tr><tr><td>dept_id</td><td>BIGINT</td><td>-</td><td>NO</td><td>-</td><td>éƒ¨é—¨ID</td></tr></tbody></table><h2 id="4-ç´¢å¼•è®¾è®¡"><a href="#4-ç´¢å¼•è®¾è®¡" class="headerlink" title="4. ç´¢å¼•è®¾è®¡"></a>4. ç´¢å¼•è®¾è®¡</h2><h3 id="4-1-ä¸»é”®ç´¢å¼•"><a href="#4-1-ä¸»é”®ç´¢å¼•" class="headerlink" title="4.1 ä¸»é”®ç´¢å¼•"></a>4.1 ä¸»é”®ç´¢å¼•</h3><p>æ‰€æœ‰è¡¨çš„ <code>id</code> å­—æ®µè‡ªåŠ¨åˆ›å»ºä¸»é”®ç´¢å¼•ï¼ˆPRIMARY KEYï¼‰ã€‚</p><h3 id="4-2-å”¯ä¸€ç´¢å¼•"><a href="#4-2-å”¯ä¸€ç´¢å¼•" class="headerlink" title="4.2 å”¯ä¸€ç´¢å¼•"></a>4.2 å”¯ä¸€ç´¢å¼•</h3><table><thead><tr><th>è¡¨å</th><th>ç´¢å¼•å</th><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sys_user</td><td>uk_username</td><td>username</td><td>ç”¨æˆ·åå”¯ä¸€</td></tr><tr><td>sys_user</td><td>uk_email</td><td>email</td><td>é‚®ç®±å”¯ä¸€</td></tr><tr><td>sys_user</td><td>uk_phone</td><td>phone</td><td>æ‰‹æœºå·å”¯ä¸€</td></tr><tr><td>sys_role</td><td>uk_role_code</td><td>role_code</td><td>è§’è‰²ç¼–ç å”¯ä¸€</td></tr><tr><td>sys_dept</td><td>uk_dept_code</td><td>dept_code</td><td>éƒ¨é—¨ç¼–ç å”¯ä¸€</td></tr><tr><td>sys_post</td><td>uk_post_code</td><td>post_code</td><td>å²—ä½ç¼–ç å”¯ä¸€</td></tr><tr><td>sys_menu</td><td>uk_menu_code</td><td>menu_code</td><td>èœå•ç¼–ç å”¯ä¸€</td></tr><tr><td>sys_tenant</td><td>uk_tenant_code</td><td>tenant_code</td><td>ç§Ÿæˆ·ç¼–ç å”¯ä¸€</td></tr><tr><td>sys_dict_type</td><td>uk_dict_type</td><td>dict_type</td><td>å­—å…¸ç±»å‹å”¯ä¸€</td></tr></tbody></table><h3 id="4-3-æ™®é€šç´¢å¼•"><a href="#4-3-æ™®é€šç´¢å¼•" class="headerlink" title="4.3 æ™®é€šç´¢å¼•"></a>4.3 æ™®é€šç´¢å¼•</h3><table><thead><tr><th>è¡¨å</th><th>ç´¢å¼•å</th><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sys_user</td><td>idx_dept_id</td><td>dept_id</td><td>éƒ¨é—¨æŸ¥è¯¢</td></tr><tr><td>sys_user</td><td>idx_post_id</td><td>post_id</td><td>å²—ä½æŸ¥è¯¢</td></tr><tr><td>sys_user</td><td>idx_status</td><td>status</td><td>çŠ¶æ€ç­›é€‰</td></tr><tr><td>sys_user</td><td>idx_tenant_id</td><td>tenant_id</td><td>ç§Ÿæˆ·éš”ç¦»</td></tr><tr><td>sys_role</td><td>idx_status</td><td>status</td><td>çŠ¶æ€ç­›é€‰</td></tr><tr><td>sys_role</td><td>idx_data_scope</td><td>data_scope</td><td>æ•°æ®æƒé™æŸ¥è¯¢</td></tr><tr><td>sys_menu</td><td>idx_parent_id</td><td>parent_id</td><td>çˆ¶èœå•æŸ¥è¯¢</td></tr><tr><td>sys_menu</td><td>idx_menu_type</td><td>menu_type</td><td>èœå•ç±»å‹ç­›é€‰</td></tr><tr><td>sys_dept</td><td>idx_parent_id</td><td>parent_id</td><td>çˆ¶éƒ¨é—¨æŸ¥è¯¢</td></tr><tr><td>sys_dept</td><td>idx_status</td><td>status</td><td>çŠ¶æ€ç­›é€‰</td></tr><tr><td>sys_post</td><td>idx_dept_id</td><td>dept_id</td><td>éƒ¨é—¨å²—ä½æŸ¥è¯¢</td></tr><tr><td>sys_tenant</td><td>idx_package_id</td><td>package_id</td><td>å¥—é¤æŸ¥è¯¢</td></tr></tbody></table><h3 id="4-4-å¤åˆç´¢å¼•"><a href="#4-4-å¤åˆç´¢å¼•" class="headerlink" title="4.4 å¤åˆç´¢å¼•"></a>4.4 å¤åˆç´¢å¼•</h3><table><thead><tr><th>è¡¨å</th><th>ç´¢å¼•å</th><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sys_user_role</td><td>idx_user_role</td><td>user_id, role_id</td><td>ç”¨æˆ·è§’è‰²æŸ¥è¯¢</td></tr><tr><td>sys_role_menu</td><td>idx_role_menu</td><td>role_id, menu_id</td><td>è§’è‰²èœå•æŸ¥è¯¢</td></tr><tr><td>sys_role_dept</td><td>idx_role_dept</td><td>role_id, dept_id</td><td>è§’è‰²éƒ¨é—¨æŸ¥è¯¢</td></tr><tr><td>sys_dict_data</td><td>idx_dict_type_status</td><td>dict_type, status</td><td>å­—å…¸æ•°æ®æŸ¥è¯¢</td></tr><tr><td>sys_login_log</td><td>idx_user_time</td><td>user_id, login_time</td><td>ç”¨æˆ·ç™»å½•è®°å½•</td></tr><tr><td>sys_operation_log</td><td>idx_user_time</td><td>user_id, operation_time</td><td>ç”¨æˆ·æ“ä½œè®°å½•</td></tr><tr><td>sys_tenant_config</td><td>idx_tenant_key</td><td>tenant_id, config_key</td><td>ç§Ÿæˆ·é…ç½®æŸ¥è¯¢</td></tr></tbody></table><h3 id="4-5-æ—¥å¿—è¡¨ç´¢å¼•"><a href="#4-5-æ—¥å¿—è¡¨ç´¢å¼•" class="headerlink" title="4.5 æ—¥å¿—è¡¨ç´¢å¼•"></a>4.5 æ—¥å¿—è¡¨ç´¢å¼•</h3><table><thead><tr><th>è¡¨å</th><th>ç´¢å¼•å</th><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sys_login_log</td><td>idx_login_time</td><td>login_time</td><td>æŒ‰ç™»å½•æ—¶é—´æŸ¥è¯¢</td></tr><tr><td>sys_login_log</td><td>idx_username_time</td><td>username, login_time</td><td>ç”¨æˆ·ç™»å½•å†å²</td></tr><tr><td>sys_operation_log</td><td>idx_operation_time</td><td>operation_time</td><td>æŒ‰æ“ä½œæ—¶é—´æŸ¥è¯¢</td></tr><tr><td>sys_operation_log</td><td>idx_business_type</td><td>business_type</td><td>æŒ‰ä¸šåŠ¡ç±»å‹æŸ¥è¯¢</td></tr><tr><td>sys_error_log</td><td>idx_create_time</td><td>create_time</td><td>æŒ‰åˆ›å»ºæ—¶é—´æŸ¥è¯¢</td></tr><tr><td>sys_error_log</td><td>idx_status</td><td>status</td><td>æŒ‰å¤„ç†çŠ¶æ€æŸ¥è¯¢</td></tr></tbody></table><h3 id="4-6-è½¯åˆ é™¤ç´¢å¼•"><a href="#4-6-è½¯åˆ é™¤ç´¢å¼•" class="headerlink" title="4.6 è½¯åˆ é™¤ç´¢å¼•"></a>4.6 è½¯åˆ é™¤ç´¢å¼•</h3><table><thead><tr><th>è¡¨å</th><th>ç´¢å¼•å</th><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>sys_user</td><td>idx_delete_flag</td><td>delete_flag</td><td>è½¯åˆ é™¤ç­›é€‰</td></tr><tr><td>sys_role</td><td>idx_delete_flag</td><td>delete_flag</td><td>è½¯åˆ é™¤ç­›é€‰</td></tr><tr><td>sys_menu</td><td>idx_delete_flag</td><td>delete_flag</td><td>è½¯åˆ é™¤ç­›é€‰</td></tr><tr><td>sys_dept</td><td>idx_delete_flag</td><td>delete_flag</td><td>è½¯åˆ é™¤ç­›é€‰</td></tr><tr><td>sys_post</td><td>idx_delete_flag</td><td>delete_flag</td><td>è½¯åˆ é™¤ç­›é€‰</td></tr><tr><td>sys_tenant</td><td>idx_delete_flag</td><td>delete_flag</td><td>è½¯åˆ é™¤ç­›é€‰</td></tr></tbody></table><h2 id="5-å®‰å…¨è®¾è®¡"><a href="#5-å®‰å…¨è®¾è®¡" class="headerlink" title="5. å®‰å…¨è®¾è®¡"></a>5. å®‰å…¨è®¾è®¡</h2><h3 id="5-1-å¯†ç å®‰å…¨"><a href="#5-1-å¯†ç å®‰å…¨" class="headerlink" title="5.1 å¯†ç å®‰å…¨"></a>5.1 å¯†ç å®‰å…¨</h3><ul><li>ç”¨æˆ·å¯†ç å¿…é¡»ç»è¿‡ <strong>bcrypt</strong> æˆ– <strong>PBKDF2</strong> ç®—æ³•åŠ å¯†å­˜å‚¨</li><li>å¯†ç å­—æ®µé•¿åº¦è‡³å°‘ 255 å­—ç¬¦ï¼Œä»¥æ”¯æŒåŠ å¯†åçš„å­—ç¬¦ä¸²</li><li>å¼ºåˆ¶å¯†ç ç­–ç•¥ï¼šæœ€å°‘ 8 ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦</li></ul><h3 id="5-2-æ•°æ®è„±æ•"><a href="#5-2-æ•°æ®è„±æ•" class="headerlink" title="5.2 æ•°æ®è„±æ•"></a>5.2 æ•°æ®è„±æ•</h3><ul><li>æ‰‹æœºå·ï¼šæ˜¾ç¤ºå‰ 3 ä½å’Œå 4 ä½ï¼Œä¸­é—´ç”¨ * æ›¿ä»£ï¼ˆå¦‚ï¼š138****1234ï¼‰</li><li>é‚®ç®±ï¼šæ˜¾ç¤ºå‰ 3 ä½å’Œ @ ä»¥åçš„å†…å®¹ï¼ˆå¦‚ï¼šzha***@example.comï¼‰</li><li>èº«ä»½è¯å·ï¼šæ˜¾ç¤ºå‰ 6 ä½å’Œå 4 ä½</li><li>é“¶è¡Œå¡å·ï¼šæ˜¾ç¤ºå‰ 6 ä½å’Œå 4 ä½</li></ul><h3 id="5-3-æ•°æ®æƒé™æ§åˆ¶"><a href="#5-3-æ•°æ®æƒé™æ§åˆ¶" class="headerlink" title="5.3 æ•°æ®æƒé™æ§åˆ¶"></a>5.3 æ•°æ®æƒé™æ§åˆ¶</h3><ul><li>ç§Ÿæˆ·éš”ç¦»ï¼šæ‰€æœ‰æŸ¥è¯¢å¿…é¡»å¸¦ <code>tenant_id</code> æ¡ä»¶</li><li>éƒ¨é—¨æ•°æ®æƒé™ï¼šæ ¹æ®è§’è‰²çš„ <code>data_scope</code> æ§åˆ¶æ•°æ®å¯è§èŒƒå›´</li><li>è¡Œçº§æƒé™ï¼šé‡è¦ä¸šåŠ¡è¡¨å¯æ‰©å±• <code>dept_id</code> å­—æ®µå®ç°è¡Œçº§æƒé™</li></ul><h3 id="5-4-å®¡è®¡æ—¥å¿—"><a href="#5-4-å®¡è®¡æ—¥å¿—" class="headerlink" title="5.4 å®¡è®¡æ—¥å¿—"></a>5.4 å®¡è®¡æ—¥å¿—</h3><ul><li>å…³é”®æ“ä½œå¿…é¡»è®°å½•æ“ä½œæ—¥å¿—ï¼ˆå¢åˆ æ”¹ï¼‰</li><li>ç™»å½•è¡Œä¸ºå¿…é¡»è®°å½•ç™»å½•æ—¥å¿—</li><li>ç³»ç»Ÿå¼‚å¸¸å¿…é¡»è®°å½•é”™è¯¯æ—¥å¿—</li><li>æ—¥å¿—åŒ…å«æ“ä½œäººã€æ“ä½œæ—¶é—´ã€æ“ä½œå†…å®¹ã€IP åœ°å€ç­‰ä¿¡æ¯</li></ul><h2 id="6-æ€§èƒ½ä¼˜åŒ–å»ºè®®"><a href="#6-æ€§èƒ½ä¼˜åŒ–å»ºè®®" class="headerlink" title="6. æ€§èƒ½ä¼˜åŒ–å»ºè®®"></a>6. æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2><h3 id="6-1-åˆ†åŒºç­–ç•¥"><a href="#6-1-åˆ†åŒºç­–ç•¥" class="headerlink" title="6.1 åˆ†åŒºç­–ç•¥"></a>6.1 åˆ†åŒºç­–ç•¥</h3><p>å¯¹æ•°æ®é‡å¤§çš„è¡¨å»ºè®®æŒ‰æ—¶é—´åˆ†åŒºï¼š</p><table><thead><tr><th>è¡¨å</th><th>åˆ†åŒºç­–ç•¥</th><th>åˆ†åŒºå­—æ®µ</th><th>åˆ†åŒºé—´éš”</th></tr></thead><tbody><tr><td>sys_login_log</td><td>RANGE</td><td>login_time</td><td>æŒ‰æœˆåˆ†åŒº</td></tr><tr><td>sys_operation_log</td><td>RANGE</td><td>operation_time</td><td>æŒ‰æœˆåˆ†åŒº</td></tr><tr><td>sys_error_log</td><td>RANGE</td><td>create_time</td><td>æŒ‰æœˆåˆ†åŒº</td></tr></tbody></table><h3 id="6-2-æŸ¥è¯¢ä¼˜åŒ–"><a href="#6-2-æŸ¥è¯¢ä¼˜åŒ–" class="headerlink" title="6.2 æŸ¥è¯¢ä¼˜åŒ–"></a>6.2 æŸ¥è¯¢ä¼˜åŒ–</h3><ul><li>ä½¿ç”¨è¦†ç›–ç´¢å¼•å‡å°‘å›è¡¨æŸ¥è¯¢</li><li>é¿å… SELECT *ï¼ŒåªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ</li><li>åˆç†ä½¿ç”¨ JOINï¼Œé¿å…å¤§è¡¨å…³è”</li><li>åˆ†é¡µæŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–</li></ul><h3 id="6-3-è¯»å†™åˆ†ç¦»"><a href="#6-3-è¯»å†™åˆ†ç¦»" class="headerlink" title="6.3 è¯»å†™åˆ†ç¦»"></a>6.3 è¯»å†™åˆ†ç¦»</h3><ul><li>æ—¥å¿—ç±»è¡¨å¯ä»¥è€ƒè™‘è¯»å†™åˆ†ç¦»</li><li>æŠ¥è¡¨æŸ¥è¯¢å¯ä»¥è€ƒè™‘åªè¯»ä»åº“</li><li>ä¸»åº“è´Ÿè´£å†™æ“ä½œï¼Œä»åº“è´Ÿè´£è¯»æ“ä½œ</li></ul><h3 id="6-4-ç¼“å­˜ç­–ç•¥"><a href="#6-4-ç¼“å­˜ç­–ç•¥" class="headerlink" title="6.4 ç¼“å­˜ç­–ç•¥"></a>6.4 ç¼“å­˜ç­–ç•¥</h3><ul><li>ç”¨æˆ·è§’è‰²æƒé™ä¿¡æ¯ç¼“å­˜ï¼ˆRedisï¼‰</li><li>å­—å…¸æ•°æ®ç¼“å­˜</li><li>èœå•æ ‘ç»“æ„ç¼“å­˜</li><li>éƒ¨é—¨æ ‘ç»“æ„ç¼“å­˜</li></ul><h2 id="7-æ•°æ®å­—å…¸"><a href="#7-æ•°æ®å­—å…¸" class="headerlink" title="7. æ•°æ®å­—å…¸"></a>7. æ•°æ®å­—å…¸</h2><h3 id="7-1-é€šç”¨çŠ¶æ€å€¼"><a href="#7-1-é€šç”¨çŠ¶æ€å€¼" class="headerlink" title="7.1 é€šç”¨çŠ¶æ€å€¼"></a>7.1 é€šç”¨çŠ¶æ€å€¼</h3><ul><li><strong>status</strong>: 0-ç¦ç”¨&#x2F;å¤±è´¥ï¼Œ1-æ­£å¸¸&#x2F;æˆåŠŸ</li><li><strong>delete_flag</strong>: 0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤</li><li><strong>is_default</strong>: 0-å¦ï¼Œ1-æ˜¯</li><li><strong>is_system</strong>: 0-å¦ï¼Œ1-æ˜¯</li></ul><h3 id="7-2-ç”¨æˆ·æ€§åˆ«-sex"><a href="#7-2-ç”¨æˆ·æ€§åˆ«-sex" class="headerlink" title="7.2 ç”¨æˆ·æ€§åˆ« (sex)"></a>7.2 ç”¨æˆ·æ€§åˆ« (sex)</h3><ul><li>0: æœªçŸ¥</li><li>1: ç”·</li><li>2: å¥³</li></ul><h3 id="7-3-èœå•ç±»å‹-menu-type"><a href="#7-3-èœå•ç±»å‹-menu-type" class="headerlink" title="7.3 èœå•ç±»å‹ (menu_type)"></a>7.3 èœå•ç±»å‹ (menu_type)</h3><ul><li>1: ç›®å½•</li><li>2: èœå•</li><li>3: æŒ‰é’®</li></ul><h3 id="7-4-æ•°æ®æƒé™èŒƒå›´-data-scope"><a href="#7-4-æ•°æ®æƒé™èŒƒå›´-data-scope" class="headerlink" title="7.4 æ•°æ®æƒé™èŒƒå›´ (data_scope)"></a>7.4 æ•°æ®æƒé™èŒƒå›´ (data_scope)</h3><ul><li>1: å…¨éƒ¨æ•°æ®æƒé™</li><li>2: æœ¬éƒ¨é—¨æ•°æ®æƒé™</li><li>3: æœ¬éƒ¨é—¨åŠä¸‹çº§éƒ¨é—¨æ•°æ®æƒé™</li><li>4: è‡ªå®šä¹‰æ•°æ®æƒé™</li></ul><h3 id="7-5-ä¸šåŠ¡ç±»å‹-business-type"><a href="#7-5-ä¸šåŠ¡ç±»å‹-business-type" class="headerlink" title="7.5 ä¸šåŠ¡ç±»å‹ (business_type)"></a>7.5 ä¸šåŠ¡ç±»å‹ (business_type)</h3><ul><li>0: å…¶ä»–</li><li>1: æ–°å¢</li><li>2: ä¿®æ”¹</li><li>3: åˆ é™¤</li><li>4: æˆæƒ</li><li>5: å¯¼å‡º</li><li>6: å¯¼å…¥</li></ul><h3 id="7-6-æ“ä½œç±»åˆ«-operator-type"><a href="#7-6-æ“ä½œç±»åˆ«-operator-type" class="headerlink" title="7.6 æ“ä½œç±»åˆ« (operator_type)"></a>7.6 æ“ä½œç±»åˆ« (operator_type)</h3><ul><li>0: å…¶å®ƒ</li><li>1: åå°ç”¨æˆ·</li><li>2: æ‰‹æœºç«¯ç”¨æˆ·</li></ul><h3 id="7-7-ç§Ÿæˆ·å¥—é¤å‘¨æœŸ-cycle-unit"><a href="#7-7-ç§Ÿæˆ·å¥—é¤å‘¨æœŸ-cycle-unit" class="headerlink" title="7.7 ç§Ÿæˆ·å¥—é¤å‘¨æœŸ (cycle_unit)"></a>7.7 ç§Ÿæˆ·å¥—é¤å‘¨æœŸ (cycle_unit)</h3><ul><li>1: æœˆ</li><li>2: å­£</li><li>3: å¹´</li></ul><h2 id="8-ç›¸å…³é“¾æ¥"><a href="#8-ç›¸å…³é“¾æ¥" class="headerlink" title="8. ç›¸å…³é“¾æ¥"></a>8. ç›¸å…³é“¾æ¥</h2><ul><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-MySQL%E7%89%88%E6%9C%AC/30189/">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬</a> - [[ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-MySQLç‰ˆæœ¬]]</li><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93/%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1-PostgreSQL%E7%89%88%E6%9C%AC/61171/">ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬</a> - [[ä¼ä¸šçº§æƒé™ç®¡ç†ç³»ç»Ÿæ•°æ®åº“è®¾è®¡-PostgreSQLç‰ˆæœ¬]]</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®åº“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®åº“</tag>
      
      <tag>RBAC</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cursorè§„åˆ™</title>
    <link href="/posts/AI/Cursor%E8%A7%84%E5%88%99/5829/"/>
    <url>/posts/AI/Cursor%E8%A7%84%E5%88%99/5829/</url>
    
    <content type="html"><![CDATA[<p>ä»¥ä¸‹æ˜¯ä¸€ä»½ã€Œå¯ç›´æ¥æ”¾è¿› <code>.cursor/rules/000-always.mdc</code>ã€çš„æœ€å‰é¢ã€æœ€ä¼˜å…ˆã€å…¨å±€ç”Ÿæ•ˆçš„ Cursor Rule æ¨¡æ¿ï¼ˆ2025-05 ä¹‹åæ–°ç‰ˆ MDC æ ¼å¼ï¼‰ã€‚<br>å®ƒæŠŠã€Œç³»ç»Ÿå…ƒæŒ‡ä»¤ â†’ é¡¹ç›®æ¶æ„ â†’ ä»£ç é£æ ¼ â†’ å®‰å…¨&#x2F;æ€§èƒ½çº¢çº¿ã€ä¸€æ¬¡æ€§é”æ­»ï¼ŒAgent æ¯æ¬¡å¯¹è¯éƒ½ä¼šå…ˆè¯»å®ƒï¼Œå†åŠ¨æ‰‹å†™ä»£ç ã€‚<br>æŠŠ <code>&#123;&#123;project_name&#125;&#125;</code> å’Œ <code>&#123;&#123;tech_stack&#125;&#125;</code> æ›¿æ¢æˆè‡ªå·±çš„å³å¯å¼€ç®±å³ç”¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs mdc">---<br>description: &quot;000-ALWAYSï¼šæœ€ä¼˜å…ˆå…¨å±€è§„åˆ™ï¼Œä»»ä½•å¯¹è¯éƒ½å¼ºåˆ¶æ³¨å…¥&quot;<br>globs: [&quot;**/*&quot;]<br>type: &quot;always&quot;<br>---<br><br># 000-ALWAYS Â· æœ€å‰é¢ç”Ÿæ•ˆçš„ Cursor Rule<br><br>## 0 è¯­è¨€ä¸å¹³å°åŸºçº¿<br>- **å¿…é¡»å…¨ç¨‹ç”¨ç®€ä½“ä¸­æ–‡å›ç­”**ï¼ˆä»£ç æœ¬èº«ä»ç”¨è‹±æ–‡å‘½åï¼‰ã€‚  <br>- å½“å‰è¿è¡Œç¯å¢ƒï¼š&#123;&#123;os_name&#125;&#125;ï¼ˆ&#123;&#123;arch&#125;&#125;ï¼‰ï¼Œé»˜è®¤ Shell ç”¨ `&#123;&#123;shell_cmd&#125;&#125;`ï¼ŒåŒ…ç®¡ç†ç”¨ `&#123;&#123;pkg_cmd&#125;&#125;`ï¼ŒNode ç‰ˆæœ¬ â‰¥&#123;&#123;node_ver&#125;&#125;ï¼ŒPython ç‰ˆæœ¬ â‰¥&#123;&#123;py_ver&#125;&#125;ã€‚  <br>- ä»»ä½•å®‰è£…/å¯åŠ¨/è°ƒè¯•å‘½ä»¤éƒ½å…ˆæ£€æµ‹ç¯å¢ƒï¼Œå†ç»™å‡ºã€Œä¸€é”®å¤åˆ¶ã€çš„å®Œæ•´æŒ‡ä»¤å—ã€‚<br><br>## 1 èº«ä»½ä¸è¡Œä¸º<br>- ä½ æ˜¯ **&#123;&#123;project_name&#125;&#125;** çš„èµ„æ·±æ¶æ„å¸ˆï¼Œç²¾é€š &#123;&#123;tech_stack&#125;&#125;ã€‚  <br>- é‡‡ç”¨â€œç»“å¯¹ç¼–ç¨‹â€æ¨¡å¼ï¼šå…ˆæ€è€ƒâ†’å†æ‘˜è¦â†’å†åŠ¨æ‰‹ï¼›ä»»ä½•æ”¹åŠ¨å¿…é¡»å¯å›æ»šã€‚  <br>- ç¦æ­¢ç›´æ¥è¾“å‡ºä»£ç å—ç»™ç”¨æˆ·ï¼›å¿…é¡»ç”¨ `edit_file`/`create_file` å·¥å…·æäº¤å˜æ›´ï¼Œä»¥ä¾¿å®¡æŸ¥ä¸ diffã€‚<br><br>## 2 ä¸Šä¸‹æ–‡çºªå¾‹<br>- ä¿®æ”¹æ–‡ä»¶å‰åŠ¡å¿… `read_file` å¯¹åº”å†…å®¹ï¼›è¶…è¿‡ 50 è¡Œçš„æ”¹åŠ¨é¡»åˆ†ç‰‡æäº¤ï¼Œæ¯ç‰‡ä»…æ”¹ä¸€ä¸ªç›®çš„ã€‚  <br>- è‹¥ä»»åŠ¡æ¶‰åŠå¤šæ–‡ä»¶ï¼Œå…ˆæ‰“å° **MVP æ‰§è¡Œæ¸…å•** å¾…ç”¨æˆ·ç¡®è®¤åå†è¿›è¡Œã€‚<br><br>## 3 ä»£ç å¯è¿è¡Œæ€§<br>- ç”Ÿæˆä»£ç å¿…é¡» **ç«‹å³å¯è¿è¡Œ**ï¼šä¾èµ–å®Œæ•´ã€ç±»å‹å®‰å…¨ã€ç¯å¢ƒå˜é‡æœ‰é»˜è®¤å€¼ã€README åŒæ­¥æ›´æ–°ã€‚  <br>- æ–°å»ºé¡¹ç›®æ—¶è‡ªåŠ¨åˆ›å»ºä¾èµ–é”å®šæ–‡ä»¶ï¼ˆpackage-lock/poetry.lock/requirements.txtï¼‰ä¸ä¸€é”®å¯åŠ¨è„šæœ¬ã€‚<br><br>## 4 é£æ ¼ä¸è§„èŒƒ<br>- ä¸¥æ ¼éµå¾ªå®˜æ–¹é£æ ¼æŒ‡å—ï¼›å‘½åç”¨è‹±æ–‡ï¼Œç¦æ­¢æ‹¼éŸ³ï¼›å‡½æ•° â‰¤30 è¡Œï¼Œæ–‡ä»¶ â‰¤300 è¡Œï¼Œè¶…å‡ºå³æ‹†åˆ†ã€‚  <br>- **æ¯ä¸ªå¯¼å‡ºå‡½æ•°**éƒ½å¿…é¡»æœ‰ã€Œå‡½æ•°çº§æ³¨é‡Šã€ï¼šä¸€å¥è¯æè¿°èŒè´£ã€å‚æ•°å«ä¹‰ã€è¿”å›å€¼ã€å¯èƒ½çš„å¼‚å¸¸ï¼›å¤æ‚ç®—æ³•åŠ ã€Œè¡Œå†…æ³¨é‡Šã€ã€‚  <br>- ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ä¸ç°æœ‰ä¾èµ–ï¼›æ–°å¢ç¬¬ä¸‰æ–¹åŒ…éœ€æ³¨æ˜ç†ç”±å¹¶é”å®šç‰ˆæœ¬ã€‚<br><br>## 5 å®‰å…¨ä¸æ€§èƒ½çº¢çº¿<br>- é»˜è®¤é˜²æ³¨å…¥ã€é˜² XSSã€CSRFã€SQLiï¼›æ‰€æœ‰ç”¨æˆ·è¾“å…¥å…ˆéªŒåéªŒã€‚  <br>- å‰ç«¯ bundle ä½“ç§¯ +20 % ä»¥ä¸Šé¡»æç¤ºï¼›åç«¯ API å“åº” &gt;200 ms é¡»ç»™ä¼˜åŒ–æ–¹æ¡ˆã€‚  <br>- ç§˜é’¥ã€token ç»ä¸ç¡¬ç¼–ç ï¼Œä¸€å¾‹èµ°ç¯å¢ƒå˜é‡ï¼›æ—¥å¿—è„±æ•ï¼Œä¸æ‰“å°å®Œæ•´æ‰‹æœºå·/é‚®ç®±ã€‚<br><br>## 6 å¤±è´¥ç­–ç•¥<br>- åŒä¸€ä»»åŠ¡è¿ç»­ 3 æ¬¡ä»æŠ¥é”™å³åœæ­¢ï¼Œå‘ç”¨æˆ·æŠ¥å‘Šé˜»å¡åŸå› å¹¶ç»™å‡ºæ›¿ä»£æ–¹æ¡ˆã€‚<br><br>&gt; æœ¬è§„åˆ™å…¨å±€å§‹ç»ˆæ³¨å…¥ï¼Œä»»ä½•åç»­è§„åˆ™ä¸å¾—ä¸ä¹‹å†²çªï¼›å¦‚æœ‰ç‰¹æ®Šåœºæ™¯éœ€è¦è¦†ç›–ï¼Œéœ€åœ¨æ‘˜è¦ä¸­è¯´æ˜ç†ç”±å¹¶å¾å¾—ç”¨æˆ·ç¡®è®¤ã€‚<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">your-repo/<br>â””â”€â”€ .cursor/<br>    â””â”€â”€ rules/<br>        â””â”€â”€ 000-always.mdc   // æ–‡ä»¶åä»¥ 000- å¼€å¤´ç¡®ä¿æœ€å‰åŠ è½½<br></code></pre></td></tr></table></figure><p>è¿™æ ·é…ç½®åï¼Œæ— è®º Agent æ¨¡å¼è¿˜æ˜¯æ™®é€šå¯¹è¯ï¼ŒCursor éƒ½ä¼šå…ˆæŠŠè¿™ä»½â€œæœ€å‰é¢çš„ AI Coding æç¤ºè¯â€è¯»è¿›ä¸Šä¸‹æ–‡ï¼Œå†å¼€å§‹å†™ä»£ç ï¼Œä»æ ¹æœ¬ä¸Šå‡å°‘â€œä¹±æ”¹ã€é£æ ¼æ¼‚ç§»ã€å®‰å…¨æ¼æ´â€ç­‰å¸¸è§é—®é¢˜ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>AI</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cursor</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Monorepo</title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/Monorepo%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88/41960/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/Monorepo%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88/41960/</url>
    
    <content type="html"><![CDATA[<h1 id="Monorepoå·¥ç¨‹ç®¡ç†æ–¹æ¡ˆ"><a href="#Monorepoå·¥ç¨‹ç®¡ç†æ–¹æ¡ˆ" class="headerlink" title="Monorepoå·¥ç¨‹ç®¡ç†æ–¹æ¡ˆ"></a>Monorepoå·¥ç¨‹ç®¡ç†æ–¹æ¡ˆ</h1><h2 id="mutirepo-vs-monorepo"><a href="#mutirepo-vs-monorepo" class="headerlink" title="mutirepo vs monorepo"></a>mutirepo vs monorepo</h2><ul><li>mutirepo : ä¸€ä¸ªåŒ…å¯¹åº”ä¸€ä¸ªä»“åº“</li><li>monorepo : å¤šä¸ªåŒ…å¯¹åº”ä¸€ä¸ªä»“åº“<br>å¸¸è§monorepoç®¡ç†å·¥å…·:</li><li><code>pnpm</code></li><li>npm</li><li>yarn</li><li>Lerna</li><li>Nx</li><li>Rush</li><li>â€¦â€¦</li></ul><h2 id="pnpm-monorepo"><a href="#pnpm-monorepo" class="headerlink" title="pnpm monorepo"></a>pnpm monorepo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> pnpm-workspace.yaml<br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># å­åŒ…ä½ç½®</span><br><span class="hljs-attr">packages:</span><br>Â  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;packages/*&quot;</span><br>Â  <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;apps/*&quot;</span><br></code></pre></td></tr></table></figure><p>åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹æ‰§è¡Œåˆå§‹åŒ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm --workspace-root init<br></code></pre></td></tr></table></figure><h2 id="ç¯å¢ƒç‰ˆæœ¬é”å®š"><a href="#ç¯å¢ƒç‰ˆæœ¬é”å®š" class="headerlink" title="ç¯å¢ƒç‰ˆæœ¬é”å®š"></a>ç¯å¢ƒç‰ˆæœ¬é”å®š</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// è·Ÿå·¥ç¨‹ package.json</span><br><br>  <span class="hljs-attr">&quot;engines&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>Â  Â  <span class="hljs-attr">&quot;node&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&gt;=22.12.0&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  <span class="hljs-attr">&quot;npm&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&gt;=10.9.0&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  <span class="hljs-attr">&quot;pnpm&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&gt;=10.14.0&quot;</span><br>Â  <span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt"># .npmrc<br>engine-strict=true<br></code></pre></td></tr></table></figure><h2 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm add -Dw typescript @types/node<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> tsconfig.json<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>Â  Â  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esnext&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;target&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;esnext&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;types&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;lib&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;esnext&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;sourceMap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;declaration&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;declarationMap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;noUncheckedIndexedAccess&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;exactOptionalPropertyTypes&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;verbatimModuleSyntax&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bundler&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;isolatedModules&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;noUncheckedSideEffectImports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;moduleDetection&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;force&quot;</span><span class="hljs-punctuation">,</span><br>Â  Â  Â  Â  <span class="hljs-attr">&quot;skipLibCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>Â  Â  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>Â  Â  <span class="hljs-attr">&quot;exclude&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;node_modules&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;dist&quot;</span><span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="ä»£ç é£æ ¼ä¸è´¨é‡æ£€æŸ¥"><a href="#ä»£ç é£æ ¼ä¸è´¨é‡æ£€æŸ¥" class="headerlink" title="ä»£ç é£æ ¼ä¸è´¨é‡æ£€æŸ¥"></a>ä»£ç é£æ ¼ä¸è´¨é‡æ£€æŸ¥</h2><h3 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add prettier<br><span class="hljs-built_in">touch</span> prettier.config.js<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// prettier.config.js</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment">Â * <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">import(&#x27;prettier&#x27;).Config</span>&#125;</span><br><span class="hljs-comment">Â * <span class="hljs-doctag">@see</span> https://www.prettier.cn/docs/options.html</span><br><span class="hljs-comment">Â */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>Â  Â  <span class="hljs-comment">// æŒ‡å®šæœ€å¤§æ¢è¡Œé•¿åº¦</span><br>Â  Â  <span class="hljs-attr">printWidth</span>:<span class="hljs-number">120</span>,<br>Â  Â  <span class="hljs-comment">// æŒ‡å®šç¼©è¿›ç©ºæ ¼æ•°</span><br>Â  Â  <span class="hljs-attr">tabWidth</span>:<span class="hljs-number">2</span>,<br>Â  Â  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨åˆ¶è¡¨ç¬¦è¿›è¡Œç¼©è¿›</span><br>Â  Â  <span class="hljs-attr">useTabs</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-comment">// æ˜¯å¦åœ¨è¯­å¥æœ«å°¾æ·»åŠ åˆ†å·</span><br>Â  Â  <span class="hljs-attr">semi</span>:<span class="hljs-literal">true</span>,<br>Â  Â  <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨å•å¼•å· (true:å•å¼•å·,false:åŒå¼•å·)</span><br>Â  Â  <span class="hljs-attr">singleQuote</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-comment">// å¯¹è±¡å±æ€§å¼•ç”¨æ˜¯å¦ä½¿ç”¨å•å¼•å·</span><br>Â  Â  <span class="hljs-attr">quoteProps</span>:<span class="hljs-string">&quot;as-needed&quot;</span>,<br>Â  Â  <span class="hljs-comment">// åœ¨JSXä¸­æ˜¯å¦ä½¿ç”¨å•å¼•å· (true:å•å¼•å·,false:åŒå¼•å·)</span><br>Â  Â  <span class="hljs-attr">jsxSingleQuote</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-comment">// å¤šè¡Œæ—¶å°½å¯èƒ½æ‰“å°å°¾éšé€—å· Â </span><br>Â  Â  <span class="hljs-attr">trailingComma</span>:<span class="hljs-string">&quot;none&quot;</span>,<br>Â  Â  <span class="hljs-comment">// åœ¨å¯¹è±¡æ‹¬å·å†…ä½¿ç”¨ç©ºæ ¼</span><br>Â  Â  <span class="hljs-attr">bracketSpacing</span>:<span class="hljs-literal">true</span>,<br>Â  Â  <span class="hljs-comment">// åœ¨å¯¹è±¡æ‹¬å·å†…ä½¿ç”¨ç©ºæ ¼</span><br>Â  Â  <span class="hljs-attr">bracketSameLine</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-comment">// ç®­å¤´å‡½æ•°å‚æ•°æ‹¬å·</span><br>Â  Â  <span class="hljs-attr">arrowParens</span>:<span class="hljs-string">&quot;avoid&quot;</span>,<br>Â  Â  <span class="hljs-attr">requirePragma</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-attr">insertPragma</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-attr">proseWrap</span>:<span class="hljs-string">&quot;preserve&quot;</span>,<br>Â  Â  <span class="hljs-attr">htmlWhitespaceSensitivity</span>:<span class="hljs-string">&quot;css&quot;</span>,<br>Â  Â  <span class="hljs-attr">vueIndentScriptAndStyle</span>:<span class="hljs-literal">false</span>,<br>Â  Â  <span class="hljs-attr">endOfLine</span>:<span class="hljs-string">&quot;auto&quot;</span>,<br>Â  Â  <span class="hljs-attr">rangeStart</span>:<span class="hljs-number">0</span>,<br>Â  Â  <span class="hljs-attr">rangeEnd</span>:<span class="hljs-title class_">Infinity</span>,<br>&#125;<br></code></pre></td></tr></table></figure><p><code>prettier</code>å¿½ç•¥é¡¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> .prettierignore<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">// .prettierignore<br>dist<br>public<br>node_modules<br>.local<br>pnpm-lock.yaml<br></code></pre></td></tr></table></figure><p><code>prettier</code>è„šæœ¬å‘½ä»¤</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;script&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">&#123;</span><br>Â  <span class="hljs-attr">&quot;lint:prettier&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;prettier --write \&quot;**/*.&#123;js,ts,mjs,cjs,json,tsx,css,less,scss,vue,html,md&#125;\&quot;&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add eslint@latest @eslint/js globals typescript-eslint eslint-plugin-prettier eslint-config-prettier eslint-plugin-vue<br></code></pre></td></tr></table></figure><table><thead><tr><th>ç±»åˆ«</th><th>åº“å</th></tr></thead><tbody><tr><td>æ ¸å¿ƒå¼•æ“</td><td>eslint</td></tr><tr><td>å®˜æ–¹è§„åˆ™é›†</td><td>@eslint&#x2F;js</td></tr><tr><td>å…¨å±€å˜é‡æ”¯æŒ</td><td>globals</td></tr><tr><td>TypeScriptæ”¯æŒ</td><td>typescript-eslint</td></tr><tr><td>ç±»å‹å®šä¹‰(è¾…åŠ©)</td><td>@types&#x2F;node</td></tr><tr><td>Prettieré›†æˆ</td><td>eslint-plugin-prettier, eslint-config-prettier</td></tr><tr><td>Vueæ”¯æŒ</td><td>eslint-plugin-vue</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs php">touch eslint.config.js<br><br><br>import &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;eslint-define-config&quot;</span>;<br>import eslint <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@eslint/js&quot;</span>;<br>import tseslint <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;typescript-eslint&quot;</span>;<br>import eslintPluginPrettier <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;eslint-plugin-prettier&quot;</span>;<br>import eslintPluginVue <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;eslint-plugin-vue&quot;</span>;<br>import globals <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;globals&quot;</span>;<br>import eslintConfigPrettier <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;eslint-config-prettier&quot;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ignores</span> = [<br>  <span class="hljs-string">&quot;**/dist/**&quot;</span>,<br>  <span class="hljs-string">&quot;**/node_modules/**&quot;</span>,<br>  <span class="hljs-string">&quot;.*&quot;</span>,<br>  <span class="hljs-string">&quot;scripts/**&quot;</span>,<br>  <span class="hljs-string">&quot;**/*.d.ts&quot;</span>,<br>];<br><br>export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineConfig</span>(<br>  // é€šç”¨é…ç½®<br>  &#123;<br>    ignores, // å¿½ç•¥é¡¹<br>    <span class="hljs-attr">extends</span>: [<br>      eslint.configs.recommended,<br>      ...tseslint.configs.recommended,<br>      eslintConfigPrettier,<br>    ], // ç»§æ‰¿è§„åˆ™<br>    <span class="hljs-attr">plugins</span>: &#123;<br>      <span class="hljs-attr">prettier</span>: eslintPluginPrettier,<br>    &#125;,<br>    <span class="hljs-attr">languageOptions</span>: &#123;<br>      <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-string">&quot;latest&quot;</span>,<br>      <span class="hljs-attr">sourceType</span>: <span class="hljs-string">&quot;module&quot;</span>,<br>      <span class="hljs-attr">parse</span>: tseslint.parser,<br>    &#125;,<br>    <span class="hljs-attr">rules</span>: &#123;<br>      // è‡ªå®šä¹‰<br>      <span class="hljs-string">&quot;no-var&quot;</span>: <span class="hljs-string">&quot;error&quot;</span>,<br>    &#125;,<br>  &#125;,<br>  // å‰ç«¯é…ç½®<br>  &#123;<br>    ignores,<br>    <span class="hljs-attr">files</span>: [<br>      <span class="hljs-string">&quot;apps/frontend/**/*.&#123;ts,js,tsx,jsx,vue&#125;&quot;</span>,<br>      <span class="hljs-string">&quot;packages/components/**/*.&#123;ts,js,tsx,jsx,vue&#125;&quot;</span>,<br>    ],<br>    <span class="hljs-attr">extends</span>: [<br>      ...eslintPluginVue.configs[<span class="hljs-string">&quot;flat/recommended&quot;</span>],<br>      eslintConfigPrettier,<br>    ],<br>    <span class="hljs-attr">languageOptions</span>: &#123;<br>      <span class="hljs-attr">globals</span>: &#123;<br>        ...globals.browser,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>  // åç«¯é…ç½®<br>  &#123;<br>    ignores,<br>    <span class="hljs-attr">files</span>: [<span class="hljs-string">&quot;apps/backend/**/*.&#123;ts,js&#125;&quot;</span>],<br>    <span class="hljs-attr">languageOptions</span>: &#123;<br>      <span class="hljs-attr">globals</span>: &#123;<br>        ...globals.node,<br>      &#125;,<br>    &#125;,<br>  &#125;,<br>);<br><br></code></pre></td></tr></table></figure><h3 id="æ‹¼å†™æ£€æŸ¥"><a href="#æ‹¼å†™æ£€æŸ¥" class="headerlink" title="æ‹¼å†™æ£€æŸ¥"></a>æ‹¼å†™æ£€æŸ¥</h3><p><code>VsCodeæ’ä»¶</code>:<code>Code Spell Checker</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add cspell @cspell/dict-lorem-ipsum<br></code></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs json">touch cspell.json<br><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;import&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;@cspell/dict-lorem-ipsum/cspell.ext.json&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;caseSensitive&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dictionaries&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;custom-dictionary&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dictionaryDefinitions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;custom-dictionary&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./.cspell/custom-dictionary.txt&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;addWords&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;ignorePaths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-string">&quot;**/node_modules/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/dist/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/build/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/lib/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/docs/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/vendor/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/public/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/static/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/out/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/tmp/**&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/*.d.ts&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/package.json&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/*.md&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;**/stats.html&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;eslint.config.mjs&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;.gitignore&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-string">&quot;.prettierignore&quot;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="gitæäº¤è§„èŒƒ"><a href="#gitæäº¤è§„èŒƒ" class="headerlink" title="gitæäº¤è§„èŒƒ"></a>gitæäº¤è§„èŒƒ</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">touch .gitignore<br><br># .gitignore<br><br></code></pre></td></tr></table></figure><h3 id="commitizen"><a href="#commitizen" class="headerlink" title="commitizen"></a>commitizen</h3><p>ç”¨äºæ£€æŸ¥æäº¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add @commitlint/cli @commitlint/config-conventional commitizen cz-git<br></code></pre></td></tr></table></figure><ul><li>@commitlint&#x2F;cli æ˜¯ commitlint å·¥å…·çš„æ ¸å¿ƒ</li><li>@commitlint&#x2F;config-conventional æ˜¯åŸºäº conventional commits è§„èŒƒçš„é…ç½®æ–‡ä»¶</li><li>commitizen æä¾›ä¸€ä¸ªäº¤äº’å¼æ’°å†™commitä¿¡æ¯çš„æ’ä»¶</li><li>cz-git æ˜¯å›½äº§å·¥å…·</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// package.json</span><br>Â <span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>Â <span class="hljs-attr">&quot;commit&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;git-cz&quot;</span><br>Â <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>Â <span class="hljs-attr">&quot;config&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;commitizen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;node_modules/cz-git&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>é…ç½® <code>cz-git</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs js">touch commitlint.<span class="hljs-property">config</span>.<span class="hljs-property">js</span><br><br><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> &#123;<span class="hljs-type">import(&#x27;cz-git&#x27;).UserConfig</span>&#125; */</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-attr">extends</span>: [<span class="hljs-string">&quot;@commitlint/config-conventional&quot;</span>],<br>  <span class="hljs-attr">rules</span>: &#123;<br>    <span class="hljs-comment">// @see: https://commitlint.js.org/#/reference-rules</span><br>    <span class="hljs-string">&quot;body-leading-blank&quot;</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">&quot;always&quot;</span>],<br>    <span class="hljs-string">&quot;footer-leading-blank&quot;</span>: [<span class="hljs-number">1</span>, <span class="hljs-string">&quot;always&quot;</span>],<br>    <span class="hljs-string">&quot;header-max-length&quot;</span>: [<span class="hljs-number">2</span>, <span class="hljs-string">&quot;always&quot;</span>, <span class="hljs-number">108</span>],<br>    <span class="hljs-string">&quot;subject-case&quot;</span>: [<span class="hljs-number">0</span>],<br>    <span class="hljs-string">&quot;type-enum&quot;</span>: [<br>      <span class="hljs-number">2</span>,<br>      <span class="hljs-string">&quot;always&quot;</span>,<br>      [<br>        <span class="hljs-string">&quot;feat&quot;</span>,<br>        <span class="hljs-string">&quot;fix&quot;</span>,<br>        <span class="hljs-string">&quot;docs&quot;</span>,<br>        <span class="hljs-string">&quot;style&quot;</span>,<br>        <span class="hljs-string">&quot;refactor&quot;</span>,<br>        <span class="hljs-string">&quot;perf&quot;</span>,<br>        <span class="hljs-string">&quot;test&quot;</span>,<br>        <span class="hljs-string">&quot;build&quot;</span>,<br>        <span class="hljs-string">&quot;ci&quot;</span>,<br>        <span class="hljs-string">&quot;chore&quot;</span>,<br>        <span class="hljs-string">&quot;revert&quot;</span>,<br>        <span class="hljs-string">&quot;wip&quot;</span>,<br>        <span class="hljs-string">&quot;workflow&quot;</span>,<br>        <span class="hljs-string">&quot;types&quot;</span>,<br>        <span class="hljs-string">&quot;release&quot;</span><br>      ]<br>    ]<br>  &#125;,<br>  <span class="hljs-attr">prompt</span>: &#123;<br>    <span class="hljs-attr">types</span>: [<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;feat&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æ–°åŠŸèƒ½ï¼šæ–°å¢åŠŸèƒ½&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;fix&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;ä¿®å¤ï¼šä¿®å¤ç¼ºé™·&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;docs&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æ–‡æ¡£ï¼šæ›´æ–°æ–‡æ¡£&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;refactor&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;é‡æ„ï¼šé‡æ„ä»£ç (ä¸æ–°å¢åŠŸèƒ½ä¹Ÿä¸ä¿®å¤ bug)&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;perf&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æ€§èƒ½ï¼šæå‡æ€§èƒ½&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æµ‹è¯•ï¼šæ–°å¢æµ‹è¯•&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;chore&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å·¥å…·ï¼šæ›´æ”¹æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;revert&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å›æ»šï¼šä»£ç å›æ»š&quot;</span> &#125;,<br>      &#123; <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;style&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;æ ·å¼ï¼šæ ¼å¼è°ƒæ•´(ä¸å½±å“ä»£ç è¿è¡Œ)&quot;</span> &#125;<br>    ],<br>    <span class="hljs-attr">scopes</span>: [<span class="hljs-string">&quot;root&quot;</span>, <span class="hljs-string">&quot;backend&quot;</span>, <span class="hljs-string">&quot;frontend&quot;</span>, <span class="hljs-string">&quot;components&quot;</span>, <span class="hljs-string">&quot;utils&quot;</span>],<br>    <span class="hljs-attr">allowCustomScopes</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">skipQuestions</span>: [<span class="hljs-string">&quot;body&quot;</span>, <span class="hljs-string">&quot;footerPrefix&quot;</span>, <span class="hljs-string">&quot;footer&quot;</span>, <span class="hljs-string">&quot;breaking&quot;</span>],<br>    <span class="hljs-attr">messages</span>: &#123;<br>      <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;é€‰æ‹©æäº¤ç±»å‹ï¼š&quot;</span>,<br>      <span class="hljs-attr">scope</span>: <span class="hljs-string">&quot;é€‰æ‹©æäº¤èŒƒå›´(å¯é€‰)ï¼š&quot;</span>,<br>      <span class="hljs-attr">subject</span>: <span class="hljs-string">&quot;è¯·ç®€è¦æè¿°æ›´æ”¹ï¼š&quot;</span>,<br>      <span class="hljs-attr">body</span>: <span class="hljs-string">&quot;è¯¦ç»†æè¿°(å¯é€‰)ï¼š&quot;</span>,<br>      <span class="hljs-attr">footer</span>: <span class="hljs-string">&quot;å…³è” ISSUE æˆ– BREAKING CHANGE(å¯é€‰)ï¼š&quot;</span>,<br>      <span class="hljs-attr">confirmCommit</span>: <span class="hljs-string">&quot;âœ… ç¡®è®¤æäº¤ï¼Ÿ&quot;</span><br>    &#125;<br>  &#125;<br>&#125;;<br><br><br></code></pre></td></tr></table></figure><h3 id="husky"><a href="#husky" class="headerlink" title="husky"></a>husky</h3><p>è¿æ¥ git hook è‡ªå®šä¹‰ æäº¤å‰åäº‹ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add husky<br>pnpx husky init<br></code></pre></td></tr></table></figure><p>é…ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">// .husky/pre-commit<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/usr/bin/env sh</span><br>pnpm lint:prettier &amp;&amp; pnpm lint:eslint &amp;&amp; pnpm lint:cspell<br></code></pre></td></tr></table></figure><h3 id="lint-staged"><a href="#lint-staged" class="headerlink" title="lint-staged"></a>lint-staged</h3><p>æ£€æŸ¥æš‚å­˜åŒºæ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add lint-staged<br></code></pre></td></tr></table></figure><p>é…ç½®å‘½ä»¤</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;precommit&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;lint-staged&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// .lintstagedrc.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br><span class="hljs-string">&quot;*.&#123;js,ts,mjs,json,tsx,css,less,scss,vue,html,md&#125;&quot;</span>:[<span class="hljs-string">&quot;cspell lint&quot;</span>],<br><span class="hljs-string">&quot;*.&#123;js,ts,vue,md&#125;&quot;</span>:[<span class="hljs-string">&quot;prettier --write&quot;</span>,<span class="hljs-string">&quot;eslint&quot;</span>]<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å…¬å…±åº“æ‰“åŒ…"><a href="#å…¬å…±åº“æ‰“åŒ…" class="headerlink" title="å…¬å…±åº“æ‰“åŒ…"></a>å…¬å…±åº“æ‰“åŒ…</h2><p>å®‰è£…<code>rollup</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add rollup @rollup/plugin-node-resolve @rollup/plugin-commonjs rollup-plugin-typescript2 @rollup/plugin-terser @vitejs/plugin-vue rollup-plugin-postcss<br></code></pre></td></tr></table></figure><ul><li><code>@rollup/plugin-node-resolve</code>: è§£æ node_modules ä¸­çš„ä¾èµ–</li><li><code>@rollup/plugin-commonjs</code>: å°† CommonJS æ¨¡å—è½¬ä¸º ESM</li><li><code>rollup-plugin-typescript2</code>: è®© Rollup æ”¯æŒ TS ç¼–è¯‘</li><li><code>@rollup/plugin-terser</code>ï¼š å‹ç¼©å’Œæ··æ·†</li><li><code>@vitejs/plugin-vue</code>ï¼š æ”¯æŒSFCç¼–è¯‘</li><li><code>rollup-plugin-postcss</code>ï¼š å¤„ç†cssä»£ç <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// scropts/buildBase.js</span><br><br><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:path&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-variable constant_">URL</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:url&quot;</span>;<br><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;node:fs&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; nodeResolve &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-node-resolve&quot;</span>;<br><span class="hljs-keyword">import</span> commonjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-commonjs&quot;</span>;<br><span class="hljs-keyword">import</span> typescript <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup-plugin-typescript2&quot;</span>;<br><span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@vitejs/plugin-vue&quot;</span>;<br><span class="hljs-keyword">import</span> postcss <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup-plugin-postcss&quot;</span>;<br><br><span class="hljs-keyword">const</span> __filename = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>);<br><span class="hljs-keyword">const</span> __dirname = path.<span class="hljs-title function_">dirname</span>(__filename);<br><br><span class="hljs-keyword">const</span> packages = [<span class="hljs-string">&quot;utils&quot;</span>, <span class="hljs-string">&quot;components&quot;</span>];<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPackageRoots</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> packages.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">pkg</span> =&gt;</span> path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;../packages&quot;</span>, pkg));<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">packageJson</span>(<span class="hljs-params">root</span>) &#123;<br>  <span class="hljs-keyword">const</span> jsonPath = path.<span class="hljs-title function_">resolve</span>(root, <span class="hljs-string">&quot;package.json&quot;</span>);<br>  <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">readFile</span>(jsonPath, <span class="hljs-string">&quot;utf-8&quot;</span>);<br>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(content);<br>&#125;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getRollupConfig</span>(<span class="hljs-params">root</span>) &#123;<br>  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">packageJson</span>(root);<br>  <span class="hljs-keyword">const</span> tsconfig = path.<span class="hljs-title function_">resolve</span>(root, <span class="hljs-string">&quot;tsconfig.json&quot;</span>);<br>  <span class="hljs-keyword">const</span> &#123; name, formats &#125; = config.<span class="hljs-property">buildOptions</span> || &#123;&#125;;<br>  <span class="hljs-keyword">const</span> dist = path.<span class="hljs-title function_">resolve</span>(root, <span class="hljs-string">&quot;./dist&quot;</span>);<br>  <span class="hljs-keyword">const</span> entry = path.<span class="hljs-title function_">resolve</span>(root, <span class="hljs-string">&quot;./src/index.ts&quot;</span>);<br>  <span class="hljs-keyword">const</span> rollupOptions = &#123;<br>    <span class="hljs-attr">input</span>: entry,<br>    <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">external</span>: [<span class="hljs-string">&quot;vue&quot;</span>],<br>    <span class="hljs-attr">plugins</span>: [<br>      <span class="hljs-title function_">nodeResolve</span>(),<br>      <span class="hljs-title function_">commonjs</span>(),<br>      <span class="hljs-title function_">typescript</span>(&#123;<br>        tsconfig,<br>        <span class="hljs-attr">compilerOptions</span>: &#123;<br>          <span class="hljs-attr">outDir</span>: dist<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">vue</span>(&#123;<br>        <span class="hljs-attr">template</span>: &#123;<br>          <span class="hljs-attr">compilerOptions</span>: &#123;<br>            <span class="hljs-comment">// è‡ªå®šä¹‰è½¬æ¢å‡½æ•°ï¼Œåœ¨ç”Ÿæˆ AST æ—¶ç§»é™¤ç‰¹å®šå±æ€§</span><br>            <span class="hljs-attr">nodeTransforms</span>: [<br>              <span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> &#123;<br>                <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> === <span class="hljs-number">1</span> <span class="hljs-comment">/* NodeTypes.ELEMENT */</span>) &#123;<br>                  <span class="hljs-comment">// è¿‡æ»¤æ‰æ‰€æœ‰ data-testid å±æ€§</span><br>                  node.<span class="hljs-property">props</span> = node.<span class="hljs-property">props</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">prop</span> =&gt;</span> &#123;<br>                    <span class="hljs-keyword">if</span> (prop.<span class="hljs-property">type</span> === <span class="hljs-number">6</span> <span class="hljs-comment">/* NodeTypes.ATTRIBUTE */</span>) &#123;<br>                      <span class="hljs-keyword">return</span> prop.<span class="hljs-property">name</span> !== <span class="hljs-string">&quot;data-testid&quot;</span>;<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>                  &#125;);<br>                &#125;<br>              &#125;<br>            ]<br>          &#125;<br>        &#125;<br>      &#125;),<br>      <span class="hljs-title function_">postcss</span>()<br>    ],<br>    <span class="hljs-attr">dir</span>: dist<br>  &#125;;<br>  <span class="hljs-keyword">const</span> output = [];<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> format <span class="hljs-keyword">of</span> formats) &#123;<br>    <span class="hljs-keyword">const</span> outputItem = &#123;<br>      format,<br>      <span class="hljs-attr">file</span>: path.<span class="hljs-title function_">resolve</span>(dist, <span class="hljs-string">`index.<span class="hljs-subst">$&#123;format&#125;</span>.js`</span>),<br>      <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">globals</span>: &#123;<br>        <span class="hljs-attr">vue</span>: <span class="hljs-string">&quot;Vue&quot;</span><br>      &#125;<br>    &#125;;<br>    <span class="hljs-keyword">if</span> (format === <span class="hljs-string">&quot;iife&quot;</span>) &#123;<br>      outputItem.<span class="hljs-property">name</span> = name;<br>    &#125;<br>    output.<span class="hljs-title function_">push</span>(outputItem);<br>  &#125;<br>  rollupOptions.<span class="hljs-property">output</span> = output;<br>  <span class="hljs-comment">// watch options</span><br>  rollupOptions.<span class="hljs-property">watch</span> = &#123;<br>    <span class="hljs-attr">include</span>: path.<span class="hljs-title function_">resolve</span>(root, <span class="hljs-string">&quot;src/**&quot;</span>),<br>    <span class="hljs-attr">exclude</span>: path.<span class="hljs-title function_">resolve</span>(root, <span class="hljs-string">&quot;node_modules/**&quot;</span>),<br>    <span class="hljs-attr">clearScreen</span>: <span class="hljs-literal">false</span><br>  &#125;;<br>  <span class="hljs-keyword">return</span> rollupOptions;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getRollupConfigs</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> roots = <span class="hljs-title function_">getPackageRoots</span>();<br>  <span class="hljs-keyword">const</span> configs = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(roots.<span class="hljs-title function_">map</span>(getRollupConfig));<br>  <span class="hljs-keyword">const</span> result = &#123;&#125;;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; packages.<span class="hljs-property">length</span>; i++) &#123;<br>    result[packages[i]] = configs[i];<br>  &#125;<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">clearDist</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-keyword">const</span> dist = path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&quot;../packages&quot;</span>, name, <span class="hljs-string">&quot;dist&quot;</span>);<br>  <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(dist)) &#123;<br>    fs.<span class="hljs-title function_">rmSync</span>(dist, &#123; <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span> &#125;);<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// scripts/build.js</span><br><span class="hljs-keyword">import</span> &#123; getRollupConfigs, clearDist &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./buildBase.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; rollup &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup&quot;</span>;<br><span class="hljs-keyword">import</span> terser <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@rollup/plugin-terser&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">build</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> configs = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRollupConfigs</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">in</span> configs) &#123;<br>    <span class="hljs-title function_">clearDist</span>(name);<br>    <span class="hljs-keyword">const</span> config = configs[name];<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¦ æ­£åœ¨æ‰“åŒ…: <span class="hljs-subst">$&#123;name&#125;</span>`</span>);<br>    <span class="hljs-keyword">const</span> bundle = <span class="hljs-keyword">await</span> <span class="hljs-title function_">rollup</span>(&#123;<br>      <span class="hljs-attr">input</span>: config.<span class="hljs-property">input</span>,<br>      <span class="hljs-attr">plugins</span>: [...config.<span class="hljs-property">plugins</span>, <span class="hljs-title function_">terser</span>()],<br>      <span class="hljs-attr">external</span>: config.<span class="hljs-property">external</span><br>    &#125;);<br>    <span class="hljs-keyword">const</span> tasks = [];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> output <span class="hljs-keyword">of</span> config.<span class="hljs-property">output</span>) &#123;<br>      tasks.<span class="hljs-title function_">push</span>(bundle.<span class="hljs-title function_">write</span>(output));<br>    &#125;<br>    <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(tasks);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… <span class="hljs-subst">$&#123;name&#125;</span> æ‰“åŒ…å®Œæˆ`</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-title function_">build</span>();<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// scripts/dev.js</span><br><span class="hljs-keyword">import</span> &#123; getRollupConfigs &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./buildBase.js&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;rollup&quot;</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dev</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> configs = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getRollupConfigs</span>();<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">in</span> configs) &#123;<br>    <span class="hljs-keyword">const</span> config = configs[name];<br>    <span class="hljs-keyword">const</span> watcher = <span class="hljs-title function_">watch</span>(<br>      config.<span class="hljs-property">output</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">o</span> =&gt;</span> (&#123;<br>        <span class="hljs-attr">input</span>: config.<span class="hljs-property">input</span>,<br>        <span class="hljs-attr">plugins</span>: config.<span class="hljs-property">plugins</span>,<br>        <span class="hljs-attr">external</span>: config.<span class="hljs-property">external</span>,<br>        <span class="hljs-attr">output</span>: o,<br>        <span class="hljs-attr">watch</span>: config.<span class="hljs-property">watch</span><br>      &#125;))<br>    );<br>    watcher.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;event&quot;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">code</span> === <span class="hljs-string">&quot;START&quot;</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ‘ï¸ å¼€å§‹ç›‘å¬: <span class="hljs-subst">$&#123;name&#125;</span>`</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">code</span> === <span class="hljs-string">&quot;ERROR&quot;</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`âŒ <span class="hljs-subst">$&#123;name&#125;</span>æ‰“åŒ…å¤±è´¥:`</span>, event.<span class="hljs-property">error</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">code</span> === <span class="hljs-string">&quot;BUNDLE_START&quot;</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¦ æ­£åœ¨æ‰“åŒ…: <span class="hljs-subst">$&#123;name&#125;</span>`</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">code</span> === <span class="hljs-string">&quot;BUNDLE_END&quot;</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… <span class="hljs-subst">$&#123;name&#125;</span> æ‰“åŒ…å®Œæˆ`</span>);<br>      &#125;<br>    &#125;);<br>  &#125;<br>&#125;<br><br><span class="hljs-title function_">dev</span>();<br></code></pre></td></tr></table></figure><h2 id="ç»Ÿä¸€æµ‹è¯•"><a href="#ç»Ÿä¸€æµ‹è¯•" class="headerlink" title="ç»Ÿä¸€æµ‹è¯•"></a>ç»Ÿä¸€æµ‹è¯•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pnpm -Dw add vitest @vitest/browser vitest-browser-vue vue<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>Monorepo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Monorepo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»é›¶æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬</title>
    <link href="/posts/%E5%90%8E%E7%AB%AF/Shell/%E4%BB%8E%E9%9B%B6%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC/36122/"/>
    <url>/posts/%E5%90%8E%E7%AB%AF/Shell/%E4%BB%8E%E9%9B%B6%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%84%9A%E6%9C%AC/36122/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»é›¶æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼šæ”¯æŒå¤šé¡¹ç›®å¹¶å‘éƒ¨ç½²ä¸æ™ºèƒ½å¤‡ä»½"><a href="#ä»é›¶æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼šæ”¯æŒå¤šé¡¹ç›®å¹¶å‘éƒ¨ç½²ä¸æ™ºèƒ½å¤‡ä»½" class="headerlink" title="ä»é›¶æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼šæ”¯æŒå¤šé¡¹ç›®å¹¶å‘éƒ¨ç½²ä¸æ™ºèƒ½å¤‡ä»½"></a>ä»é›¶æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼šæ”¯æŒå¤šé¡¹ç›®å¹¶å‘éƒ¨ç½²ä¸æ™ºèƒ½å¤‡ä»½</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œéƒ¨ç½²æ˜¯ä¸€ä¸ªé¢‘ç¹ä¸”é‡è¦çš„ç¯èŠ‚ã€‚ä¼ ç»Ÿçš„æ‰‹åŠ¨éƒ¨ç½²æ–¹å¼ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å®¹æ˜“å‡ºç°äººä¸ºé”™è¯¯ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»ä¸€ä¸ªä¼ä¸šçº§çš„è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œå®ƒæ”¯æŒå¤šé¡¹ç›®å¹¶å‘éƒ¨ç½²ã€æ™ºèƒ½å¤‡ä»½ã€æ–‡ä»¶æ ¡éªŒç­‰åŠŸèƒ½ï¼Œå¤§å¤§æå‡äº†éƒ¨ç½²æ•ˆç‡å’Œå¯é æ€§ã€‚</p><h2 id="è„šæœ¬è®¾è®¡ç›®æ ‡"><a href="#è„šæœ¬è®¾è®¡ç›®æ ‡" class="headerlink" title="è„šæœ¬è®¾è®¡ç›®æ ‡"></a>è„šæœ¬è®¾è®¡ç›®æ ‡</h2><h3 id="æ ¸å¿ƒéœ€æ±‚"><a href="#æ ¸å¿ƒéœ€æ±‚" class="headerlink" title="æ ¸å¿ƒéœ€æ±‚"></a>æ ¸å¿ƒéœ€æ±‚</h3><ol><li><p><strong>å¤šé¡¹ç›®æ”¯æŒ</strong>ï¼šä»JSONé…ç½®æ–‡ä»¶è¯»å–å¤šä¸ªé¡¹ç›®çš„éƒ¨ç½²ä¿¡æ¯</p></li><li><p><strong>æ™ºèƒ½å¤‡ä»½</strong>ï¼šè‡ªåŠ¨å¤‡ä»½æœåŠ¡å™¨ä¸Šçš„ç°æœ‰é¡¹ç›®ï¼Œé¿å…æ•°æ®ä¸¢å¤±</p></li><li><p><strong>å¹¶å‘éƒ¨ç½²</strong>ï¼šå¤šä¸ªé¡¹ç›®åŒæ—¶éƒ¨ç½²ï¼Œæå‡æ•´ä½“æ•ˆç‡</p></li><li><p><strong>æ–‡ä»¶æ ¡éªŒ</strong>ï¼šéƒ¨ç½²å®ŒæˆåéªŒè¯æ–‡ä»¶å®Œæ•´æ€§</p></li><li><p><strong>ç”¨æˆ·å‹å¥½</strong>ï¼šæä¾›è¿›åº¦æ¡å’Œè¯¦ç»†çš„çŠ¶æ€åé¦ˆ</p></li><li><p><strong>å®‰å…¨å¯é </strong>ï¼šæ”¯æŒSSHå¯†é’¥è®¤è¯ï¼Œé˜²æ­¢æ„å¤–äº¤äº’</p></li></ol><h3 id="æŠ€æœ¯ç‰¹æ€§"><a href="#æŠ€æœ¯ç‰¹æ€§" class="headerlink" title="æŠ€æœ¯ç‰¹æ€§"></a>æŠ€æœ¯ç‰¹æ€§</h3><ul><li><p>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆrsyncçš„â€“partialé€‰é¡¹ï¼‰</p></li><li><p>å½©è‰²è¾“å‡ºå’Œè¿›åº¦æ¡æ˜¾ç¤º</p></li><li><p>è¯¦ç»†çš„æˆåŠŸ&#x2F;å¤±è´¥æŠ¥å‘Š</p></li><li><p>å¯é€‰çš„å•é¡¹ç›®æˆ–å¤šé¡¹ç›®éƒ¨ç½²</p></li></ul><h2 id="æ ¸å¿ƒæ¶æ„è®¾è®¡"><a href="#æ ¸å¿ƒæ¶æ„è®¾è®¡" class="headerlink" title="æ ¸å¿ƒæ¶æ„è®¾è®¡"></a>æ ¸å¿ƒæ¶æ„è®¾è®¡</h2><h3 id="1-é…ç½®é©±åŠ¨"><a href="#1-é…ç½®é©±åŠ¨" class="headerlink" title="1. é…ç½®é©±åŠ¨"></a>1. é…ç½®é©±åŠ¨</h3><p>è„šæœ¬é‡‡ç”¨JSONé…ç½®æ–‡ä»¶çš„æ–¹å¼ç®¡ç†éƒ¨ç½²ä¿¡æ¯ï¼Œæ¯ä¸ªé¡¹ç›®åŒ…å«ï¼š</p><ul><li><p>é¡¹ç›®åç§°</p></li><li><p>æœåŠ¡å™¨ä¿¡æ¯ï¼ˆIPã€ç«¯å£ã€ç”¨æˆ·ï¼‰</p></li><li><p>æœ¬åœ°æºç ç›®å½•</p></li><li><p>è¿œç¨‹ç›®æ ‡ç›®å½•</p></li></ul><h3 id="2-å¹¶å‘æ§åˆ¶"><a href="#2-å¹¶å‘æ§åˆ¶" class="headerlink" title="2. å¹¶å‘æ§åˆ¶"></a>2. å¹¶å‘æ§åˆ¶</h3><p>ä½¿ç”¨bashçš„åå°ä½œä¸šç®¡ç†ï¼Œé€šè¿‡<code>&amp;</code>å’Œ<code>wait</code>å‘½ä»¤å®ç°å¹¶å‘éƒ¨ç½²ï¼ŒåŒæ—¶é™åˆ¶æœ€å¤§å¹¶å‘æ•°é¿å…æœåŠ¡å™¨è¿‡è½½ã€‚</p><h3 id="3-çŠ¶æ€ç®¡ç†"><a href="#3-çŠ¶æ€ç®¡ç†" class="headerlink" title="3. çŠ¶æ€ç®¡ç†"></a>3. çŠ¶æ€ç®¡ç†</h3><p>é€šè¿‡ä¸´æ—¶æ–‡ä»¶åœ¨å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹ä¹‹é—´ä¼ é€’çŠ¶æ€ä¿¡æ¯ï¼Œç¡®ä¿éƒ¨ç½²ç»“æœçš„å‡†ç¡®è®°å½•ã€‚</p><h2 id="ä»£ç å®ç°è¯¦è§£"><a href="#ä»£ç å®ç°è¯¦è§£" class="headerlink" title="ä»£ç å®ç°è¯¦è§£"></a>ä»£ç å®ç°è¯¦è§£</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡å’Œä¾èµ–æ£€æŸ¥"><a href="#ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡å’Œä¾èµ–æ£€æŸ¥" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡å’Œä¾èµ–æ£€æŸ¥"></a>ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡å’Œä¾èµ–æ£€æŸ¥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#!/bin/bash</span><br><br><br><br><span class="hljs-comment"># é¢œè‰²è¾“å‡ºå‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">green</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[32m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br><span class="hljs-function"><span class="hljs-title">red</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[31m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br><span class="hljs-function"><span class="hljs-title">yellow</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[33m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br><span class="hljs-function"><span class="hljs-title">blue</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[34m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br>  <br><br><span class="hljs-comment"># ä¾èµ–æ£€æŸ¥</span><br><br><span class="hljs-built_in">command</span> -v rsync &gt;/dev/null || &#123; red <span class="hljs-string">&quot;è¯·å…ˆå®‰è£… rsync&quot;</span>; <span class="hljs-built_in">exit</span> 1; &#125;<br><br><span class="hljs-built_in">command</span> -v jq &gt;/dev/null || &#123; red <span class="hljs-string">&quot;è¯·å…ˆå®‰è£… jq&quot;</span>; <span class="hljs-built_in">exit</span> 1; &#125;<br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p>ä½¿ç”¨ANSIè½¬ä¹‰åºåˆ—å®ç°å½©è‰²è¾“å‡ºï¼Œæå‡ç”¨æˆ·ä½“éªŒ</p></li><li><p>åœ¨è„šæœ¬å¼€å§‹æ—¶æ£€æŸ¥å¿…è¦å·¥å…·ï¼Œé¿å…è¿è¡Œæ—¶æ‰å‘ç°ä¾èµ–ç¼ºå¤±</p></li></ul><h3 id="ç¬¬äºŒæ­¥ï¼šè¿›åº¦æ¡å®ç°"><a href="#ç¬¬äºŒæ­¥ï¼šè¿›åº¦æ¡å®ç°" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šè¿›åº¦æ¡å®ç°"></a>ç¬¬äºŒæ­¥ï¼šè¿›åº¦æ¡å®ç°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-function"><span class="hljs-title">progress_bar</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> current=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> total=<span class="hljs-variable">$2</span><br><br><span class="hljs-built_in">local</span> width=50<br><br><span class="hljs-built_in">local</span> percentage=$((current * <span class="hljs-number">100</span> / total))<br><br><span class="hljs-built_in">local</span> filled=$((current * width / total))<br><br><span class="hljs-built_in">local</span> empty=$((width - filled))<br><br>  <br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\r\033[36m[&#x27;</span><br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;%*s&#x27;</span> <span class="hljs-variable">$filled</span> | <span class="hljs-built_in">tr</span> <span class="hljs-string">&#x27; &#x27;</span> <span class="hljs-string">&#x27;#&#x27;</span><br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;%*s&#x27;</span> <span class="hljs-variable">$empty</span> | <span class="hljs-built_in">tr</span> <span class="hljs-string">&#x27; &#x27;</span> <span class="hljs-string">&#x27;-&#x27;</span><br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;] %d%%\033[0m&#x27;</span> <span class="hljs-variable">$percentage</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p>ä½¿ç”¨<code>\r</code>å®ç°åŒè¡Œåˆ·æ–°ï¼Œé¿å…è¾“å‡ºè¿‡å¤šè¡Œ</p></li><li><p>é€šè¿‡è®¡ç®—å¡«å……å’Œç©ºç™½å­—ç¬¦æ•°é‡å®ç°å¯è§†åŒ–è¿›åº¦</p></li><li><p>ä½¿ç”¨<code>#</code>å’Œ<code>-</code>å­—ç¬¦ç¡®ä¿åœ¨ä¸åŒç»ˆç«¯ç¯å¢ƒä¸‹çš„å…¼å®¹æ€§</p></li></ul><h3 id="ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§£æ"><a href="#ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§£æ" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§£æ"></a>ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§£æ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment"># è¯»å–é…ç½®æ–‡ä»¶</span><br><br>DEPLOY_CONFIG=<span class="hljs-string">&quot;scripts/deploy.json&quot;</span><br><br>PROJECTS_DATA=$(jq -r <span class="hljs-string">&#x27;.&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$DEPLOY_CONFIG</span>&quot;</span>)<br><br>PROJECT_COUNT=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PROJECTS_DATA</span>&quot;</span> | jq <span class="hljs-string">&#x27;length&#x27;</span>)<br><br>  <br><br><span class="hljs-comment"># è§£æé¡¹ç›®ä¿¡æ¯</span><br><br><span class="hljs-function"><span class="hljs-title">get_project_info</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> index=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> field=<span class="hljs-variable">$2</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PROJECTS_DATA</span>&quot;</span> | jq -r <span class="hljs-string">&quot;.[<span class="hljs-variable">$index</span>].<span class="hljs-variable">$field</span>&quot;</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p>ä½¿ç”¨<code>jq</code>ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªJSONæ–‡ä»¶ï¼Œé¿å…å¤šæ¬¡æ–‡ä»¶IO</p></li><li><p>é€šè¿‡å‡½æ•°å°è£…é¡¹ç›®ä¿¡æ¯è·å–ï¼Œæé«˜ä»£ç å¤ç”¨æ€§</p></li><li><p>é¢„å…ˆè®¡ç®—é¡¹ç›®æ€»æ•°ï¼Œç”¨äºè¿›åº¦æ¡æ˜¾ç¤º</p></li></ul><h3 id="ç¬¬å››æ­¥ï¼šç”¨æˆ·äº¤äº’"><a href="#ç¬¬å››æ­¥ï¼šç”¨æˆ·äº¤äº’" class="headerlink" title="ç¬¬å››æ­¥ï¼šç”¨æˆ·äº¤äº’"></a>ç¬¬å››æ­¥ï¼šç”¨æˆ·äº¤äº’</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;è¯·é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼š&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a) éƒ¨ç½²æ‰€æœ‰é¡¹ç›®&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;s) é€‰æ‹©ç‰¹å®šé¡¹ç›®&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;q) é€€å‡º&quot;</span><br><br>  <br><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;è¯·è¾“å…¥é€‰æ‹© (a/s/q): &quot;</span> choice<br><br>  <br><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$choice</span> <span class="hljs-keyword">in</span><br><br>a) SELECTED_INDICES=$(<span class="hljs-built_in">seq</span> 0 $((PROJECT_COUNT - <span class="hljs-number">1</span>)));;<br><br>s)<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;å¯ç”¨é¡¹ç›®ï¼š&quot;</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> $(<span class="hljs-built_in">seq</span> 0 $((PROJECT_COUNT - <span class="hljs-number">1</span>))); <span class="hljs-keyword">do</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>) <span class="hljs-subst">$(get_project_info $i name)</span>&quot;</span><br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;è¯·è¾“å…¥é¡¹ç›®ç¼–å·ï¼ˆå¤šä¸ªç”¨ç©ºæ ¼åˆ†éš”ï¼‰: &quot;</span> -a indices<br><br>SELECTED_INDICES=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;indices[@]&#125;</span>&quot;</span><br><br>;;<br><br>q) <span class="hljs-built_in">exit</span> 0;;<br><br>*) red <span class="hljs-string">&quot;æ— æ•ˆé€‰æ‹©&quot;</span>; <span class="hljs-built_in">exit</span> 1;;<br><br><span class="hljs-keyword">esac</span><br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p>æä¾›çµæ´»çš„éƒ¨ç½²é€‰æ‹©ï¼Œæ”¯æŒå…¨é‡æˆ–é€‰æ‹©æ€§éƒ¨ç½²</p></li><li><p>ä½¿ç”¨æ•°ç»„å­˜å‚¨ç”¨æˆ·é€‰æ‹©ï¼Œä¾¿äºåç»­å¤„ç†</p></li><li><p>æ¸…æ™°çš„ç”¨æˆ·ç•Œé¢ï¼Œé™ä½ä½¿ç”¨é—¨æ§›</p></li></ul><h3 id="ç¬¬äº”æ­¥ï¼šæ ¸å¿ƒéƒ¨ç½²å‡½æ•°"><a href="#ç¬¬äº”æ­¥ï¼šæ ¸å¿ƒéƒ¨ç½²å‡½æ•°" class="headerlink" title="ç¬¬äº”æ­¥ï¼šæ ¸å¿ƒéƒ¨ç½²å‡½æ•°"></a>ç¬¬äº”æ­¥ï¼šæ ¸å¿ƒéƒ¨ç½²å‡½æ•°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-function"><span class="hljs-title">deploy_project</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> index=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> PROJECT_NAME=$(get_project_info <span class="hljs-variable">$index</span> name)<br><br><span class="hljs-built_in">local</span> SERVER=$(get_project_info <span class="hljs-variable">$index</span> server)<br><br><span class="hljs-built_in">local</span> PORT=$(get_project_info <span class="hljs-variable">$index</span> port)<br><br><span class="hljs-built_in">local</span> TARGET_DIR=$(get_project_info <span class="hljs-variable">$index</span> target_dir)<br><br><span class="hljs-built_in">local</span> SRC_DIR=$(get_project_info <span class="hljs-variable">$index</span> src_dir)<br><br><span class="hljs-built_in">local</span> SSH_KEY=<span class="hljs-string">&quot;~/.ssh/id_rsa&quot;</span><br><br><span class="hljs-built_in">local</span> log_file=<span class="hljs-string">&quot;/tmp/deploy_<span class="hljs-variable">$&#123;PROJECT_NAME&#125;</span>_$$.log&quot;</span><br><br><span class="hljs-built_in">local</span> exit_code=0<br><br><span class="hljs-comment"># æ£€æŸ¥æºç›®å½•</span><br><br><span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$SRC_DIR</span>&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:æºç›®å½•ä¸å­˜åœ¨ (<span class="hljs-variable">$SRC_DIR</span>)&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-built_in">return</span> 1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># æ£€æŸ¥SSHè¿æ¥</span><br><br><span class="hljs-keyword">if</span> ! ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o ConnectTimeout=10 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;echo &#x27;SSHè¿æ¥æµ‹è¯•&#x27;&quot;</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:SSHè¿æ¥å¤±è´¥&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-built_in">return</span> 1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># å¤‡ä»½ç°æœ‰ç›®å½•</span><br><br><span class="hljs-keyword">if</span> ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;[ -d &#x27;<span class="hljs-variable">$TARGET_DIR</span>&#x27; ]&quot;</span>; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">local</span> backup_suffix=$(<span class="hljs-built_in">date</span> +%Y%m%d%H%M)<br><br><span class="hljs-built_in">local</span> dir_name=$(<span class="hljs-built_in">basename</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TARGET_DIR</span>&quot;</span>)<br><br><span class="hljs-built_in">local</span> BACKUP_NAME=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir_name&#125;</span>_back<span class="hljs-variable">$&#123;backup_suffix&#125;</span>&quot;</span><br><br><span class="hljs-built_in">local</span> backup_path=$(<span class="hljs-built_in">dirname</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TARGET_DIR</span>&quot;</span>)/<span class="hljs-variable">$BACKUP_NAME</span><br><br>ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;mv &#x27;<span class="hljs-variable">$TARGET_DIR</span>&#x27; &#x27;<span class="hljs-variable">$backup_path</span>&#x27;&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PROJECT_NAME</span> -&gt; <span class="hljs-variable">$BACKUP_NAME</span>&quot;</span> &gt; <span class="hljs-string">&quot;/tmp/renamed_<span class="hljs-variable">$&#123;PROJECT_NAME&#125;</span>_$$.tmp&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># æ‰§è¡ŒrsyncåŒæ­¥</span><br><br><span class="hljs-keyword">if</span> rsync -avz --delete --progress \<br><br>-e <span class="hljs-string">&quot;ssh -i <span class="hljs-variable">$SSH_KEY</span> -p <span class="hljs-variable">$PORT</span> -o BatchMode=yes -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null&quot;</span> \<br><br>--iconv=UTF-8-MAC,UTF-8 \<br><br>--partial \<br><br>--partial-dir=.rsync-partial \<br><br><span class="hljs-string">&quot;<span class="hljs-variable">$SRC_DIR</span>/&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>:<span class="hljs-variable">$TARGET_DIR</span>/&quot;</span> &gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span> 2&gt;&amp;1; <span class="hljs-keyword">then</span><br><br><span class="hljs-comment"># æ–‡ä»¶æ•°é‡æ ¡éªŒ</span><br><br>local_file_count=$(find <span class="hljs-string">&quot;<span class="hljs-variable">$SRC_DIR</span>&quot;</span> -<span class="hljs-built_in">type</span> f \( -name <span class="hljs-string">&quot;.*&quot;</span> -o -name <span class="hljs-string">&quot;*.tmp&quot;</span> -o -name <span class="hljs-string">&quot;*.log&quot;</span> -o -name <span class="hljs-string">&quot;.DS_Store&quot;</span> \) -prune -o -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">print</span> | <span class="hljs-built_in">wc</span> -l)<br><br>remote_file_count=$(ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;find <span class="hljs-variable">$TARGET_DIR</span> -type f \( -name &#x27;.*&#x27; -o -name &#x27;*.tmp&#x27; -o -name &#x27;*.log&#x27; -o -name &#x27;.DS_Store&#x27; \) -prune -o -type f -print | wc -l&quot;</span> 2&gt;/dev/null)<br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$local_file_count</span>&quot;</span> == <span class="hljs-string">&quot;<span class="hljs-variable">$remote_file_count</span>&quot;</span> &amp;&amp; <span class="hljs-string">&quot;<span class="hljs-variable">$local_file_count</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;SUCCESS:<span class="hljs-variable">$PROJECT_NAME</span>:<span class="hljs-variable">$local_file_count</span>&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-keyword">else</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:æ–‡ä»¶æ•°é‡ä¸åŒ¹é… (æœ¬åœ°:<span class="hljs-variable">$local_file_count</span>, è¿œç¨‹:<span class="hljs-variable">$remote_file_count</span>)&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br>exit_code=1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">else</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:rsyncåŒæ­¥å¤±è´¥&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br>exit_code=1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">return</span> <span class="hljs-variable">$exit_code</span><br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p><strong>åˆ†å±‚é”™è¯¯å¤„ç†</strong>ï¼šæ¯ä¸ªå…³é”®æ­¥éª¤éƒ½æœ‰ç‹¬ç«‹çš„é”™è¯¯æ£€æŸ¥</p></li><li><p><strong>æ™ºèƒ½å¤‡ä»½</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¤‡ä»½ç°æœ‰ç›®å½•ï¼Œä½¿ç”¨æ—¶é—´æˆ³é¿å…å†²çª</p></li><li><p><strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼šrsyncçš„<code>--partial</code>é€‰é¡¹æ”¯æŒä¸­æ–­åç»§ç»­ä¼ è¾“</p></li><li><p><strong>æ–‡ä»¶æ ¡éªŒ</strong>ï¼šé€šè¿‡æ–‡ä»¶æ•°é‡å¯¹æ¯”éªŒè¯éƒ¨ç½²å®Œæ•´æ€§</p></li><li><p><strong>çŠ¶æ€è®°å½•</strong>ï¼šä½¿ç”¨ä¸´æ—¶æ–‡ä»¶è®°å½•è¯¦ç»†çŠ¶æ€ï¼Œä¾¿äºçˆ¶è¿›ç¨‹å¤„ç†</p></li></ul><h3 id="ç¬¬å…­æ­¥ï¼šå¹¶å‘ç®¡ç†å’Œç»“æœå¤„ç†"><a href="#ç¬¬å…­æ­¥ï¼šå¹¶å‘ç®¡ç†å’Œç»“æœå¤„ç†" class="headerlink" title="ç¬¬å…­æ­¥ï¼šå¹¶å‘ç®¡ç†å’Œç»“æœå¤„ç†"></a>ç¬¬å…­æ­¥ï¼šå¹¶å‘ç®¡ç†å’Œç»“æœå¤„ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment"># å¹¶å‘æ§åˆ¶</span><br><br>MAX_CONCURRENT=3<br><br>current_jobs=0<br><br>job_pids=<span class="hljs-string">&quot;&quot;</span><br><br>job_names=<span class="hljs-string">&quot;&quot;</span><br><br>  <br><br><span class="hljs-comment"># éƒ¨ç½²æ‰€æœ‰é€‰ä¸­çš„é¡¹ç›®</span><br><br><span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> <span class="hljs-variable">$SELECTED_INDICES</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-comment"># æ§åˆ¶å¹¶å‘æ•°</span><br><br><span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$current_jobs</span> -ge <span class="hljs-variable">$MAX_CONCURRENT</span> ]]; <span class="hljs-keyword">do</span><br><br>wait_for_job<br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># å¯åŠ¨æ–°ä»»åŠ¡</span><br><br>deploy_project <span class="hljs-variable">$index</span> &amp;<br><br><span class="hljs-built_in">local</span> pid=$!<br><br>job_pids=<span class="hljs-string">&quot;<span class="hljs-variable">$job_pids</span> <span class="hljs-variable">$pid</span>&quot;</span><br><br>job_names=<span class="hljs-string">&quot;<span class="hljs-variable">$job_names</span> <span class="hljs-variable">$index</span>&quot;</span><br><br>current_jobs=$((current_jobs + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">done</span><br><br>  <br><br><span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span><br><br><span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$current_jobs</span> -gt 0 ]]; <span class="hljs-keyword">do</span><br><br>wait_for_job<br><br><span class="hljs-keyword">done</span><br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p><strong>å¹¶å‘é™åˆ¶</strong>ï¼šé€šè¿‡<code>MAX_CONCURRENT</code>æ§åˆ¶åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æ•°</p></li><li><p><strong>åŠ¨æ€ç­‰å¾…</strong>ï¼šä½¿ç”¨<code>wait_for_job</code>å‡½æ•°å¤„ç†å®Œæˆçš„ä»»åŠ¡</p></li><li><p><strong>çŠ¶æ€è·Ÿè¸ª</strong>ï¼šé€šè¿‡å­—ç¬¦ä¸²å­˜å‚¨PIDå’Œé¡¹ç›®åç§°ï¼Œä¾¿äºç®¡ç†</p></li></ul><h3 id="ç¬¬ä¸ƒæ­¥ï¼šç»“æœæ±‡æ€»å’Œå±•ç¤º"><a href="#ç¬¬ä¸ƒæ­¥ï¼šç»“æœæ±‡æ€»å’Œå±•ç¤º" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šç»“æœæ±‡æ€»å’Œå±•ç¤º"></a>ç¬¬ä¸ƒæ­¥ï¼šç»“æœæ±‡æ€»å’Œå±•ç¤º</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment"># æ˜¾ç¤ºæœ€ç»ˆç»“æœ</span><br><br><span class="hljs-built_in">echo</span><br><br><span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$RENAMED_DETAILS</span>&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br>blue <span class="hljs-string">&quot;ğŸ“ é‡å‘½åå¤‡ä»½çš„é¡¹ç›®ï¼š<span class="hljs-variable">$RENAMED_DETAILS</span>&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br>  <br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$SUCCESS_COUNT</span> -gt 0 ]]; <span class="hljs-keyword">then</span><br><br>green <span class="hljs-string">&quot;âœ… éƒ¨ç½²æˆåŠŸçš„é¡¹ç›®ï¼š<span class="hljs-variable">$SUCCESS_PROJECTS</span>&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br>  <br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$FAILED_COUNT</span> -gt 0 ]]; <span class="hljs-keyword">then</span><br><br>red <span class="hljs-string">&quot;âŒ éƒ¨ç½²å¤±è´¥çš„é¡¹ç›®ï¼š<span class="hljs-variable">$FAILED_PROJECTS</span>&quot;</span><br><br><span class="hljs-built_in">echo</span><br><br>red <span class="hljs-string">&quot;å¤±è´¥åŸå› ï¼š&quot;</span><br><br><span class="hljs-keyword">for</span> reason <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;FAILED_REASONS[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot; - <span class="hljs-variable">$reason</span>&quot;</span><br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-keyword">fi</span><br><br>  <br><br><span class="hljs-comment"># æ ¹æ®ç»“æœé€‰æ‹©é¢œè‰²</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$FAILED_COUNT</span> -eq 0 ]]; <span class="hljs-keyword">then</span><br><br>green <span class="hljs-string">&quot;éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² <span class="hljs-variable">$SUCCESS_COUNT</span> ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ <span class="hljs-variable">$FAILED_COUNT</span> ä¸ªé¡¹ç›®&quot;</span><br><br><span class="hljs-keyword">else</span><br><br>red <span class="hljs-string">&quot;éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² <span class="hljs-variable">$SUCCESS_COUNT</span> ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ <span class="hljs-variable">$FAILED_COUNT</span> ä¸ªé¡¹ç›®&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br></code></pre></td></tr></table></figure><p><strong>è®¾è®¡æ€è·¯</strong>ï¼š</p><ul><li><p><strong>åˆ†ç±»å±•ç¤º</strong>ï¼šåˆ†åˆ«æ˜¾ç¤ºå¤‡ä»½ã€æˆåŠŸã€å¤±è´¥çš„é¡¹ç›®</p></li><li><p><strong>è¯¦ç»†åé¦ˆ</strong>ï¼šæä¾›å…·ä½“çš„å¤±è´¥åŸå› ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥</p></li><li><p><strong>åŠ¨æ€é¢œè‰²</strong>ï¼šæ ¹æ®éƒ¨ç½²ç»“æœé€‰æ‹©ä¸åŒçš„é¢œè‰²æ˜¾ç¤º</p></li></ul><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment">#!/bin/bash</span><br><br>  <br><br><span class="hljs-comment"># -------------------------------------------------</span><br><br><span class="hljs-comment"># deploy.sh â€” ä¸€é”®æŠŠæœ¬åœ°æ–‡ä»¶/ç›®å½•æ¨åˆ°è¿œç«¯ Linux æœåŠ¡å™¨</span><br><br><span class="hljs-comment"># ä¾èµ–: rsync (æœ¬åœ°+è¿œç«¯éƒ½è¦æœ‰), jq (ç”¨äºè§£æJSON)</span><br><br><span class="hljs-comment"># -------------------------------------------------</span><br><br><span class="hljs-comment"># ä» deploy.json è¯»å–é…ç½®å¹¶éå†æ¨é€</span><br><br>  <br><br><span class="hljs-comment"># é¢œè‰²è¾“å‡ºå‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">green</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[32m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br><span class="hljs-function"><span class="hljs-title">red</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[31m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br><span class="hljs-function"><span class="hljs-title">yellow</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[33m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br><span class="hljs-function"><span class="hljs-title">blue</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\033[34m%b\033[0m\n&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span>; &#125;<br><br>  <br><br><span class="hljs-comment"># è¿›åº¦æ¡å‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">progress_bar</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> current=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> total=<span class="hljs-variable">$2</span><br><br><span class="hljs-built_in">local</span> width=50<br><br><span class="hljs-built_in">local</span> percentage=$((current * <span class="hljs-number">100</span> / total))<br><br><span class="hljs-built_in">local</span> filled=$((current * width / total))<br><br><span class="hljs-built_in">local</span> empty=$((width - filled))<br><br>  <br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;\r\033[36m[&#x27;</span><br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;%*s&#x27;</span> <span class="hljs-variable">$filled</span> | <span class="hljs-built_in">tr</span> <span class="hljs-string">&#x27; &#x27;</span> <span class="hljs-string">&#x27;#&#x27;</span><br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;%*s&#x27;</span> <span class="hljs-variable">$empty</span> | <span class="hljs-built_in">tr</span> <span class="hljs-string">&#x27; &#x27;</span> <span class="hljs-string">&#x27;-&#x27;</span><br><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&#x27;] %d%%\033[0m&#x27;</span> <span class="hljs-variable">$percentage</span><br><br>&#125;<br><br>  <br><br><span class="hljs-comment"># æ£€æŸ¥ä¾èµ–</span><br><br><span class="hljs-built_in">command</span> -v rsync &gt;/dev/null || &#123; red <span class="hljs-string">&quot;è¯·å…ˆå®‰è£… rsync&quot;</span>; <span class="hljs-built_in">exit</span> 1; &#125;<br><br><span class="hljs-built_in">command</span> -v jq &gt;/dev/null || &#123; red <span class="hljs-string">&quot;è¯·å…ˆå®‰è£… jq&quot;</span>; <span class="hljs-built_in">exit</span> 1; &#125;<br><br>  <br><br><span class="hljs-comment"># é…ç½®æ–‡ä»¶</span><br><br>DEPLOY_CONFIG=<span class="hljs-string">&quot;scripts/deploy.json&quot;</span><br><br>[[ -f <span class="hljs-string">&quot;<span class="hljs-variable">$DEPLOY_CONFIG</span>&quot;</span> ]] || &#123; red <span class="hljs-string">&quot;é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼š<span class="hljs-variable">$DEPLOY_CONFIG</span>&quot;</span>; <span class="hljs-built_in">exit</span> 1; &#125;<br><br>  <br><br><span class="hljs-comment"># è¯»å–é¡¹ç›®æ•°æ®</span><br><br>PROJECTS_DATA=$(jq -r <span class="hljs-string">&#x27;.&#x27;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$DEPLOY_CONFIG</span>&quot;</span>)<br><br>PROJECT_COUNT=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PROJECTS_DATA</span>&quot;</span> | jq <span class="hljs-string">&#x27;length&#x27;</span>)<br><br>  <br><br><span class="hljs-comment"># è·å–é¡¹ç›®ä¿¡æ¯çš„è¾…åŠ©å‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">get_project_info</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> index=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> field=<span class="hljs-variable">$2</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PROJECTS_DATA</span>&quot;</span> | jq -r <span class="hljs-string">&quot;.[<span class="hljs-variable">$index</span>].<span class="hljs-variable">$field</span>&quot;</span><br><br>&#125;<br><br>  <br><br><span class="hljs-comment"># è·å–é¡¹ç›®åç§°çš„è¾…åŠ©å‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">get_project_name</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> pid=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> index=0<br><br><span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> <span class="hljs-variable">$job_pids</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$p</span> -eq <span class="hljs-variable">$pid</span> ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">local</span> name_index=0<br><br><span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> <span class="hljs-variable">$job_names</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$name_index</span> -eq <span class="hljs-variable">$index</span> ]]; <span class="hljs-keyword">then</span><br><br>get_project_info <span class="hljs-variable">$n</span> name<br><br><span class="hljs-built_in">return</span><br><br><span class="hljs-keyword">fi</span><br><br>name_index=$((name_index + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-keyword">fi</span><br><br>index=$((index + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">done</span><br><br>&#125;<br><br>  <br><br><span class="hljs-comment"># ä»PIDåˆ—è¡¨ä¸­ç§»é™¤æŒ‡å®šPID</span><br><br><span class="hljs-function"><span class="hljs-title">remove_pid</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> target_pid=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> new_pids=<span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-built_in">local</span> new_names=<span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-built_in">local</span> index=0<br><br><span class="hljs-keyword">for</span> pid <span class="hljs-keyword">in</span> <span class="hljs-variable">$job_pids</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$pid</span> -ne <span class="hljs-variable">$target_pid</span> ]]; <span class="hljs-keyword">then</span><br><br>new_pids=<span class="hljs-string">&quot;<span class="hljs-variable">$new_pids</span> <span class="hljs-variable">$pid</span>&quot;</span><br><br><span class="hljs-comment"># è·å–å¯¹åº”çš„é¡¹ç›®åç§°</span><br><br><span class="hljs-built_in">local</span> name_index=0<br><br><span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> <span class="hljs-variable">$job_names</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$name_index</span> -eq <span class="hljs-variable">$index</span> ]]; <span class="hljs-keyword">then</span><br><br>new_names=<span class="hljs-string">&quot;<span class="hljs-variable">$new_names</span> <span class="hljs-variable">$name</span>&quot;</span><br><br><span class="hljs-built_in">break</span><br><br><span class="hljs-keyword">fi</span><br><br>name_index=$((name_index + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-keyword">fi</span><br><br>index=$((index + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">done</span><br><br>job_pids=<span class="hljs-string">&quot;<span class="hljs-variable">$new_pids</span>&quot;</span><br><br>job_names=<span class="hljs-string">&quot;<span class="hljs-variable">$new_names</span>&quot;</span><br><br>&#125;<br><br>  <br><br><span class="hljs-comment"># ç­‰å¾…ä½œä¸šå®Œæˆçš„å‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">wait_for_job</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> completed_pid<br><br><span class="hljs-keyword">for</span> pid <span class="hljs-keyword">in</span> <span class="hljs-variable">$job_pids</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-keyword">if</span> ! <span class="hljs-built_in">kill</span> -0 <span class="hljs-variable">$pid</span> 2&gt;/dev/null; <span class="hljs-keyword">then</span><br><br>completed_pid=<span class="hljs-variable">$pid</span><br><br><span class="hljs-built_in">break</span><br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$completed_pid</span>&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">local</span> project_name=$(get_project_name <span class="hljs-variable">$completed_pid</span>)<br><br><span class="hljs-built_in">local</span> log_file=<span class="hljs-string">&quot;/tmp/deploy_<span class="hljs-variable">$&#123;project_name&#125;</span>_$$.log&quot;</span><br><br><span class="hljs-comment"># æ£€æŸ¥éƒ¨ç½²ç»“æœ</span><br><br><span class="hljs-keyword">if</span> grep -q <span class="hljs-string">&quot;SUCCESS:<span class="hljs-variable">$project_name</span>:&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span>; <span class="hljs-keyword">then</span><br><br><span class="hljs-comment"># è·å–æ–‡ä»¶æ•°é‡ä¿¡æ¯</span><br><br>file_count=$(grep <span class="hljs-string">&quot;SUCCESS:<span class="hljs-variable">$project_name</span>:&quot;</span> <span class="hljs-string">&quot;/tmp/deploy_<span class="hljs-variable">$&#123;project_name&#125;</span>_$$.log&quot;</span> | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">&#x27;:&#x27;</span> -f3)<br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$SUCCESS_COUNT</span> -eq 0 ]]; <span class="hljs-keyword">then</span><br><br>SUCCESS_PROJECTS=<span class="hljs-string">&quot;<span class="hljs-variable">$project_name</span> -&gt; å…±<span class="hljs-variable">$&#123;file_count&#125;</span>ä¸ªæ–‡ä»¶&quot;</span><br><br><span class="hljs-keyword">else</span><br><br>SUCCESS_PROJECTS=<span class="hljs-string">&quot;<span class="hljs-variable">$SUCCESS_PROJECTS</span>, <span class="hljs-variable">$project_name</span> -&gt; å…±<span class="hljs-variable">$&#123;file_count&#125;</span>ä¸ªæ–‡ä»¶&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br>SUCCESS_COUNT=$((SUCCESS_COUNT + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">else</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$FAILED_COUNT</span> -eq 0 ]]; <span class="hljs-keyword">then</span><br><br>FAILED_PROJECTS=<span class="hljs-string">&quot;<span class="hljs-variable">$project_name</span>&quot;</span><br><br><span class="hljs-keyword">else</span><br><br>FAILED_PROJECTS=<span class="hljs-string">&quot;<span class="hljs-variable">$FAILED_PROJECTS</span>, <span class="hljs-variable">$project_name</span>&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br>FAILED_COUNT=$((FAILED_COUNT + <span class="hljs-number">1</span>))<br><br><span class="hljs-comment"># è·å–å¤±è´¥åŸå› </span><br><br><span class="hljs-built_in">local</span> reason=$(grep <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$project_name</span>:&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span> | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">&#x27;:&#x27;</span> -f3-)<br><br>FAILED_REASONS+=(<span class="hljs-string">&quot;<span class="hljs-variable">$project_name</span>: <span class="hljs-variable">$reason</span>&quot;</span>)<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰é‡å‘½åè®°å½•</span><br><br><span class="hljs-keyword">if</span> [[ -f <span class="hljs-string">&quot;/tmp/renamed_<span class="hljs-variable">$&#123;project_name&#125;</span>_$$.tmp&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">local</span> renamed_info=$(<span class="hljs-built_in">cat</span> <span class="hljs-string">&quot;/tmp/renamed_<span class="hljs-variable">$&#123;project_name&#125;</span>_$$.tmp&quot;</span>)<br><br><span class="hljs-keyword">if</span> [[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$RENAMED_DETAILS</span>&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br>RENAMED_DETAILS=<span class="hljs-string">&quot;<span class="hljs-variable">$renamed_info</span>&quot;</span><br><br><span class="hljs-keyword">else</span><br><br>RENAMED_DETAILS=<span class="hljs-string">&quot;<span class="hljs-variable">$RENAMED_DETAILS</span>, <span class="hljs-variable">$renamed_info</span>&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">rm</span> -f <span class="hljs-string">&quot;/tmp/renamed_<span class="hljs-variable">$&#123;project_name&#125;</span>_$$.tmp&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># æ¸…ç†æ—¥å¿—æ–‡ä»¶</span><br><br><span class="hljs-built_in">rm</span> -f <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-comment"># ä»PIDåˆ—è¡¨ä¸­ç§»é™¤</span><br><br>remove_pid <span class="hljs-variable">$completed_pid</span><br><br>current_jobs=$((current_jobs - <span class="hljs-number">1</span>))<br><br><span class="hljs-comment"># æ›´æ–°è¿›åº¦æ¡</span><br><br><span class="hljs-built_in">local</span> completed=$((TOTAL_JOBS - current_jobs))<br><br>progress_bar <span class="hljs-variable">$completed</span> <span class="hljs-variable">$TOTAL_JOBS</span><br><br><span class="hljs-keyword">fi</span><br><br>&#125;<br><br>  <br><br><span class="hljs-comment"># éƒ¨ç½²å•ä¸ªé¡¹ç›®çš„å‡½æ•°</span><br><br><span class="hljs-function"><span class="hljs-title">deploy_project</span></span>() &#123;<br><br><span class="hljs-built_in">local</span> index=<span class="hljs-variable">$1</span><br><br><span class="hljs-built_in">local</span> PROJECT_NAME=$(get_project_info <span class="hljs-variable">$index</span> name)<br><br><span class="hljs-built_in">local</span> SERVER=$(get_project_info <span class="hljs-variable">$index</span> server)<br><br><span class="hljs-built_in">local</span> PORT=$(get_project_info <span class="hljs-variable">$index</span> port)<br><br><span class="hljs-built_in">local</span> TARGET_DIR=$(get_project_info <span class="hljs-variable">$index</span> target_dir)<br><br><span class="hljs-built_in">local</span> SRC_DIR=$(get_project_info <span class="hljs-variable">$index</span> src_dir)<br><br><span class="hljs-built_in">local</span> SSH_KEY=<span class="hljs-string">&quot;~/.ssh/id_rsa&quot;</span><br><br><span class="hljs-built_in">local</span> log_file=<span class="hljs-string">&quot;/tmp/deploy_<span class="hljs-variable">$&#123;PROJECT_NAME&#125;</span>_$$.log&quot;</span><br><br><span class="hljs-built_in">local</span> exit_code=0<br><br><span class="hljs-comment"># æ£€æŸ¥æºç›®å½•</span><br><br><span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$SRC_DIR</span>&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:æºç›®å½•ä¸å­˜åœ¨ (<span class="hljs-variable">$SRC_DIR</span>)&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-built_in">return</span> 1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># æ£€æŸ¥SSHè¿æ¥</span><br><br><span class="hljs-keyword">if</span> ! ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o ConnectTimeout=10 -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;echo &#x27;SSHè¿æ¥æµ‹è¯•&#x27;&quot;</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:SSHè¿æ¥å¤±è´¥&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-built_in">return</span> 1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># å¤‡ä»½ç°æœ‰ç›®å½•</span><br><br><span class="hljs-keyword">if</span> ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;[ -d &#x27;<span class="hljs-variable">$TARGET_DIR</span>&#x27; ]&quot;</span>; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">local</span> backup_suffix=$(<span class="hljs-built_in">date</span> +%Y%m%d%H%M)<br><br><span class="hljs-built_in">local</span> dir_name=$(<span class="hljs-built_in">basename</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TARGET_DIR</span>&quot;</span>)<br><br><span class="hljs-built_in">local</span> BACKUP_NAME=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;dir_name&#125;</span>_back<span class="hljs-variable">$&#123;backup_suffix&#125;</span>&quot;</span><br><br><span class="hljs-built_in">local</span> backup_path=$(<span class="hljs-built_in">dirname</span> <span class="hljs-string">&quot;<span class="hljs-variable">$TARGET_DIR</span>&quot;</span>)/<span class="hljs-variable">$BACKUP_NAME</span><br><br>ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;mv &#x27;<span class="hljs-variable">$TARGET_DIR</span>&#x27; &#x27;<span class="hljs-variable">$backup_path</span>&#x27;&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$PROJECT_NAME</span> -&gt; <span class="hljs-variable">$BACKUP_NAME</span>&quot;</span> &gt; <span class="hljs-string">&quot;/tmp/renamed_<span class="hljs-variable">$&#123;PROJECT_NAME&#125;</span>_$$.tmp&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-comment"># æ‰§è¡ŒrsyncåŒæ­¥</span><br><br><span class="hljs-keyword">if</span> rsync -avz --delete --progress \<br><br>-e <span class="hljs-string">&quot;ssh -i <span class="hljs-variable">$SSH_KEY</span> -p <span class="hljs-variable">$PORT</span> -o BatchMode=yes -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null&quot;</span> \<br><br>--iconv=UTF-8-MAC,UTF-8 \<br><br>--partial \<br><br>--partial-dir=.rsync-partial \<br><br><span class="hljs-string">&quot;<span class="hljs-variable">$SRC_DIR</span>/&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>:<span class="hljs-variable">$TARGET_DIR</span>/&quot;</span> &gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span> 2&gt;&amp;1; <span class="hljs-keyword">then</span><br><br><span class="hljs-comment"># è®¡ç®—æ–‡ä»¶æ•°é‡æ ¡éªŒ</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;è®¡ç®—æ–‡ä»¶æ•°é‡...&quot;</span><br><br>local_file_count=$(find <span class="hljs-string">&quot;<span class="hljs-variable">$SRC_DIR</span>&quot;</span> -<span class="hljs-built_in">type</span> f \( -name <span class="hljs-string">&quot;.*&quot;</span> -o -name <span class="hljs-string">&quot;*.tmp&quot;</span> -o -name <span class="hljs-string">&quot;*.log&quot;</span> -o -name <span class="hljs-string">&quot;.DS_Store&quot;</span> \) -prune -o -<span class="hljs-built_in">type</span> f -<span class="hljs-built_in">print</span> | <span class="hljs-built_in">wc</span> -l)<br><br>remote_file_count=$(ssh -i <span class="hljs-string">&quot;<span class="hljs-variable">$SSH_KEY</span>&quot;</span> -p <span class="hljs-string">&quot;<span class="hljs-variable">$PORT</span>&quot;</span> -o BatchMode=<span class="hljs-built_in">yes</span> -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null <span class="hljs-string">&quot;<span class="hljs-variable">$SERVER</span>&quot;</span> <span class="hljs-string">&quot;find <span class="hljs-variable">$TARGET_DIR</span> -type f \( -name &#x27;.*&#x27; -o -name &#x27;*.tmp&#x27; -o -name &#x27;*.log&#x27; -o -name &#x27;.DS_Store&#x27; \) -prune -o -type f -print | wc -l&quot;</span> 2&gt;/dev/null)<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;æœ¬åœ°æ–‡ä»¶æ•°é‡: <span class="hljs-variable">$local_file_count</span>&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;è¿œç¨‹æ–‡ä»¶æ•°é‡: <span class="hljs-variable">$remote_file_count</span>&quot;</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$local_file_count</span>&quot;</span> == <span class="hljs-string">&quot;<span class="hljs-variable">$remote_file_count</span>&quot;</span> &amp;&amp; <span class="hljs-string">&quot;<span class="hljs-variable">$local_file_count</span>&quot;</span> -gt 0 ]]; <span class="hljs-keyword">then</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;âœ… æ–‡ä»¶æ•°é‡åŒ¹é…ï¼Œéƒ¨ç½²æˆåŠŸ&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;SUCCESS:<span class="hljs-variable">$PROJECT_NAME</span>:<span class="hljs-variable">$local_file_count</span>&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br><span class="hljs-keyword">else</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;âŒ æ–‡ä»¶æ•°é‡ä¸åŒ¹é…ï¼Œéƒ¨ç½²å¤±è´¥&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:æ–‡ä»¶æ•°é‡ä¸åŒ¹é… (æœ¬åœ°:<span class="hljs-variable">$local_file_count</span>, è¿œç¨‹:<span class="hljs-variable">$remote_file_count</span>)&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br>exit_code=1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">else</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;FAILED:<span class="hljs-variable">$PROJECT_NAME</span>:rsyncåŒæ­¥å¤±è´¥&quot;</span> &gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$log_file</span>&quot;</span><br><br>exit_code=1<br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">return</span> <span class="hljs-variable">$exit_code</span><br><br>&#125;<br><br>  <br><br><span class="hljs-comment"># ä¸»ç¨‹åºå¼€å§‹</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬å¯åŠ¨&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ğŸ“‹ å‘ç° <span class="hljs-variable">$PROJECT_COUNT</span> ä¸ªé…ç½®é¡¹ç›®&quot;</span><br><br>  <br><br><span class="hljs-comment"># ç”¨æˆ·é€‰æ‹©éƒ¨ç½²æ–¹å¼</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;è¯·é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼š&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;a) éƒ¨ç½²æ‰€æœ‰é¡¹ç›®&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;s) é€‰æ‹©ç‰¹å®šé¡¹ç›®&quot;</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;q) é€€å‡º&quot;</span><br><br>  <br><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;è¯·è¾“å…¥é€‰æ‹© (a/s/q): &quot;</span> choice<br><br>  <br><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$choice</span> <span class="hljs-keyword">in</span><br><br>a) SELECTED_INDICES=$(<span class="hljs-built_in">seq</span> 0 $((PROJECT_COUNT - <span class="hljs-number">1</span>)));;<br><br>s)<br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;å¯ç”¨é¡¹ç›®ï¼š&quot;</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> $(<span class="hljs-built_in">seq</span> 0 $((PROJECT_COUNT - <span class="hljs-number">1</span>))); <span class="hljs-keyword">do</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$i</span>) <span class="hljs-subst">$(get_project_info $i name)</span>&quot;</span><br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">&quot;è¯·è¾“å…¥é¡¹ç›®ç¼–å·ï¼ˆå¤šä¸ªç”¨ç©ºæ ¼åˆ†éš”ï¼‰: &quot;</span> -a indices<br><br>SELECTED_INDICES=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;indices[@]&#125;</span>&quot;</span><br><br>;;<br><br>q) <span class="hljs-built_in">exit</span> 0;;<br><br>*) red <span class="hljs-string">&quot;æ— æ•ˆé€‰æ‹©&quot;</span>; <span class="hljs-built_in">exit</span> 1;;<br><br><span class="hljs-keyword">esac</span><br><br>  <br><br><span class="hljs-comment"># åˆå§‹åŒ–å˜é‡</span><br><br>SUCCESS_COUNT=0<br><br>FAILED_COUNT=0<br><br>SUCCESS_PROJECTS=<span class="hljs-string">&quot;&quot;</span><br><br>FAILED_PROJECTS=<span class="hljs-string">&quot;&quot;</span><br><br>RENAMED_DETAILS=<span class="hljs-string">&quot;&quot;</span><br><br>FAILED_REASONS=()<br><br>MAX_CONCURRENT=3<br><br>current_jobs=0<br><br>job_pids=<span class="hljs-string">&quot;&quot;</span><br><br>job_names=<span class="hljs-string">&quot;&quot;</span><br><br>TOTAL_JOBS=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$SELECTED_INDICES</span> | <span class="hljs-built_in">wc</span> -w)<br><br>  <br><br><span class="hljs-built_in">echo</span><br><br>blue <span class="hljs-string">&quot;å¼€å§‹éƒ¨ç½² <span class="hljs-variable">$TOTAL_JOBS</span> ä¸ªé¡¹ç›®...&quot;</span><br><br>  <br><br><span class="hljs-comment"># éƒ¨ç½²æ‰€æœ‰é€‰ä¸­çš„é¡¹ç›®</span><br><br><span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> <span class="hljs-variable">$SELECTED_INDICES</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-comment"># æ§åˆ¶å¹¶å‘æ•°</span><br><br><span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$current_jobs</span> -ge <span class="hljs-variable">$MAX_CONCURRENT</span> ]]; <span class="hljs-keyword">do</span><br><br>wait_for_job<br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-comment"># å¯åŠ¨æ–°ä»»åŠ¡</span><br><br>deploy_project <span class="hljs-variable">$index</span> &amp;<br><br><span class="hljs-built_in">local</span> pid=$!<br><br>job_pids=<span class="hljs-string">&quot;<span class="hljs-variable">$job_pids</span> <span class="hljs-variable">$pid</span>&quot;</span><br><br>job_names=<span class="hljs-string">&quot;<span class="hljs-variable">$job_names</span> <span class="hljs-variable">$index</span>&quot;</span><br><br>current_jobs=$((current_jobs + <span class="hljs-number">1</span>))<br><br><span class="hljs-keyword">done</span><br><br>  <br><br><span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span><br><br><span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$current_jobs</span> -gt 0 ]]; <span class="hljs-keyword">do</span><br><br>wait_for_job<br><br><span class="hljs-keyword">done</span><br><br>  <br><br><span class="hljs-comment"># æ˜¾ç¤ºæœ€ç»ˆç»“æœ</span><br><br><span class="hljs-built_in">echo</span><br><br><span class="hljs-keyword">if</span> [[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$RENAMED_DETAILS</span>&quot;</span> ]]; <span class="hljs-keyword">then</span><br><br>blue <span class="hljs-string">&quot;ğŸ“ é‡å‘½åå¤‡ä»½çš„é¡¹ç›®ï¼š<span class="hljs-variable">$RENAMED_DETAILS</span>&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br>  <br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$SUCCESS_COUNT</span> -gt 0 ]]; <span class="hljs-keyword">then</span><br><br>green <span class="hljs-string">&quot;âœ… éƒ¨ç½²æˆåŠŸçš„é¡¹ç›®ï¼š<span class="hljs-variable">$SUCCESS_PROJECTS</span>&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br>  <br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$FAILED_COUNT</span> -gt 0 ]]; <span class="hljs-keyword">then</span><br><br>red <span class="hljs-string">&quot;âŒ éƒ¨ç½²å¤±è´¥çš„é¡¹ç›®ï¼š<span class="hljs-variable">$FAILED_PROJECTS</span>&quot;</span><br><br><span class="hljs-built_in">echo</span><br><br>red <span class="hljs-string">&quot;å¤±è´¥åŸå› ï¼š&quot;</span><br><br><span class="hljs-keyword">for</span> reason <span class="hljs-keyword">in</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;FAILED_REASONS[@]&#125;</span>&quot;</span>; <span class="hljs-keyword">do</span><br><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot; - <span class="hljs-variable">$reason</span>&quot;</span><br><br><span class="hljs-keyword">done</span><br><br><span class="hljs-keyword">fi</span><br><br>  <br><br><span class="hljs-comment"># æ ¹æ®ç»“æœé€‰æ‹©é¢œè‰²</span><br><br><span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$FAILED_COUNT</span> -eq 0 ]]; <span class="hljs-keyword">then</span><br><br>green <span class="hljs-string">&quot;éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² <span class="hljs-variable">$SUCCESS_COUNT</span> ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ <span class="hljs-variable">$FAILED_COUNT</span> ä¸ªé¡¹ç›®&quot;</span><br><br><span class="hljs-keyword">else</span><br><br>red <span class="hljs-string">&quot;éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² <span class="hljs-variable">$SUCCESS_COUNT</span> ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ <span class="hljs-variable">$FAILED_COUNT</span> ä¸ªé¡¹ç›®&quot;</span><br><br><span class="hljs-keyword">fi</span><br><br></code></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶ç¤ºä¾‹"><a href="#é…ç½®æ–‡ä»¶ç¤ºä¾‹" class="headerlink" title="é…ç½®æ–‡ä»¶ç¤ºä¾‹"></a>é…ç½®æ–‡ä»¶ç¤ºä¾‹</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs json"><br><span class="hljs-punctuation">[</span><br><br><span class="hljs-punctuation">&#123;</span><br><br><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;å‰ç«¯é¡¹ç›®&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;deploy@192.168.1.100&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2222</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;target_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/var/www/frontend&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;src_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist/frontend&quot;</span><br><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-punctuation">&#123;</span><br><br><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ç®¡ç†åå°&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;deploy@192.168.1.100&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2222</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;target_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/var/www/admin&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;src_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist/admin&quot;</span><br><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-punctuation">&#123;</span><br><br><span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;APIæœåŠ¡&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;server&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;deploy@192.168.1.101&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2222</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;target_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/var/www/api&quot;</span><span class="hljs-punctuation">,</span><br><br><span class="hljs-attr">&quot;src_dir&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;dist/api&quot;</span><br><br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-punctuation">]</span><br><br></code></pre></td></tr></table></figure><p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p><ul><li><p><code>name</code>: é¡¹ç›®åç§°ï¼Œç”¨äºæ˜¾ç¤ºå’Œæ—¥å¿—è®°å½•</p></li><li><p><code>server</code>: æœåŠ¡å™¨åœ°å€ï¼Œæ ¼å¼ä¸º <code>ç”¨æˆ·@ä¸»æœº</code></p></li><li><p><code>port</code>: SSHç«¯å£å·ï¼Œå»ºè®®ä½¿ç”¨éæ ‡å‡†ç«¯å£</p></li><li><p><code>target_dir</code>: è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ç›®æ ‡ç›®å½•</p></li><li><p><code>src_dir</code>: æœ¬åœ°æºç ç›®å½•ï¼Œç›¸å¯¹äºè„šæœ¬æ‰§è¡Œä½ç½®</p></li></ul><h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h2><h3 id="1-ç¯å¢ƒå‡†å¤‡"><a href="#1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1. ç¯å¢ƒå‡†å¤‡"></a>1. ç¯å¢ƒå‡†å¤‡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment"># å®‰è£…ä¾èµ–å·¥å…·</span><br><br><span class="hljs-comment"># Ubuntu/Debian</span><br><br><span class="hljs-built_in">sudo</span> apt-get install rsync jq<br><br>  <br><br><span class="hljs-comment"># CentOS/RHEL</span><br><br><span class="hljs-built_in">sudo</span> yum install rsync jq<br><br>  <br><br><span class="hljs-comment"># macOS</span><br><br>brew install rsync jq<br><br></code></pre></td></tr></table></figure><h3 id="2-SSHå¯†é’¥é…ç½®"><a href="#2-SSHå¯†é’¥é…ç½®" class="headerlink" title="2. SSHå¯†é’¥é…ç½®"></a>2. SSHå¯†é’¥é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment"># ç”ŸæˆSSHå¯†é’¥ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰</span><br><br>ssh-keygen -t rsa -b 4096<br><br>  <br><br><span class="hljs-comment"># å°†å…¬é’¥å¤åˆ¶åˆ°æœåŠ¡å™¨</span><br><br>ssh-copy-id user@server.example.com<br><br></code></pre></td></tr></table></figure><h3 id="3-é…ç½®æ–‡ä»¶è®¾ç½®"><a href="#3-é…ç½®æ–‡ä»¶è®¾ç½®" class="headerlink" title="3. é…ç½®æ–‡ä»¶è®¾ç½®"></a>3. é…ç½®æ–‡ä»¶è®¾ç½®</h3><p>åœ¨<code>scripts/deploy.json</code>ä¸­é…ç½®æ‚¨çš„é¡¹ç›®ä¿¡æ¯ï¼Œæ³¨æ„è„±æ•å¤„ç†ï¼š</p><ul><li><p>ä½¿ç”¨å†…ç½‘IPæˆ–åŸŸåæ›¿ä»£å…¬ç½‘IP</p></li><li><p>ä½¿ç”¨éæ ‡å‡†ç«¯å£</p></li><li><p>é…ç½®é€‚å½“çš„ç”¨æˆ·æƒé™</p></li></ul><h3 id="4-æ‰§è¡Œéƒ¨ç½²"><a href="#4-æ‰§è¡Œéƒ¨ç½²" class="headerlink" title="4. æ‰§è¡Œéƒ¨ç½²"></a>4. æ‰§è¡Œéƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-comment"># ç»™è„šæœ¬æ‰§è¡Œæƒé™</span><br><br><span class="hljs-built_in">chmod</span> +x scripts/deploy.sh<br><br>  <br><br><span class="hljs-comment"># æ‰§è¡Œéƒ¨ç½²</span><br><br>./scripts/deploy.sh<br><br></code></pre></td></tr></table></figure><h2 id="å®é™…ä½¿ç”¨ç¤ºä¾‹"><a href="#å®é™…ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="å®é™…ä½¿ç”¨ç¤ºä¾‹"></a>å®é™…ä½¿ç”¨ç¤ºä¾‹</h2><h3 id="1-è„šæœ¬æ‰§è¡Œè¿‡ç¨‹"><a href="#1-è„šæœ¬æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="1. è„šæœ¬æ‰§è¡Œè¿‡ç¨‹"></a>1. è„šæœ¬æ‰§è¡Œè¿‡ç¨‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>$ ./scripts/deploy.sh<br><br>  <br><br>ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬å¯åŠ¨<br><br>ğŸ“‹ å‘ç° 3 ä¸ªé…ç½®é¡¹ç›®<br><br>  <br><br>è¯·é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼š<br><br>a) éƒ¨ç½²æ‰€æœ‰é¡¹ç›®<br><br>s) é€‰æ‹©ç‰¹å®šé¡¹ç›®<br><br>q) é€€å‡º<br><br>  <br><br>è¯·è¾“å…¥é€‰æ‹© (a/s/q): a<br><br>  <br><br>å¼€å§‹éƒ¨ç½² 3 ä¸ªé¡¹ç›®...<br><br>  <br><br>[##################################################] 100%<br><br>  <br><br>ğŸ“ é‡å‘½åå¤‡ä»½çš„é¡¹ç›®ï¼šå‰ç«¯é¡¹ç›® -&gt; frontend_back202412230145, ç®¡ç†åå° -&gt; admin_back202412230145<br><br>âœ… éƒ¨ç½²æˆåŠŸçš„é¡¹ç›®ï¼šå‰ç«¯é¡¹ç›® -&gt; å…±1250ä¸ªæ–‡ä»¶, ç®¡ç†åå° -&gt; å…±892ä¸ªæ–‡ä»¶, APIæœåŠ¡ -&gt; å…±567ä¸ªæ–‡ä»¶<br><br>éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² 3 ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ 0 ä¸ªé¡¹ç›®<br><br></code></pre></td></tr></table></figure><h3 id="2-é€‰æ‹©æ€§éƒ¨ç½²"><a href="#2-é€‰æ‹©æ€§éƒ¨ç½²" class="headerlink" title="2. é€‰æ‹©æ€§éƒ¨ç½²"></a>2. é€‰æ‹©æ€§éƒ¨ç½²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>$ ./scripts/deploy.sh<br><br>  <br><br>ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬å¯åŠ¨<br><br>ğŸ“‹ å‘ç° 3 ä¸ªé…ç½®é¡¹ç›®<br><br>  <br><br>è¯·é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼š<br><br>a) éƒ¨ç½²æ‰€æœ‰é¡¹ç›®<br><br>s) é€‰æ‹©ç‰¹å®šé¡¹ç›®<br><br>q) é€€å‡º<br><br>  <br><br>è¯·è¾“å…¥é€‰æ‹© (a/s/q): s<br><br>  <br><br>å¯ç”¨é¡¹ç›®ï¼š<br><br>0) å‰ç«¯é¡¹ç›®<br><br>1) ç®¡ç†åå°<br><br>2) APIæœåŠ¡<br><br>  <br><br>è¯·è¾“å…¥é¡¹ç›®ç¼–å·ï¼ˆå¤šä¸ªç”¨ç©ºæ ¼åˆ†éš”ï¼‰: 0 2<br><br>  <br><br>å¼€å§‹éƒ¨ç½² 2 ä¸ªé¡¹ç›®...<br><br>  <br><br>[##################################################] 100%<br><br>  <br><br>âœ… éƒ¨ç½²æˆåŠŸçš„é¡¹ç›®ï¼šå‰ç«¯é¡¹ç›® -&gt; å…±1250ä¸ªæ–‡ä»¶, APIæœåŠ¡ -&gt; å…±567ä¸ªæ–‡ä»¶<br><br>éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² 2 ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ 0 ä¸ªé¡¹ç›®<br><br></code></pre></td></tr></table></figure><h3 id="3-éƒ¨ç½²å¤±è´¥å¤„ç†"><a href="#3-éƒ¨ç½²å¤±è´¥å¤„ç†" class="headerlink" title="3. éƒ¨ç½²å¤±è´¥å¤„ç†"></a>3. éƒ¨ç½²å¤±è´¥å¤„ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br>$ ./scripts/deploy.sh<br><br>  <br><br>ğŸš€ è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬å¯åŠ¨<br><br>ğŸ“‹ å‘ç° 3 ä¸ªé…ç½®é¡¹ç›®<br><br>  <br><br>è¯·é€‰æ‹©éƒ¨ç½²æ–¹å¼ï¼š<br><br>a) éƒ¨ç½²æ‰€æœ‰é¡¹ç›®<br><br>s) é€‰æ‹©ç‰¹å®šé¡¹ç›®<br><br>q) é€€å‡º<br><br>  <br><br>è¯·è¾“å…¥é€‰æ‹© (a/s/q): a<br><br>  <br><br>å¼€å§‹éƒ¨ç½² 3 ä¸ªé¡¹ç›®...<br><br>  <br><br>[##################################################] 100%<br><br>  <br><br>âœ… éƒ¨ç½²æˆåŠŸçš„é¡¹ç›®ï¼šå‰ç«¯é¡¹ç›® -&gt; å…±1250ä¸ªæ–‡ä»¶<br><br>âŒ éƒ¨ç½²å¤±è´¥çš„é¡¹ç›®ï¼šç®¡ç†åå°, APIæœåŠ¡<br><br>  <br><br>å¤±è´¥åŸå› ï¼š<br><br>- ç®¡ç†åå°: SSHè¿æ¥å¤±è´¥<br><br>- APIæœåŠ¡: æºç›®å½•ä¸å­˜åœ¨ (dist/api)<br><br>  <br><br>éƒ¨ç½²å®Œæˆï¼å…±éƒ¨ç½² 1 ä¸ªé¡¹ç›®ï¼Œå¤±è´¥ 2 ä¸ªé¡¹ç›®<br><br></code></pre></td></tr></table></figure><h2 id="è„šæœ¬ä¼˜åŠ¿"><a href="#è„šæœ¬ä¼˜åŠ¿" class="headerlink" title="è„šæœ¬ä¼˜åŠ¿"></a>è„šæœ¬ä¼˜åŠ¿</h2><h3 id="1-é«˜æ•ˆæ€§"><a href="#1-é«˜æ•ˆæ€§" class="headerlink" title="1. é«˜æ•ˆæ€§"></a>1. é«˜æ•ˆæ€§</h3><ul><li><p><strong>å¹¶å‘éƒ¨ç½²</strong>ï¼šå¤šä¸ªé¡¹ç›®åŒæ—¶è¿›è¡Œï¼Œå¤§å¹…æå‡æ•ˆç‡</p></li><li><p><strong>æ–­ç‚¹ç»­ä¼ </strong>ï¼šæ”¯æŒç½‘ç»œä¸­æ–­åç»§ç»­ä¼ è¾“</p></li><li><p><strong>å¢é‡åŒæ­¥</strong>ï¼šåªä¼ è¾“å˜æ›´çš„æ–‡ä»¶</p></li></ul><h3 id="2-å¯é æ€§"><a href="#2-å¯é æ€§" class="headerlink" title="2. å¯é æ€§"></a>2. å¯é æ€§</h3><ul><li><p><strong>æ™ºèƒ½å¤‡ä»½</strong>ï¼šè‡ªåŠ¨å¤‡ä»½ç°æœ‰é¡¹ç›®ï¼Œé¿å…æ•°æ®ä¸¢å¤±</p></li><li><p><strong>æ–‡ä»¶æ ¡éªŒ</strong>ï¼šéƒ¨ç½²å®ŒæˆåéªŒè¯æ–‡ä»¶å®Œæ•´æ€§</p></li><li><p><strong>é”™è¯¯å¤„ç†</strong>ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤±è´¥åŸå› </p></li></ul><h3 id="3-æ˜“ç”¨æ€§"><a href="#3-æ˜“ç”¨æ€§" class="headerlink" title="3. æ˜“ç”¨æ€§"></a>3. æ˜“ç”¨æ€§</h3><ul><li><p><strong>é…ç½®é©±åŠ¨</strong>ï¼šé€šè¿‡JSONæ–‡ä»¶ç®¡ç†é¡¹ç›®é…ç½®</p></li><li><p><strong>äº¤äº’é€‰æ‹©</strong>ï¼šæ”¯æŒå…¨é‡æˆ–é€‰æ‹©æ€§éƒ¨ç½²</p></li><li><p><strong>è¿›åº¦æ˜¾ç¤º</strong>ï¼šå®æ—¶æ˜¾ç¤ºéƒ¨ç½²è¿›åº¦å’ŒçŠ¶æ€</p></li></ul><h3 id="4-å®‰å…¨æ€§"><a href="#4-å®‰å…¨æ€§" class="headerlink" title="4. å®‰å…¨æ€§"></a>4. å®‰å…¨æ€§</h3><ul><li><p><strong>SSHå¯†é’¥è®¤è¯</strong>ï¼šé¿å…å¯†ç æ˜æ–‡ä¼ è¾“</p></li><li><p><strong>æ‰¹é‡æ¨¡å¼</strong>ï¼šé˜²æ­¢æ„å¤–äº¤äº’</p></li><li><p><strong>æƒé™æ§åˆ¶</strong>ï¼šæ”¯æŒä¸åŒç”¨æˆ·å’Œç«¯å£é…ç½®</p></li></ul><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸ªè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬é€šè¿‡åˆç†çš„è®¾è®¡å’Œå®ç°ï¼Œè§£å†³äº†ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼ä¸­çš„æ•ˆç‡ä½ä¸‹ã€å®¹æ˜“å‡ºé”™ç­‰é—®é¢˜ã€‚å®ƒæ”¯æŒå¤šé¡¹ç›®å¹¶å‘éƒ¨ç½²ã€æ™ºèƒ½å¤‡ä»½ã€æ–‡ä»¶æ ¡éªŒç­‰ä¼ä¸šçº§åŠŸèƒ½ï¼Œå¤§å¤§æå‡äº†éƒ¨ç½²çš„æ•ˆç‡å’Œå¯é æ€§ã€‚</p><p>è„šæœ¬é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªåŠŸèƒ½éƒ½æœ‰æ¸…æ™°çš„èŒè´£åˆ’åˆ†ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚é€šè¿‡é…ç½®æ–‡ä»¶é©±åŠ¨çš„æ–¹å¼ï¼Œä½¿å¾—æ·»åŠ æ–°é¡¹ç›®å˜å¾—éå¸¸ç®€å•ã€‚åŒæ—¶ï¼Œè¯¦ç»†çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€åé¦ˆï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚</p><p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“ç¯å¢ƒè°ƒæ•´å¹¶å‘æ•°é‡ã€SSHè¶…æ—¶æ—¶é—´ç­‰å‚æ•°ï¼Œä»¥è·å¾—æœ€ä½³çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p><hr><p><em>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†ä»é›¶æ„å»ºä¼ä¸šçº§è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬çš„å®Œæ•´è¿‡ç¨‹ï¼ŒåŒ…æ‹¬è®¾è®¡æ€è·¯ã€å®ç°ç»†èŠ‚å’Œä½¿ç”¨æ–¹æ³•ã€‚å¸Œæœ›å¯¹æ‚¨çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å®è·µæœ‰æ‰€å¸®åŠ©ï¼</em></p>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
      <category>Shell</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Rustå…¥é—¨</title>
    <link href="/posts/%E5%90%8E%E7%AB%AF/Rust/Rust%E5%85%A5%E9%97%A8/29388/"/>
    <url>/posts/%E5%90%8E%E7%AB%AF/Rust/Rust%E5%85%A5%E9%97%A8/29388/</url>
    
    <content type="html"><![CDATA[<h1 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h1><h2 id="RustRoverå®‰è£…"><a href="#RustRoverå®‰è£…" class="headerlink" title="RustRoverå®‰è£…"></a>RustRoverå®‰è£…</h2><p><a href="https://www.jetbrains.com/rust/">ä¸‹è½½åœ°å€</a></p><h2 id="Rustå®‰è£…"><a href="#Rustå®‰è£…" class="headerlink" title="Rustå®‰è£…"></a>Rustå®‰è£…</h2><p>ä¸‹è½½å®‰è£…ï¼š</p><ul><li><a href="https://www.rust-lang.org/tools/install">RUSTUP-INIT.EXE</a></li><li><a href="https://visualstudio.microsoft.com/zh-hans/">Visual Studio C++ Build Tools</a></li><li>å‡çº§ï¼š<code>rustup update</code></li><li>å¸è½½ï¼š<code>rustup self uninstall</code></li></ul><h1 id="åŸºæœ¬è¯­æ³•å’Œæ•°æ®ç±»å‹"><a href="#åŸºæœ¬è¯­æ³•å’Œæ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬è¯­æ³•å’Œæ•°æ®ç±»å‹"></a>åŸºæœ¬è¯­æ³•å’Œæ•°æ®ç±»å‹</h1><h2 id="å˜é‡-å¯å˜æ€§"><a href="#å˜é‡-å¯å˜æ€§" class="headerlink" title="å˜é‡&amp;å¯å˜æ€§"></a>å˜é‡&amp;å¯å˜æ€§</h2><ul><li>å£°æ˜å˜é‡<br>  <code>let some_number = 1;</code><br>  é»˜è®¤ï¼šå˜é‡æ˜¯ä¸å¯å˜çš„</li><li>å£°æ˜å¯å˜å˜é‡<br>  <code>let mut another_number = 2;</code></li></ul><h2 id="å¸¸é‡"><a href="#å¸¸é‡" class="headerlink" title="å¸¸é‡"></a>å¸¸é‡</h2><ul><li>å£°æ˜å¸¸é‡<br>  <code>const SPECIAL_NUMBER:i32 = 3;</code><br>  <code>const THREE_HOURS_IN_SECONDS:u32 = 60*60*3;</code><ul><li>ä½¿ç”¨<code>const</code>å£°æ˜</li><li>ä¸å¯ä»¥ä½¿ç”¨<code>mut</code></li><li>å¿…é¡»æ ‡æ³¨ç±»å‹</li><li>å¯åœ¨ä»»æ„ä½œç”¨åŸŸå£°æ˜</li><li>ä»…å¯ä»¥ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼èµ‹å€¼</li></ul></li></ul><h2 id="å˜é‡é®è”½-Shadowing"><a href="#å˜é‡é®è”½-Shadowing" class="headerlink" title="å˜é‡é®è”½(Shadowing)"></a>å˜é‡é®è”½(Shadowing)</h2><p><code>let my_number = 1;</code><br><code>let my_number = 2;</code></p><ul><li>å¯ä»¥ç”¨ä¹‹å‰å˜é‡ç›¸åŒçš„åå­—å£°æ˜ä¸€ä¸ªæ–°å˜é‡ï¼šç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªå˜é‡â€œé®è”½â€äº†</li><li>å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œåªä¸è¿‡åå­—ç›¸åŒ</li></ul><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><h3 id="Interger-æ•´æ•°"><a href="#Interger-æ•´æ•°" class="headerlink" title="Interger æ•´æ•°"></a>Interger æ•´æ•°</h3><p><code>let my_number:i32 = 1;</code></p><table><thead><tr><th>Lengthé•¿åº¦</th><th>Signedæœ‰ç¬¦å·</th><th>Unsignedæ— ç¬¦å·</th></tr></thead><tbody><tr><td>8-bit</td><td>i8</td><td>u8</td></tr><tr><td>16-bit</td><td>i16</td><td>u16</td></tr><tr><td>32-bit</td><td>i32</td><td>u32</td></tr><tr><td>64-bit</td><td>i64</td><td>u64</td></tr><tr><td>128-bit</td><td>i128</td><td>u128</td></tr><tr><td>arch</td><td>isize</td><td>usize</td></tr></tbody></table><table><thead><tr><th>Number literals æ•°å€¼å­—é¢å€¼</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>Decimal åè¿›åˆ¶</td><td>98_222</td></tr><tr><td>Hex åå…­è¿›åˆ¶</td><td>0xff</td></tr><tr><td>Octal å…«è¿›åˆ¶</td><td>0o77</td></tr><tr><td>Binary äºŒè¿›åˆ¶</td><td>0b1111_0000</td></tr><tr><td>Byte(u8 only) å­—èŠ‚</td><td>bâ€™Aâ€™</td></tr></tbody></table><h3 id="Floating-Point-æµ®ç‚¹"><a href="#Floating-Point-æµ®ç‚¹" class="headerlink" title="Floating Point æµ®ç‚¹"></a>Floating Point æµ®ç‚¹</h3><p><code>let my_floating_point:f64 = 2.5;</code></p><ul><li>f32ï¼š4å­—èŠ‚</li><li>f64ï¼š8å­—èŠ‚</li><li>éƒ½æœ‰ç¬¦å·</li></ul><h3 id="Boolean-å¸ƒå°”"><a href="#Boolean-å¸ƒå°”" class="headerlink" title="Boolean å¸ƒå°”"></a>Boolean å¸ƒå°”</h3><p><code>let this_is_bool:bool = true;</code></p><ul><li>ä¸¤ä¸ªå€¼ï¼štrueï¼Œfalse</li><li>1å­—èŠ‚</li></ul><h3 id="Character-å­—ç¬¦"><a href="#Character-å­—ç¬¦" class="headerlink" title="Character å­—ç¬¦"></a>Character å­—ç¬¦</h3><p><code>let this_is_chat:char = &#39;A&#39;;</code></p><ul><li>4å­—èŠ‚</li><li>è¡¨ç¤ºä¸€ä¸ªUnicodeæ ‡é‡å€¼</li></ul><h3 id="Tuple-å…ƒç»„"><a href="#Tuple-å…ƒç»„" class="headerlink" title="Tuple å…ƒç»„"></a>Tuple å…ƒç»„</h3><p><code>let my_tuple = (&#39;A&#39;,1,1.2);</code><br><code>my_tuple.0;</code></p><ul><li>å›ºå®šé•¿åº¦</li><li>å¯åŒ…å«ä¸åŒç±»å‹çš„å…ƒç´ </li></ul><h3 id="Arrayæ•°ç»„"><a href="#Arrayæ•°ç»„" class="headerlink" title="Arrayæ•°ç»„"></a>Arrayæ•°ç»„</h3><p><code>let my_array =[1,2,3];</code><br><code>let a=[3;5]; // 5,5,5,5,5</code></p><ul><li>å›ºå®šé•¿åº¦</li><li>å…ƒç´ ç±»å‹ç›¸åŒ</li></ul><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><ul><li>å‡½æ•°&amp;å˜é‡çš„å‘½åè§„èŒƒï¼šsnakecase:</li><li>æ‰€æœ‰å­—æ¯éƒ½å°å†™ï¼›</li><li>å•è¯ä¹‹é—´ç”¨_è¿æ¥ï¼›<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>()&#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;Hello&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">demo</span>(val:<span class="hljs-type">i32</span>,unit:<span class="hljs-type">char</span>)&#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;demo:&#123;&#125;&quot;</span>,val);<br><span class="hljs-keyword">return</span> val;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Control-Flow-æ§åˆ¶æµ"><a href="#Control-Flow-æ§åˆ¶æµ" class="headerlink" title="Control Flow æ§åˆ¶æµ"></a>Control Flow æ§åˆ¶æµ</h2><h3 id="ifè¡¨è¾¾å¼"><a href="#ifè¡¨è¾¾å¼" class="headerlink" title="ifè¡¨è¾¾å¼"></a>ifè¡¨è¾¾å¼</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>()&#123;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">number</span> =<span class="hljs-number">3</span>;<br><span class="hljs-keyword">if</span> number &lt; <span class="hljs-number">5</span> &#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;1&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> number % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>&#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;2&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;3&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¾ªç¯-loop-while-for"><a href="#å¾ªç¯-loop-while-for" class="headerlink" title="å¾ªç¯ loop while for"></a>å¾ªç¯ loop while for</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>()&#123;<br><span class="hljs-keyword">loop</span> &#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;loop&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>break: åœæ­¢loop</li><li>continue: è·³å‡ºæœ¬æ¬¡è¿­ä»£<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>()&#123;<br><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">number</span> = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">while</span> number != <span class="hljs-number">0</span> &#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;while number:&#123;number&#125;&quot;</span>);<br>number -= <span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>()&#123;<br><span class="hljs-keyword">let</span> <span class="hljs-variable">a</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><span class="hljs-keyword">for</span> <span class="hljs-variable">item</span> <span class="hljs-keyword">in</span> a &#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;for item:&#123;item&#125;&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>()&#123;<br><span class="hljs-keyword">for</span> <span class="hljs-variable">item</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">1</span>..<span class="hljs-number">4</span>).<span class="hljs-title function_ invoke__">rev</span>() &#123;<br><span class="hljs-built_in">println!</span>(<span class="hljs-string">&quot;for Range:&#123;item&#125;&quot;</span>);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>åç«¯</category>
      
      <category>Rust</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Rust</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windowså®‰è£…WSL</title>
    <link href="/posts/%E5%90%8E%E7%AB%AF/Windows%E5%AE%89%E8%A3%85WSL/61426/"/>
    <url>/posts/%E5%90%8E%E7%AB%AF/Windows%E5%AE%89%E8%A3%85WSL/61426/</url>
    
    <content type="html"><![CDATA[<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs txt">wsl --install<br><br>jhy@JHY:~$ lsb_release -a<br>No LSB modules are available.<br>Distributor ID: Ubuntu<br>Description:    Ubuntu 24.04.2 LTS<br>Release:        24.04<br>Codename:       noble<br><br>wsl --export Ubuntu D:\jhy\WSL\wsl-ubuntu24.04.tar<br>wsl --unregister Ubuntu<br>wsl --import Ubuntu D:\jhy\WSL\wsl-ubuntu D:\jhy\WSL\wsl-ubuntu24.04.tar<br>wsl -d Ubuntu <br># å…³é—­<br>wsl --shutdown<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">sudo apt update<br>sudo apt upgrade<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">sudo apt install nodejs npm<br><br>node --version<br>npm --version<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs txt">sudo npm install -g @anthropic-ai/claude-code<br>npm config set os linux<br><br>claude<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>WSL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WSL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Cursoræ’ä»¶æ æ”¹ä¸ºçºµå‘</title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/Tools/Cursor%E6%8F%92%E4%BB%B6%E6%A0%8F%E6%94%B9%E4%B8%BA%E7%BA%B5%E5%90%91/32536/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/Tools/Cursor%E6%8F%92%E4%BB%B6%E6%A0%8F%E6%94%B9%E4%B8%BA%E7%BA%B5%E5%90%91/32536/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¿®æ”¹-Cursor-æ’ä»¶æ æ”¹ä¸ºçºµå‘"><a href="#ä¿®æ”¹-Cursor-æ’ä»¶æ æ”¹ä¸ºçºµå‘" class="headerlink" title="ä¿®æ”¹ Cursor æ’ä»¶æ æ”¹ä¸ºçºµå‘"></a>ä¿®æ”¹ Cursor æ’ä»¶æ æ”¹ä¸ºçºµå‘</h1><ol><li><code>Ctrl+Shift+P</code>æ‰“å¼€æœç´¢<code>Open User Settings</code></li><li>è®¾ç½®ä¸­æœç´¢ï¼š<code>workbench.activityBar.orientation</code>ï¼Œä¿®æ”¹ä¸º <code>vertical</code> å³å¯ã€‚</li></ol>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Cursor</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutterä¸åŒç»ˆç«¯å±å¹•é€‚é…</title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/Flutter/Flutter%E4%B8%8D%E5%90%8C%E7%BB%88%E7%AB%AF%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D/33879/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/Flutter/Flutter%E4%B8%8D%E5%90%8C%E7%BB%88%E7%AB%AF%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D/33879/</url>
    
    <content type="html"><![CDATA[<h1 id="Flutterä¸åŒç»ˆç«¯å±å¹•é€‚é…"><a href="#Flutterä¸åŒç»ˆç«¯å±å¹•é€‚é…" class="headerlink" title="Flutterä¸åŒç»ˆç«¯å±å¹•é€‚é…"></a>Flutterä¸åŒç»ˆç«¯å±å¹•é€‚é…</h1><p><a href="https://github.com/OpenFlutter/flutter_screenutil/blob/master/README_CN.md">flutter_screenutilä¸­æ–‡å®˜æ–¹æ–‡æ¡£</a></p><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1. å®‰è£…"></a>1. å®‰è£…</h2><p>è¿è¡Œå‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">flutter pub add flutter_screenutil<br></code></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸Šå‘½ä»¤ä¼šåœ¨<code>pubspec.yaml</code>ä¸­æ·»åŠ :</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span><br>  <span class="hljs-string">...</span><br>  <span class="hljs-attr">flutter_screenutil:</span> <span class="hljs-string">^5.9.3</span><br></code></pre></td></tr></table></figure><h2 id="2-å°è£…"><a href="#2-å°è£…" class="headerlink" title="2. å°è£…"></a>2. å°è£…</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-comment">/// <span class="language-markdown">å±å¹•é€‚é…å·¥å…·ç±»</span></span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScreenAdapter</span> </span>&#123;<br>  <span class="hljs-comment">/// <span class="language-markdown">åˆå§‹åŒ–æ–¹æ³•</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> init(BuildContext context) &#123;<br>    ScreenUtil.init(<br>      context,<br>      designSize: _getDesignSize(context),<br>      minTextAdapt: <span class="hljs-keyword">true</span>,<br>      splitScreenMode: <span class="hljs-keyword">true</span>,<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">æ ¹æ®å±å¹•æ–¹å‘è·å–è®¾è®¡å°ºå¯¸</span></span><br>  <span class="hljs-keyword">static</span> Size _getDesignSize(BuildContext context) &#123;<br>    <span class="hljs-keyword">final</span> orientation = MediaQuery.of(context).orientation;<br>    <span class="hljs-keyword">return</span> orientation == Orientation.portrait<br>        ? <span class="hljs-keyword">const</span> Size(<span class="hljs-number">375</span>, <span class="hljs-number">812</span>) <span class="hljs-comment">// ç«–å±è®¾è®¡å°ºå¯¸</span><br>        : <span class="hljs-keyword">const</span> Size(<span class="hljs-number">812</span>, <span class="hljs-number">375</span>); <span class="hljs-comment">// æ¨ªå±è®¾è®¡å°ºå¯¸</span><br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">å®½åº¦é€‚é…</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> width(<span class="hljs-built_in">double</span> width) &#123;<br>    <span class="hljs-keyword">return</span> width.w;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">é«˜åº¦é€‚é…</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> height(<span class="hljs-built_in">double</span> height) &#123;<br>    <span class="hljs-keyword">return</span> height.h;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">å­—ä½“å¤§å°é€‚é…</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> fontSize(<span class="hljs-built_in">double</span> fontSize) &#123;<br>    <span class="hljs-keyword">return</span> fontSize.sp;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å±å¹•å®½åº¦</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> <span class="hljs-keyword">get</span> screenWidth =&gt; Get.width;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å±å¹•é«˜åº¦</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> <span class="hljs-keyword">get</span> screenHeight =&gt; Get.height;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è®¾å¤‡åƒç´ æ¯”</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> <span class="hljs-keyword">get</span> pixelRatio =&gt; Get.pixelRatio;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è®¾å¤‡ç±»å‹åˆ¤æ–­</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> isPhone =&gt; screenWidth &lt; <span class="hljs-number">600</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> isTablet =&gt; screenWidth &gt;= <span class="hljs-number">600</span> &amp;&amp; screenWidth &lt; <span class="hljs-number">1024</span>;<br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> isDesktop =&gt; screenWidth &gt;= <span class="hljs-number">1024</span>;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">å“åº”å¼å¸ƒå±€æ–¹æ³•</span></span><br>  <span class="hljs-keyword">static</span> T responsive&lt;T&gt;(&#123;<br>    <span class="hljs-keyword">required</span> T phone,<br>    T? tablet,<br>    T? desktop,<br>  &#125;) &#123;<br>    <span class="hljs-keyword">if</span> (isDesktop &amp;&amp; desktop != <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span> desktop;<br>    <span class="hljs-keyword">if</span> (isTablet &amp;&amp; tablet != <span class="hljs-keyword">null</span>) <span class="hljs-keyword">return</span> tablet;<br>    <span class="hljs-keyword">return</span> phone;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è¾¹è·é€‚é…</span></span><br>  <span class="hljs-keyword">static</span> EdgeInsets padding(&#123;<br>    <span class="hljs-built_in">double?</span> all,<br>    <span class="hljs-built_in">double?</span> horizontal,<br>    <span class="hljs-built_in">double?</span> vertical,<br>    <span class="hljs-built_in">double?</span> left,<br>    <span class="hljs-built_in">double?</span> right,<br>    <span class="hljs-built_in">double?</span> top,<br>    <span class="hljs-built_in">double?</span> bottom,<br>  &#125;) &#123;<br>    <span class="hljs-keyword">return</span> EdgeInsets.only(<br>      left: (left ?? horizontal ?? all ?? <span class="hljs-number">0</span>).w,<br>      right: (right ?? horizontal ?? all ?? <span class="hljs-number">0</span>).w,<br>      top: (top ?? vertical ?? all ?? <span class="hljs-number">0</span>).h,<br>      bottom: (bottom ?? vertical ?? all ?? <span class="hljs-number">0</span>).h,<br>    );<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">åœ†è§’é€‚é…</span></span><br>  <span class="hljs-keyword">static</span> BorderRadius radius([<span class="hljs-built_in">double</span> radius = <span class="hljs-number">0</span>]) &#123;<br>    <span class="hljs-keyword">return</span> BorderRadius.circular(radius.r);<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">æ¨ªç«–å±åˆ‡æ¢ç›‘å¬ï¼ˆæ­£ç¡®å®ç°ï¼‰</span></span><br>  <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> addOrientationListener(VoidCallback callback) &#123;<br>    <span class="hljs-comment">// ä½¿ç”¨ GetX çš„ Workers ç›‘å¬å±å¹•å˜åŒ–</span><br>    ever(Get.mediaQuery <span class="hljs-keyword">as</span> RxInterface&lt;<span class="hljs-built_in">Object?</span>&gt;, (_) =&gt; callback());<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å½“å‰å±å¹•æ–¹å‘</span></span><br>  <span class="hljs-keyword">static</span> Orientation <span class="hljs-keyword">get</span> orientation =&gt; Get.mediaQuery.orientation;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flutter</tag>
      
      <tag>GetX</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>get_cliå®‰è£…å’Œä½¿ç”¨</title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/Flutter/GetX%E9%9B%86%E6%88%90/40222/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/Flutter/GetX%E9%9B%86%E6%88%90/40222/</url>
    
    <content type="html"><![CDATA[<h1 id="GetXé›†æˆ"><a href="#GetXé›†æˆ" class="headerlink" title="GetXé›†æˆ"></a>GetXé›†æˆ</h1><p><a href="https://github.com/jonataslaw/getx/blob/master/README.zh-cn.md">GetXä¸­æ–‡å®˜æ–¹æ–‡æ¡£</a></p><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1. å®‰è£…"></a>1. å®‰è£…</h2><p>è¿è¡Œå‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">flutter pub add get<br></code></pre></td></tr></table></figure><p>è¿è¡Œä»¥ä¸Šå‘½ä»¤ä¼šåœ¨<code>pubspec.yaml</code>ä¸­æ·»åŠ :</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span><br>  <span class="hljs-string">...</span><br>  <span class="hljs-attr">get:</span> <span class="hljs-string">^4.6.5</span> <br></code></pre></td></tr></table></figure><h2 id="2-ç›®å½•ç»“æ„"><a href="#2-ç›®å½•ç»“æ„" class="headerlink" title="2. ç›®å½•ç»“æ„"></a>2. ç›®å½•ç»“æ„</h2><h3 id="2-1-GetX-Pattern"><a href="#2-1-GetX-Pattern" class="headerlink" title="2.1 GetX Pattern"></a>2.1 GetX Pattern</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">lib/<br>â”œâ”€app/               <span class="hljs-comment"># åº”ç”¨ä¸»ç›®å½•ï¼ˆå¯é€‰å±‚çº§ï¼‰</span><br>â”‚  â”œâ”€data/           <span class="hljs-comment"># æ•°æ®å±‚ï¼ˆå¯èƒ½å­˜æ”¾æ¨¡å‹æˆ–ä»“å‚¨ï¼‰</span><br>â”‚  â”œâ”€modules/        <span class="hljs-comment"># æ¨¡å—åŒ–ç›®å½•</span><br>â”‚  â”‚  â””â”€home/        <span class="hljs-comment"># é¦–é¡µæ¨¡å—</span><br>â”‚  â”‚     â”œâ”€bindings/ <span class="hljs-comment"># ä¾èµ–ç»‘å®š</span><br>â”‚  â”‚     â”œâ”€controllers/ <span class="hljs-comment"># æ§åˆ¶å™¨</span><br>â”‚  â”‚     â””â”€views/    <span class="hljs-comment"># é¡µé¢UI</span><br>â”‚  â””â”€routes/         <span class="hljs-comment"># è·¯ç”±é…ç½®</span><br>â””â”€main.dart            <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><p>2.2 æ¨èæ··åˆç»“æ„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">lib/<br>â”œâ”€app/               <span class="hljs-comment"># åº”ç”¨ä¸»ç›®å½•ï¼ˆå¯é€‰å±‚çº§ï¼‰</span><br>|  â”œâ”€controllers/    <span class="hljs-comment"># å…¨å±€æ§åˆ¶å™¨</span><br>|  â”œâ”€views/          <span class="hljs-comment"># å…¨å±€è§†å›¾</span><br>|  â”œâ”€core/           <span class="hljs-comment"># å¸¸é‡ã€å·¥å…·ã€ä¸»é¢˜</span><br>â”‚  |  â”œâ”€constants/<br>â”‚  |  â”œâ”€utils/<br>â”‚  |  â””â”€themes/<br>â”‚  â”œâ”€data/           <span class="hljs-comment"># æ•°æ®å±‚ï¼ˆå¯èƒ½å­˜æ”¾æ¨¡å‹æˆ–ä»“å‚¨ï¼‰</span><br>â”‚  â”œâ”€modules/        <span class="hljs-comment"># æ¨¡å—åŒ–ç›®å½•</span><br>|  â”œâ”€services/       <span class="hljs-comment"># å…¨å±€æœåŠ¡</span><br>â”‚  â”‚  â””â”€home/        <span class="hljs-comment"># é¦–é¡µæ¨¡å—</span><br>â”‚  â”‚     â”œâ”€bindings/ <span class="hljs-comment"># ä¾èµ–ç»‘å®š</span><br>â”‚  â”‚     â”œâ”€controllers/ <span class="hljs-comment"># æ§åˆ¶å™¨</span><br>â”‚  â”‚     â””â”€views/    <span class="hljs-comment"># é¡µé¢UI</span><br>â”‚  â””â”€routes/         <span class="hljs-comment"># è·¯ç”±é…ç½®</span><br>â””â”€main.dart            <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flutter</tag>
      
      <tag>GetX</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>get_cliå®‰è£…å’Œä½¿ç”¨</title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/Flutter/get_cli%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/40222/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/Flutter/get_cli%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/40222/</url>
    
    <content type="html"><![CDATA[<h1 id="get-cliå®‰è£…å’Œä½¿ç”¨"><a href="#get-cliå®‰è£…å’Œä½¿ç”¨" class="headerlink" title="get_cliå®‰è£…å’Œä½¿ç”¨"></a>get_cliå®‰è£…å’Œä½¿ç”¨</h1><h2 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1. å®‰è£…"></a>1. å®‰è£…</h2><p>è¿è¡Œå‘½ä»¤:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">flutter pub global activate get_cli<br></code></pre></td></tr></table></figure><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs maxima">C:\Users\x&gt;flutter pub global <span class="hljs-built_in">activate</span> get_cli<br>Flutter assets will be downloaded from https://storage.flutter-io.cn. Make sure you trust this source!<br>Package get_cli <span class="hljs-built_in">is</span> currently active <span class="hljs-built_in">at</span> version <span class="hljs-number">1.8</span><span class="hljs-number">.4</span>.<br>Resolving <span class="hljs-built_in">dependencies</span>...<br>The package get_cli <span class="hljs-built_in">is</span> already activated <span class="hljs-built_in">at</span> newest available version.<br>To recompile executables, <span class="hljs-built_in">first</span> run `flutter pub global <span class="hljs-built_in">deactivate</span> get_cli`.<br>Installed executables <span class="hljs-built_in">get</span> <span class="hljs-keyword">and</span> getx.<br>Warning: Pub installs executables into C:\Users\x\AppData\Local\Pub\Cache\bin, which <span class="hljs-built_in">is</span> <span class="hljs-keyword">not</span> on your path.<br>You can <span class="hljs-built_in">fix</span> that by adding that <span class="hljs-built_in">directory</span> to your <span class="hljs-built_in">system</span>&#x27;s <span class="hljs-string">&quot;Path&quot;</span> environment variable.<br>A web search <span class="hljs-keyword">for</span> <span class="hljs-string">&quot;configure windows path&quot;</span> will <span class="hljs-built_in">show</span> you how.<br>Activated get_cli <span class="hljs-number">1.8</span><span class="hljs-number">.4</span>.<br><br>Windows:å°† C:\Users\x\AppData\Local\Pub\Cache\bin æ·»åŠ è¿›ç¯å¢ƒå˜é‡ Pathé‡Œ<br></code></pre></td></tr></table></figure><h2 id="2-éªŒè¯å®‰è£…"><a href="#2-éªŒè¯å®‰è£…" class="headerlink" title="2. éªŒè¯å®‰è£…"></a>2. éªŒè¯å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">C:\Users\x&gt;get -v<br>â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â€ƒâ€ƒ â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ•—â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•—<br>â–ˆâ–ˆâ•”â•â•â•â•â•â–‘â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â€ƒ â€ƒâ–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘<br>â–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•—â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â€ƒ â€ƒâ–ˆâ–ˆâ•‘â–‘â–‘â•šâ•â•â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘<br>â–ˆâ–ˆâ•‘â–‘â–‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â€ƒ â€ƒâ–ˆâ–ˆâ•‘â–‘â–‘â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ•‘<br>â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–‘â–‘â–‘â–ˆâ–ˆâ•‘â–‘â–‘â–‘â€ƒ â€ƒâ•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘<br>â–‘â•šâ•â•â•â•â•â•â–‘â•šâ•â•â•â•â•â•â•â–‘â–‘â–‘â•šâ•â•â–‘â–‘â–‘â€ƒ â€ƒâ–‘â•šâ•â•â•â•â•â–‘â•šâ•â•â•â•â•â•â• â•šâ•â•<br><br>Version: 1.8.4<br><br>Time: 66 Milliseconds<br></code></pre></td></tr></table></figure><h2 id="3-ä½¿ç”¨"><a href="#3-ä½¿ç”¨" class="headerlink" title="3. ä½¿ç”¨"></a>3. ä½¿ç”¨</h2><table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>æ–°å»ºé¡¹ç›®</td><td>get create project</td><td>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‰§è¡ŒæœŸé—´ä¼šé€‰æ‹©å‡ ä¸ªå±æ€§ï¼Œä¸€è·¯ä¸‹å»å°±è¡Œäº†</td></tr><tr><td>åˆå§‹åŒ–</td><td>get init</td><td>æ–°å»ºé¡¹ç›®é‡Œä¹Ÿä¼šæ‰§è¡Œè¿™æ­¥ï¼Œæ¸…ç©ºlibæ–‡ä»¶å¤¹å†…å®¹ï¼Œå¡«å……ä¸ºåˆå§‹çš„ç›®å½•ç»“æ„</td></tr><tr><td>åˆ›å»ºé¡µé¢</td><td>get create page:é¡µé¢åå­—</td><td>ä¼šåˆ›å»ºview, controller ï¼Œbinding å’Œ routes</td></tr><tr><td>åˆ›å»ºæ§åˆ¶å™¨</td><td>get create controller:test</td><td>æŒ‡å®šæ–‡ä»¶å¤¹ä¸ç”¨å†™å®Œæ•´è·¯å¾„æœ«çº§åå­—å°±è¡Œ</td></tr><tr><td>åˆ›å»ºæ§åˆ¶å™¨</td><td>get create controller:auth</td><td>ç”¨æ¨¡ç‰ˆæˆ–è€…urlåˆ›å»ºæ§åˆ¶å™¨</td></tr><tr><td>åˆ›å»ºview</td><td>get create view:name</td><td>åˆ›å»ºview</td></tr><tr><td>å›½é™…åŒ–</td><td>get generate locales assets&#x2F;locales</td><td>éœ€è¦åœ¨æŒ‡å®šç›®å½•åˆ›å»ºå¯¹åº”jsonæ–‡ä»¶</td></tr><tr><td>åˆ›å»ºå®ä½“ç±»</td><td>get generate model on home with assets&#x2F;models&#x2F;user.json</td><td>éœ€è¦åœ¨æŒ‡å®šç›®å½•åˆ›å»ºå¯¹åº”jsonæ–‡ä»¶</td></tr></tbody></table><p>å…¶ä»–å‘½ä»¤å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£: <a href="https://github.com/jonataslaw/get_cli/blob/master/README-zh_CN.md">get_cliä¸­æ–‡å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>Flutter</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flutter</tag>
      
      <tag>get_cli</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Flutter GetX å®æˆ˜&lt;å°ç±³å•†åŸ&gt;</title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/FlutterGetX%E5%AE%9E%E6%88%98/64979/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/FlutterGetX%E5%AE%9E%E6%88%98/64979/</url>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…get-cli"><a href="#å®‰è£…get-cli" class="headerlink" title="å®‰è£…get_cli"></a>å®‰è£…get_cli</h2><p><code>flutter pub global activate get_cli</code></p><p>ä¸´æ—¶: <code>flutter pub global activate -s git https://github.com/jonataslaw/get_cli</code></p><p>win: <code>å®‰è£…è·¯å¾„æ·»åŠ è¿›pathç¯å¢ƒå˜é‡</code></p><h2 id="é›†æˆ"><a href="#é›†æˆ" class="headerlink" title="é›†æˆ"></a>é›†æˆ</h2><p>åˆ›å»ºå®Œé¡¹ç›®æ‰§è¡Œ<code>get init</code></p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vbnet"><span class="hljs-symbol">E:</span>\CoreCode\GS\XDS\xmshop&gt;<span class="hljs-keyword">get</span> init<br>? Which architecture <span class="hljs-keyword">do</span> you want <span class="hljs-keyword">to</span> use? (Use arrow keys)<br>&gt; GetX Pattern (<span class="hljs-keyword">by</span> KauÃª)<br>  CLEAN (<span class="hljs-keyword">by</span> Arktekko)<br>? ä½ çš„ <span class="hljs-keyword">lib</span> æ–‡ä»¶å¤¹ä¸æ˜¯ç©ºçš„ã€‚ä½ ç¡®å®šè¦è¦†ç›–ä½ çš„åº”ç”¨å—ï¼Ÿ <br> è­¦å‘Š:æ“ä½œä¸å¯é€† (Use arrow keys)<br>&gt; æ˜¯çš„!<br>  ä¸<br>âœ“  <span class="hljs-comment">&#x27;Package: get å·²å®‰è£…ï¼</span><br>âœ“  æ–‡ä»¶: main.dart åˆ›å»ºæˆåŠŸï¼Œè·¯å¾„: <span class="hljs-keyword">lib</span>\\main.dart<br>âœ“  æ–‡ä»¶: home_controller.dart åˆ›å»ºæˆåŠŸï¼Œè·¯å¾„: <span class="hljs-keyword">lib</span>\app\modules\home\\controllers\\home_controller.dart<br>âœ“  æ–‡ä»¶: home_view.dart åˆ›å»ºæˆåŠŸï¼Œè·¯å¾„: <span class="hljs-keyword">lib</span>\app\modules\home\\views\\home_view.dart<br>âœ“  æ–‡ä»¶: home_binding.dart åˆ›å»ºæˆåŠŸï¼Œè·¯å¾„: <span class="hljs-keyword">lib</span>\app\modules\home\\bindings\\home_binding.dart<br>âœ“  æ–‡ä»¶: app_routes.dart åˆ›å»ºæˆåŠŸï¼Œè·¯å¾„: <span class="hljs-keyword">lib</span>\\app\\routes\\app_routes.dart<br>âœ“  æ–‡ä»¶: app_pages.dart åˆ›å»ºæˆåŠŸï¼Œè·¯å¾„: <span class="hljs-keyword">lib</span>\\app\\routes\\app_pages.dart<br>âœ“  home route åˆ›å»ºæˆåŠŸ.<br>âœ“  Home page åˆ›å»ºæˆåŠŸ.<br>âœ“  GetX ç»“æ„ç”ŸæˆæˆåŠŸã€‚<br></code></pre></td></tr></table></figure><h3 id="getå‘½ä»¤åˆ›å»ºé¡µé¢"><a href="#getå‘½ä»¤åˆ›å»ºé¡µé¢" class="headerlink" title="getå‘½ä»¤åˆ›å»ºé¡µé¢"></a>getå‘½ä»¤åˆ›å»ºé¡µé¢</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:tabs<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:home<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:category<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:service<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:cart<br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:<span class="hljs-keyword">user</span><br><span class="hljs-keyword">get</span> <span class="hljs-keyword">create</span> page:serach<br></code></pre></td></tr></table></figure><h2 id="è·¯ç”±è®¾ç½®"><a href="#è·¯ç”±è®¾ç½®" class="headerlink" title="è·¯ç”±è®¾ç½®"></a>è·¯ç”±è®¾ç½®</h2><ol><li><p>ä¼˜åŒ–é¡µé¢è·¯ç”± åªç•™tabs</p></li><li><p>åœ¨tabs çš„bindingsé‡ŒåŠ è½½å…¶ä»–é¡µé¢</p><p> <a href="E:\CoreCode\GS\XDS\xmshop\lib\app\modules\tabs\bindings\tabs_binding.dart">tabs_binding.dart</a> </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/tabs_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../home/controllers/home_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../category/controllers/category_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../give/controllers/give_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../cart/controllers/cart_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../user/controllers/user_controller.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsBinding</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Bindings</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> dependencies() &#123;<br>    Get.lazyPut&lt;TabsController&gt;(<br>      () =&gt; TabsController(),<br>    );<br>    Get.lazyPut&lt;HomeController&gt;(<br>      () =&gt; HomeController(),<br>    );<br>    Get.lazyPut&lt;CategoryController&gt;(<br>      () =&gt; CategoryController(),<br>    );<br>    Get.lazyPut&lt;GiveController&gt;(<br>      () =&gt; GiveController(),<br>    );<br>    Get.lazyPut&lt;CartController&gt;(<br>      () =&gt; CartController(),<br>    );<br>    Get.lazyPut&lt;UserController&gt;(<br>      () =&gt; UserController(),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="é…ç½®tabåˆ‡æ¢"><a href="#é…ç½®tabåˆ‡æ¢" class="headerlink" title="é…ç½®tabåˆ‡æ¢"></a>é…ç½®tabåˆ‡æ¢</h2><p>   bottomNavigationBar</p>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/tabs_controller.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">TabsController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> TabsView(&#123;Key? key&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Obx(() =&gt; Scaffold(<br>          appBar: AppBar(<br>            title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;TabsView&#x27;</span>),<br>            centerTitle: <span class="hljs-keyword">true</span>,<br>          ),<br>          body: Text(<span class="hljs-string">&quot;tab&quot;</span>),<br>          bottomNavigationBar: BottomNavigationBar(<br>            fixedColor: Colors.red,<br>            currentIndex: controller.currentIndex.value,<br>            type: BottomNavigationBarType.fixed,<br>            onTap: (index) &#123;<br>              controller.setCurrentIndex(index);<br>            &#125;,<br>            items: <span class="hljs-keyword">const</span> [<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.home),<br>                label: <span class="hljs-string">&quot;é¦–é¡µ&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.category),<br>                label: <span class="hljs-string">&quot;åˆ†ç±»&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.room_service),<br>                label: <span class="hljs-string">&quot;æœåŠ¡&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.shopping_cart),<br>                label: <span class="hljs-string">&quot;è´­ç‰©è½¦&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.people),<br>                label: <span class="hljs-string">&quot;æˆ‘çš„&quot;</span>,<br>              )<br>            ],<br>          ),<br>        ));<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  RxInt currentIndex = <span class="hljs-number">0</span>.obs;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onInit() &#123;<br>    <span class="hljs-keyword">super</span>.onInit();<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onClose() &#123;<br>    <span class="hljs-keyword">super</span>.onClose();<br>  &#125;<br><br>  <span class="hljs-keyword">void</span> setCurrentIndex(index) &#123;<br>    currentIndex.value = index;<br>    update();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="åˆ‡æ¢é¡µé¢"><a href="#åˆ‡æ¢é¡µé¢" class="headerlink" title="åˆ‡æ¢é¡µé¢"></a>åˆ‡æ¢é¡µé¢</h2>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/tabs_controller.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">TabsController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> TabsView(&#123;<span class="hljs-keyword">super</span>.key&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Obx(() =&gt; Scaffold(<br>          <span class="hljs-comment">// ç®€å•åˆ‡æ¢é¡µé¢</span><br>          <span class="hljs-comment">// body: controller.pages[controller.currentIndex.value],</span><br>          <span class="hljs-comment">// å¯å·¦å³æ»‘åŠ¨åˆ‡æ¢</span><br>          body: PageView(<br>            controller: controller.pageController,<br>            children: controller.pages,<br>            onPageChanged: (index) &#123;<br>              controller.setCurrentIndex(index);<br>            &#125;,<br>          ),<br>          bottomNavigationBar: BottomNavigationBar(<br>            fixedColor: Colors.red,<br>            currentIndex: controller.currentIndex.value,<br>            type: BottomNavigationBarType.fixed,<br>            onTap: (index) &#123;<br>              controller.setCurrentIndex(index);<br>              controller.pageController.jumpToPage(index);<br>            &#125;,<br>            items: <span class="hljs-keyword">const</span> [<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.home),<br>                label: <span class="hljs-string">&quot;é¦–é¡µ&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.category),<br>                label: <span class="hljs-string">&quot;åˆ†ç±»&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.room_service),<br>                label: <span class="hljs-string">&quot;æœåŠ¡&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.shopping_cart),<br>                label: <span class="hljs-string">&quot;è´­ç‰©è½¦&quot;</span>,<br>              ),<br>              BottomNavigationBarItem(<br>                icon: Icon(Icons.people),<br>                label: <span class="hljs-string">&quot;æˆ‘çš„&quot;</span>,<br>              )<br>            ],<br>          ),<br>        ));<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../cart/views/cart_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../category/views/category_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../give/views/give_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../home/views/home_view.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../user/views/user_view.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TabsController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  <span class="hljs-comment">// å½“å‰é€‰ä¸­tabçš„ç´¢å¼•</span><br>  RxInt currentIndex = <span class="hljs-number">0</span>.obs;<br><br>  <span class="hljs-comment">// é¡µé¢åˆ—è¡¨</span><br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;Widget&gt; pages = <span class="hljs-keyword">const</span> [<br>    HomeView(),<br>    CategoryView(),<br>    GiveView(),<br>    UserView(),<br>    CartView()<br>  ];<br><br>  PageController pageController = PageController(initialPage: <span class="hljs-number">0</span>);<br><br>  <span class="hljs-keyword">void</span> setCurrentIndex(index) &#123;<br>    currentIndex.value = index;<br>    update();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/home_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../../services/keepAliveWrapper.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">HomeController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> HomeView(&#123;<span class="hljs-keyword">super</span>.key&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">// é¡µé¢ç¼“å­˜</span><br>    <span class="hljs-keyword">return</span> KeepAliveWrapper(<br>        child: Scaffold(<br>            appBar: AppBar(<br>              title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&#x27;HomeView&#x27;</span>),<br>              centerTitle: <span class="hljs-keyword">true</span>,<br>            ),<br>            body: ListView(<br>              children: <span class="hljs-keyword">const</span> [<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;2222&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;567567567566666666666666666666&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;567567567&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;5675675667567&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>                ListTile(<br>                  title: Text(<span class="hljs-string">&#x27;111111111111&#x27;</span>),<br>                ),<br>              ],<br>            )));<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>   <figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KeepAliveWrapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> KeepAliveWrapper(<br>      &#123;<span class="hljs-keyword">super</span>.key, <span class="hljs-meta">@required</span> <span class="hljs-keyword">this</span>.child, <span class="hljs-keyword">this</span>.keepAlive = <span class="hljs-keyword">true</span>&#125;);<br><br>  <span class="hljs-keyword">final</span> Widget? child;<br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> keepAlive;<br><br>  <span class="hljs-meta">@override</span><br>  State&lt;KeepAliveWrapper&gt; createState() =&gt; _KeepAliveWrapperState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_KeepAliveWrapperState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">KeepAliveWrapper</span>&gt;</span><br><span class="hljs-class">    <span class="hljs-title">with</span> <span class="hljs-title">AutomaticKeepAliveClientMixin</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> widget.child!;<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-built_in">bool</span> <span class="hljs-keyword">get</span> wantKeepAlive =&gt; widget.keepAlive;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="ä¸åŒç»ˆç«¯å±å¹•é€‚é…"><a href="#ä¸åŒç»ˆç«¯å±å¹•é€‚é…" class="headerlink" title="ä¸åŒç»ˆç«¯å±å¹•é€‚é…"></a>ä¸åŒç»ˆç«¯å±å¹•é€‚é…</h2><p><a href="https://pub.dev/packages/flutter_screenutil">https://pub.dev/packages/flutter_screenutil</a></p><p><a href="https://github.com/OpenFlutter/flutter_screenutil/blob/master/README_CN.md">https://github.com/OpenFlutter/flutter_screenutil/blob/master/README_CN.md</a></p><p>pubspec.yaml</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">dependencies:</span><br><span class="hljs-symbol">  flutter:</span><br><span class="hljs-symbol">    sdk:</span> flutter<br>  <span class="hljs-meta"># add flutter_screenutil</span><br><span class="hljs-symbol">  flutter_screenutil:</span> ^<span class="hljs-number">5.9</span><span class="hljs-number">.3</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨çš„åœ°æ–¹å¼•å…¥</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;<br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">void</span> main() =&gt; runApp(MyApp());<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">//å¡«å…¥è®¾è®¡ç¨¿ä¸­è®¾å¤‡çš„å±å¹•å°ºå¯¸,å•ä½dp</span><br>    <span class="hljs-keyword">return</span> ScreenUtilInit(<br>      designSize: <span class="hljs-keyword">const</span> Size(<span class="hljs-number">360</span>, <span class="hljs-number">690</span>),<br>      minTextAdapt: <span class="hljs-keyword">true</span>,<br>      splitScreenMode: <span class="hljs-keyword">true</span>,<br>      builder: (context , child) &#123;<br>        <span class="hljs-keyword">return</span> MaterialApp(<br>          debugShowCheckedModeBanner: <span class="hljs-keyword">false</span>,<br>          title: <span class="hljs-string">&#x27;First Method&#x27;</span>,<br>          <span class="hljs-comment">// You can use the library anywhere in the app even in theme</span><br>          theme: ThemeData(<br>            primarySwatch: Colors.blue,<br>            textTheme: Typography.englishLike2018.apply(fontSizeFactor: <span class="hljs-number">1</span>.sp),<br>          ),<br>          home: child,<br>        );<br>      &#125;,<br>      child: <span class="hljs-keyword">const</span> HomePage(title: <span class="hljs-string">&#x27;First Method&#x27;</span>),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å°è£…screenutil"><a href="#å°è£…screenutil" class="headerlink" title="å°è£…screenutil"></a>å°è£…screenutil</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;<br><br><span class="hljs-comment">/// <span class="language-markdown">å±å¹•é€‚é…</span></span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScreenAdapter</span> </span>&#123;<br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å¯¹è±¡çš„é«˜åº¦å±æ€§</span></span><br>  <span class="hljs-keyword">static</span> height(<span class="hljs-built_in">num</span> v) &#123;<br>    <span class="hljs-keyword">return</span> v.h;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å¯¹è±¡çš„å®½åº¦å±æ€§</span></span><br>  <span class="hljs-keyword">static</span> width(<span class="hljs-built_in">num</span> v) &#123;<br>    <span class="hljs-keyword">return</span> v.w;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å¯¹è±¡çš„å­—ä½“å¤§å°å±æ€§</span></span><br>  <span class="hljs-keyword">static</span> fontSize(<span class="hljs-built_in">num</span> v) &#123;<br>    <span class="hljs-keyword">return</span> v.sp;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å±å¹•å®½åº¦</span></span><br>  <span class="hljs-keyword">static</span> getScreenWidth() &#123;<br>    <span class="hljs-comment">// return ScreenUtil().screenWidth;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>.sw;<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–å±å¹•é«˜åº¦</span></span><br>  <span class="hljs-keyword">static</span> getScreenHeight() &#123;<br>    <span class="hljs-comment">// return ScreenUtil().screenHeight;</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>.sh;<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="é€æ˜çŠ¶æ€æ "><a href="#é€æ˜çŠ¶æ€æ " class="headerlink" title="é€æ˜çŠ¶æ€æ "></a>é€æ˜çŠ¶æ€æ </h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// é…ç½®é€æ˜çš„çŠ¶æ€æ </span><br>SystemUiOverlayStyle systemUiOverlayStyle =<br>    <span class="hljs-keyword">const</span> SystemUiOverlayStyle(statusBarColor: Colors.transparent);<br>SystemChrome.setSystemUIOverlayStyle(systemUiOverlayStyle);<br></code></pre></td></tr></table></figure><h2 id="é€æ˜é¡¶éƒ¨å¯¼èˆª-ä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢åŠ¨ç”»"><a href="#é€æ˜é¡¶éƒ¨å¯¼èˆª-ä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢åŠ¨ç”»" class="headerlink" title="é€æ˜é¡¶éƒ¨å¯¼èˆª &amp; ä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢åŠ¨ç”»"></a>é€æ˜é¡¶éƒ¨å¯¼èˆª &amp; ä¸Šä¸‹æ»‘åŠ¨åˆ‡æ¢åŠ¨ç”»</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// home_view.dart</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:xmshop/app/services/hyIcon.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:xmshop/app/services/screenAdapter.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../controllers/home_controller.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;../../../services/keepAliveWrapper.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetView</span>&lt;<span class="hljs-title">HomeController</span>&gt; </span>&#123;<br>  <span class="hljs-keyword">const</span> HomeView(&#123;<span class="hljs-keyword">super</span>.key&#125;);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-comment">// é¡µé¢ç¼“å­˜</span><br>    <span class="hljs-keyword">return</span> KeepAliveWrapper(<br>        child: Scaffold(<br>            body: Stack(children: [<br>      ListView.builder(<br>          controller: controller.scrollController, <span class="hljs-comment">// ç»‘å®šæ§åˆ¶å™¨</span><br>          itemCount: <span class="hljs-number">20</span>,<br>          itemBuilder: (context, index) &#123;<br>            <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span>) &#123;<br>              <span class="hljs-keyword">return</span> SizedBox(<br>                width: ScreenAdapter.width(<span class="hljs-number">1080</span>),<br>                height: ScreenAdapter.height(<span class="hljs-number">682</span>),<br>                child: Image.network(<br>                  <span class="hljs-string">&quot;https://www.itying.com/images/focus/focus02.png&quot;</span>,<br>                  fit: BoxFit.cover,<br>                ),<br>              );<br>            &#125;<br>            <span class="hljs-keyword">return</span> ListTile(title: Text(<span class="hljs-string">&#x27;ç¬¬<span class="hljs-subst">$index</span>ä¸ªå…ƒç´ &#x27;</span>));<br>          &#125;),<br>      Positioned(<br>          top: <span class="hljs-number">0</span>,<br>          left: <span class="hljs-number">0</span>,<br>          right: <span class="hljs-number">0</span>,<br>          child: Obx(() =&gt; AppBar(<br>                leading: controller.flag.value<br>                    ? <span class="hljs-keyword">const</span> Text(<span class="hljs-string">&quot;&quot;</span>)<br>                    : <span class="hljs-keyword">const</span> Icon(<br>                        HyIcon.xiaomi,<br>                        color: Colors.white,<br>                      ),<br>                <span class="hljs-comment">// leading å®½åº¦</span><br>                leadingWidth:<br>                    controller.flag.value ? <span class="hljs-number">10</span> : ScreenAdapter.width(<span class="hljs-number">140</span>),<br>                <span class="hljs-comment">// åŠ¨ç”»å®¹å™¨</span><br>                title: AnimatedContainer(<br>                  <span class="hljs-comment">// æ”¹å˜å®½åº¦</span><br>                  width: controller.flag.value<br>                      ? ScreenAdapter.width(<span class="hljs-number">800</span>)<br>                      : ScreenAdapter.width(<span class="hljs-number">620</span>),<br>                  height: ScreenAdapter.height(<span class="hljs-number">96</span>),<br>                  decoration: BoxDecoration(<br>                      color: <span class="hljs-keyword">const</span> Color.fromARGB(<span class="hljs-number">200</span>, <span class="hljs-number">241</span>, <span class="hljs-number">236</span>, <span class="hljs-number">225</span>),<br>                      borderRadius:<br>                          BorderRadius.circular(ScreenAdapter.width(<span class="hljs-number">50</span>))),<br>                  duration: <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(milliseconds: <span class="hljs-number">300</span>),<br>                  child: Row(<br>                    crossAxisAlignment: CrossAxisAlignment.center,<br>                    children: [<br>                      Padding(<br>                        padding: EdgeInsets.fromLTRB(ScreenAdapter.width(<span class="hljs-number">34</span>), <span class="hljs-number">0</span>,<br>                            ScreenAdapter.width(<span class="hljs-number">10</span>), <span class="hljs-number">0</span>),<br>                        child: Icon(<br>                          Icons.search,<br>                          size: ScreenAdapter.fontSize(<span class="hljs-number">40</span>),<br>                        ),<br>                      ),<br>                      Text(<br>                        <span class="hljs-string">&quot;æ‰‹æœº&quot;</span>,<br>                        style: TextStyle(<br>                            fontSize: ScreenAdapter.fontSize(<span class="hljs-number">32</span>),<br>                            color: Colors.black54),<br>                      )<br>                    ],<br>                  ),<br>                ),<br>                centerTitle: <span class="hljs-keyword">true</span>,<br>                backgroundColor:<br>                    controller.flag.value ? Colors.white : Colors.transparent,<br>                elevation: <span class="hljs-number">0</span>,<br>                actions: [<br>                  IconButton(<br>                      onPressed: () &#123;<br>                        Get.toNamed(<span class="hljs-string">&#x27;/cart&#x27;</span>);<br>                      &#125;,<br>                      icon: Icon(<br>                        Icons.qr_code,<br>                        color: controller.flag.value<br>                            ? Colors.black87<br>                            : Colors.white,<br>                      )),<br>                  IconButton(<br>                      onPressed: () &#123;<br>                        Get.toNamed(<span class="hljs-string">&#x27;/cart&#x27;</span>);<br>                      &#125;,<br>                      icon: Icon(<br>                        Icons.message,<br>                        color: controller.flag.value<br>                            ? Colors.black87<br>                            : Colors.white,<br>                      ))<br>                ],<br>              )))<br>    ])));<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// home_controller.dart</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  <span class="hljs-comment">// æ»šåŠ¨æ¡æ§åˆ¶å™¨</span><br>  <span class="hljs-keyword">final</span> ScrollController scrollController = ScrollController();<br><br>  <span class="hljs-comment">// å¼€å…³</span><br>  <span class="hljs-keyword">final</span> RxBool flag = <span class="hljs-keyword">false</span>.obs;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onInit() &#123;<br>    <span class="hljs-keyword">super</span>.onInit();<br>    <span class="hljs-comment">// ç›‘å¬æ»šåŠ¨æ¡æ»šåŠ¨</span><br>    scrollController.addListener(() &#123;<br>      <span class="hljs-comment">// ä¸‹æ‹‰é«˜åº¦å¤§äº10æ—¶ï¼Œæ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®</span><br>      <span class="hljs-keyword">final</span> pixels = scrollController.position.pixels;<br>      <span class="hljs-comment">// æ ¹æ®æ»šåŠ¨ä½ç½®æ›´æ–° flag å€¼</span><br>      <span class="hljs-keyword">if</span> (pixels &gt;= <span class="hljs-number">10</span> &amp;&amp; !flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">true</span>;<br>        update(); <span class="hljs-comment">// æ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pixels &lt; <span class="hljs-number">10</span> &amp;&amp; flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">false</span>;<br>        update(); <span class="hljs-comment">// éšè—è¿”å›é¡¶éƒ¨æŒ‰é’®</span><br>      &#125;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onReady() &#123;<br>    <span class="hljs-keyword">super</span>.onReady();<br>  &#125;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onClose() &#123;<br>    <span class="hljs-keyword">super</span>.onClose();<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è½®æ’­å›¾"><a href="#è½®æ’­å›¾" class="headerlink" title="è½®æ’­å›¾"></a>è½®æ’­å›¾</h2><h3 id="swiper-æ’ä»¶"><a href="#swiper-æ’ä»¶" class="headerlink" title="swiper æ’ä»¶"></a>swiper æ’ä»¶</h3><p><a href="https://pub.dev/packages/flutter_swiper_view">https://pub.dev/packages/flutter_swiper_view</a></p><p><a href="https://github.com/feicien/flutter_swiper_view/blob/master/README-ZH.md">https://github.com/feicien/flutter_swiper_view/blob/master/README-ZH.md</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span> <br>  <span class="hljs-attr">flutter_swiper_view:</span> <span class="hljs-string">^1.1.8</span><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter_swiper_view/flutter_swiper_view.dart&#x27;</span>;<br><br><span class="hljs-keyword">void</span> main() =&gt; runApp(<span class="hljs-keyword">const</span> MyApp());<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> MyApp(&#123;Key? key&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> MaterialApp(<br>      title: <span class="hljs-string">&#x27;Flutter Demo&#x27;</span>,<br>      theme: ThemeData(<br>        primarySwatch: Colors.blue,<br>      ),<br>      home: <span class="hljs-keyword">const</span> MyHomePage(title: <span class="hljs-string">&#x27;Flutter Demo Home Page&#x27;</span>),<br>    );<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>&#123;<br>  <span class="hljs-keyword">const</span> MyHomePage(&#123;Key? key, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.title&#125;) : <span class="hljs-keyword">super</span>(key: key);<br><br>  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> title;<br><br>  <span class="hljs-meta">@override</span><br>  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyHomePage</span>&gt; </span>&#123;<br><br>  <span class="hljs-meta">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class="hljs-keyword">return</span> Scaffold(<br>      appBar: AppBar(<br>        title: Text(widget.title),<br>      ),<br>      body: Swiper(<br>        itemBuilder: (context, index)&#123;<br>          <span class="hljs-keyword">return</span> Image.network(<span class="hljs-string">&quot;https://via.placeholder.com/350x150&quot;</span>,fit: BoxFit.fill,);<br>        &#125;,<br>        itemCount: <span class="hljs-number">3</span>,<br>        pagination: <span class="hljs-keyword">const</span> SwiperPagination(),<br>        control: <span class="hljs-keyword">const</span> SwiperControl(),<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Dio-ç½‘ç»œè¯·æ±‚"><a href="#Dio-ç½‘ç»œè¯·æ±‚" class="headerlink" title="Dio ç½‘ç»œè¯·æ±‚"></a>Dio ç½‘ç»œè¯·æ±‚</h3><p><a href="https://pub.dev/packages/dio">https://pub.dev/packages/dio</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dependencies:</span> <br>  <span class="hljs-attr">dio:</span> <span class="hljs-string">^5.5.0+1</span><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">å†…å®¹åŒºåŸŸ</span></span><br> Widget _homePage() &#123;<br>   <span class="hljs-keyword">return</span> Positioned(<br>       top: -<span class="hljs-number">40</span>,<br>       left: <span class="hljs-number">0</span>,<br>       right: <span class="hljs-number">0</span>,<br>       bottom: <span class="hljs-number">0</span>,<br>       <span class="hljs-comment">// https://www.itying.com/images/focus/focus02.png</span><br>       child: ListView(<br>         controller: controller.scrollController,<br>         children: [<br>           SizedBox(<br>             width: ScreenAdapter.getScreenWidth(),<br>             height: ScreenAdapter.height(<span class="hljs-number">682</span>),<br>             child: Obx(() =&gt; Swiper(<br>                   itemBuilder: (context, index) &#123;<br>                     <span class="hljs-built_in">String</span> picUrl =<br>                         <span class="hljs-string">&quot;https://miapp.itying.com/<span class="hljs-subst">$&#123;controller.swiperList[index][<span class="hljs-string">&#x27;pic&#x27;</span>]&#125;</span>&quot;</span>;<br>                     <span class="hljs-keyword">return</span> Image.network(<br>                       picUrl.replaceAll(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>),<br>                       fit: BoxFit.fill,<br>                     );<br>                   &#125;,<br>                   itemCount: controller.swiperList.length,<br><br>                   pagination:<br>                       <span class="hljs-keyword">const</span> SwiperPagination(builder: SwiperPagination.rect),<br>                   <span class="hljs-comment">// è‡ªåŠ¨è½®æ’­</span><br>                   autoplay: <span class="hljs-keyword">true</span>,<br>                   <span class="hljs-comment">// å¾ªç¯è½®æ’­</span><br>                   loop: <span class="hljs-keyword">true</span>,<br>                   <span class="hljs-comment">// åŠ¨ç”»åˆ‡æ¢æ—¶é—´</span><br>                   duration: <span class="hljs-number">2000</span>,<br>                 )),<br>           )<br>         ],<br>       ));<br> &#125;<br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">// controller</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:get/get.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:dio/dio.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomeController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GetxController</span> </span>&#123;<br>  <span class="hljs-comment">// æ»šåŠ¨æ¡æ§åˆ¶å™¨</span><br>  <span class="hljs-keyword">final</span> ScrollController scrollController = ScrollController();<br><br>  <span class="hljs-comment">// æµ®åŠ¨å¯¼èˆªå¼€å…³</span><br>  <span class="hljs-keyword">final</span> RxBool flag = <span class="hljs-keyword">false</span>.obs;<br><br>  <span class="hljs-comment">// https://miapp.itying.com/api/focus</span><br>  RxList swiperList = [].obs;<br><br>  <span class="hljs-meta">@override</span><br>  <span class="hljs-keyword">void</span> onInit() &#123;<br>    <span class="hljs-keyword">super</span>.onInit();<br>    <span class="hljs-comment">// ç›‘å¬æ»šåŠ¨æ¡æ»šåŠ¨</span><br>    scrollControllerListener();<br>    <span class="hljs-comment">// è·å–ç„¦ç‚¹æ•°æ®</span><br>    getFocusData();<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">ç›‘å¬æ»šåŠ¨æ¡æ»šåŠ¨</span></span><br>  scrollControllerListener() &#123;<br>    scrollController.addListener(() &#123;<br>      <span class="hljs-comment">// ä¸‹æ‹‰é«˜åº¦å¤§äº10æ—¶ï¼Œæ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®</span><br>      <span class="hljs-keyword">final</span> pixels = scrollController.position.pixels;<br>      <span class="hljs-comment">// æ ¹æ®æ»šåŠ¨ä½ç½®æ›´æ–° flag å€¼</span><br>      <span class="hljs-keyword">if</span> (pixels &gt;= <span class="hljs-number">10</span> &amp;&amp; !flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">true</span>;<br>        update(); <span class="hljs-comment">// æ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®</span><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pixels &lt; <span class="hljs-number">10</span> &amp;&amp; flag.value) &#123;<br>        flag.value = <span class="hljs-keyword">false</span>;<br>        update(); <span class="hljs-comment">// éšè—è¿”å›é¡¶éƒ¨æŒ‰é’®</span><br>      &#125;<br>    &#125;);<br>  &#125;<br><br>  <span class="hljs-comment">/// <span class="language-markdown">è·å–ç„¦ç‚¹æ•°æ®</span></span><br>  getFocusData() <span class="hljs-keyword">async</span> &#123;<br>    <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> Dio().<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;https://miapp.itying.com/api/focus&quot;</span>);<br>    swiperList.value = response.data[<span class="hljs-string">&quot;result&quot;</span>];<br>    update();<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="æ¨¡å‹ç±»"><a href="#æ¨¡å‹ç±»" class="headerlink" title="æ¨¡å‹ç±»"></a>æ¨¡å‹ç±»</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">ç„¦ç‚¹æ•°æ®æ¨¡å‹</span></span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FocusModel</span> </span>&#123;<br>  <span class="hljs-built_in">String?</span> sId;<br>  <span class="hljs-built_in">String?</span> title;<br>  <span class="hljs-built_in">String?</span> status;<br>  <span class="hljs-built_in">String?</span> pic;<br>  <span class="hljs-built_in">String?</span> url;<br><br>  FocusModel(&#123;<span class="hljs-keyword">this</span>.sId, <span class="hljs-keyword">this</span>.title, <span class="hljs-keyword">this</span>.status, <span class="hljs-keyword">this</span>.pic, <span class="hljs-keyword">this</span>.url&#125;);<br><br>  FocusModel.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) &#123;<br>    sId = json[<span class="hljs-string">&#x27;_id&#x27;</span>];<br>    title = json[<span class="hljs-string">&#x27;title&#x27;</span>];<br>    status = json[<span class="hljs-string">&#x27;status&#x27;</span>];<br>    pic = json[<span class="hljs-string">&#x27;pic&#x27;</span>];<br>    url = json[<span class="hljs-string">&#x27;url&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; toJson() &#123;<br>    <span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; data = &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&#123;&#125;;<br>    data[<span class="hljs-string">&#x27;_id&#x27;</span>] = sId;<br>    data[<span class="hljs-string">&#x27;title&#x27;</span>] = title;<br>    data[<span class="hljs-string">&#x27;status&#x27;</span>] = status;<br>    data[<span class="hljs-string">&#x27;pic&#x27;</span>] = pic;<br>    data[<span class="hljs-string">&#x27;url&#x27;</span>] = url;<br>    <span class="hljs-keyword">return</span> data;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åœ¨çº¿ç½‘ç«™ç”Ÿæˆ"><a href="#åœ¨çº¿ç½‘ç«™ç”Ÿæˆ" class="headerlink" title="åœ¨çº¿ç½‘ç«™ç”Ÿæˆ"></a>åœ¨çº¿ç½‘ç«™ç”Ÿæˆ</h3><p><a href="https://autocode.icu/jsontodart">https://autocode.icu/jsontodart</a></p><h3 id="get-cli-ç”Ÿæˆ"><a href="#get-cli-ç”Ÿæˆ" class="headerlink" title="get_cli ç”Ÿæˆ"></a>get_cli ç”Ÿæˆ</h3><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog">get <span class="hljs-keyword">generate</span> model on models from <span class="hljs-string">&quot;https://miapp.itying.com/api/focus&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Focus</span> </span>&#123;<br>  <span class="hljs-built_in">List</span>&lt;Result&gt;? result;<br><br>  Focus(&#123;<span class="hljs-keyword">this</span>.result&#125;);<br><br>  Focus.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) &#123;<br>    <span class="hljs-keyword">if</span> (json[<span class="hljs-string">&#x27;result&#x27;</span>] != <span class="hljs-keyword">null</span>) &#123;<br>      result = &lt;Result&gt;[];<br>      json[<span class="hljs-string">&#x27;result&#x27;</span>].forEach((v) &#123;<br>        result?.add(Result.fromJson(v));<br>      &#125;);<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; toJson() &#123;<br>    <span class="hljs-keyword">final</span> data = &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&#123;&#125;;<br>    <span class="hljs-keyword">if</span> (result != <span class="hljs-keyword">null</span>) &#123;<br>      data[<span class="hljs-string">&#x27;result&#x27;</span>] = result?.map((v) =&gt; v.toJson()).toList();<br>    &#125;<br>    <span class="hljs-keyword">return</span> data;<br>  &#125;<br>&#125;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Result</span> </span>&#123;<br>  <span class="hljs-built_in">String?</span> sId;<br>  <span class="hljs-built_in">String?</span> title;<br>  <span class="hljs-built_in">String?</span> status;<br>  <span class="hljs-built_in">String?</span> pic;<br>  <span class="hljs-built_in">String?</span> url;<br>  <span class="hljs-built_in">int?</span> position;<br><br>  Result(<br>      &#123;<span class="hljs-keyword">this</span>.sId, <span class="hljs-keyword">this</span>.title, <span class="hljs-keyword">this</span>.status, <span class="hljs-keyword">this</span>.pic, <span class="hljs-keyword">this</span>.url, <span class="hljs-keyword">this</span>.position&#125;);<br><br>  Result.fromJson(<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; json) &#123;<br>    sId = json[<span class="hljs-string">&#x27;_id&#x27;</span>];<br>    title = json[<span class="hljs-string">&#x27;title&#x27;</span>];<br>    status = json[<span class="hljs-string">&#x27;status&#x27;</span>];<br>    pic = json[<span class="hljs-string">&#x27;pic&#x27;</span>];<br>    url = json[<span class="hljs-string">&#x27;url&#x27;</span>];<br>    position = json[<span class="hljs-string">&#x27;position&#x27;</span>];<br>  &#125;<br><br>  <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt; toJson() &#123;<br>    <span class="hljs-keyword">final</span> data = &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;&#123;&#125;;<br>    data[<span class="hljs-string">&#x27;_id&#x27;</span>] = sId;<br>    data[<span class="hljs-string">&#x27;title&#x27;</span>] = title;<br>    data[<span class="hljs-string">&#x27;status&#x27;</span>] = status;<br>    data[<span class="hljs-string">&#x27;pic&#x27;</span>] = pic;<br>    data[<span class="hljs-string">&#x27;url&#x27;</span>] = url;<br>    data[<span class="hljs-string">&#x27;position&#x27;</span>] = position;<br>    <span class="hljs-keyword">return</span> data;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç”Ÿæˆ"><a href="#ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç”Ÿæˆ" class="headerlink" title="ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç”Ÿæˆ"></a>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ç”Ÿæˆ</h3><p><a href="https://doc.flutterchina.club/json/">https://doc.flutterchina.club/json/</a></p><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">è·å–ç„¦ç‚¹æ•°æ®</span></span><br>  getFocusData() <span class="hljs-keyword">async</span> &#123;<br>    <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> Dio().<span class="hljs-keyword">get</span>(<span class="hljs-string">&quot;https://miapp.itying.com/api/focus&quot;</span>);<br>    <span class="hljs-built_in">print</span>(response.data[<span class="hljs-string">&quot;result&quot;</span>]);<br>    FocusModel focusModel = FocusModel.fromJson(response.data);<br>    swiperList.value = focusModel.result!;<br>    update();<br>  &#125;<br><br><span class="hljs-built_in">String</span> picUrl = <span class="hljs-string">&quot;https://miapp.itying.com/<span class="hljs-subst">$&#123;controller.swiperList[index].pic&#125;</span>&quot;</span>;<br></code></pre></td></tr></table></figure><h2 id="è½®æ’­åˆ†ç±»æ•°æ®æ¸²æŸ“"><a href="#è½®æ’­åˆ†ç±»æ•°æ®æ¸²æŸ“" class="headerlink" title="è½®æ’­åˆ†ç±»æ•°æ®æ¸²æŸ“"></a>è½®æ’­åˆ†ç±»æ•°æ®æ¸²æŸ“</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># é…ç½®æœ¬åœ°èµ„æºå›¾ç‰‡</span><br><span class="hljs-attr">flutter:</span><br>  <span class="hljs-attr">assets:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/xiaomiBanner.png</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/2.0x/xiaomiBanner.png</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/3.0x/xiaomiBanner.png</span><br></code></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-comment">/// <span class="language-markdown">åˆ†ç±»</span></span><br>  Widget _category() &#123;<br>    <span class="hljs-keyword">return</span> SizedBox(<br>      width: ScreenAdapter.getScreenWidth(),<br>      height: ScreenAdapter.height(<span class="hljs-number">470</span>),<br>      child: Obx(() =&gt; Swiper(<br>            itemBuilder: (context, index) &#123;<br>              <span class="hljs-keyword">return</span> GridView.builder(<br>                  itemCount: <span class="hljs-number">10</span>,<br>                  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(<br>                    crossAxisCount: <span class="hljs-number">5</span>,<br>                    crossAxisSpacing: ScreenAdapter.width(<span class="hljs-number">20</span>),<br>                    mainAxisSpacing: ScreenAdapter.height(<span class="hljs-number">20</span>),<br>                  ),<br>                  itemBuilder: (context, i) &#123;<br>                    <span class="hljs-keyword">return</span> Column(<br>                      children: [<br>                        Container(<br>                          alignment: Alignment.center,<br>                          width: ScreenAdapter.height(<span class="hljs-number">140</span>),<br>                          height: ScreenAdapter.height(<span class="hljs-number">140</span>),<br>                          child: Image.network(<br>                            <span class="hljs-string">&quot;https://miapp.itying.com/<span class="hljs-subst">$&#123;controller.categoryList[index * <span class="hljs-number">10</span> + i].pic&#125;</span>&quot;</span>,<br>                            fit: BoxFit.fitHeight,<br>                          ),<br>                        ),<br>                        Padding(<br>                          padding: EdgeInsets.fromLTRB(<br>                              <span class="hljs-number">0</span>, ScreenAdapter.height(<span class="hljs-number">4</span>), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),<br>                          child: Text(<br>                            <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;controller.categoryList[index * <span class="hljs-number">10</span> + i].title&#125;</span>&quot;</span>,<br>                            style:<br>                                TextStyle(fontSize: ScreenAdapter.fontSize(<span class="hljs-number">34</span>)),<br>                          ),<br>                        )<br>                      ],<br>                    );<br>                  &#125;);<br>            &#125;,<br>            itemCount: controller.categoryList.length ~/ <span class="hljs-number">10</span>, <span class="hljs-comment">// å–æ•´</span><br>            <span class="hljs-comment">// è‡ªå®šä¹‰æŒ‡ç¤ºå™¨</span><br>            pagination: SwiperPagination(<br>              margin: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">0.0</span>),<br>              builder: SwiperCustomPagination(<br>                  builder: (BuildContext context, SwiperPluginConfig config) &#123;<br>                <span class="hljs-keyword">return</span> ConstrainedBox(<br>                    constraints:<br>                        BoxConstraints.expand(height: ScreenAdapter.height(<span class="hljs-number">20</span>)),<br>                    child: Row(<br>                      children: &lt;Widget&gt;[<br>                        Expanded(<br>                          child: Align(<br>                            alignment: Alignment.center,<br>                            child: <span class="hljs-keyword">const</span> RectSwiperPaginationBuilder(<br>                                    color: Colors.black12,<br>                                    activeColor: Colors.black54)<br>                                .build(context, config),<br>                          ),<br>                        )<br>                      ],<br>                    ));<br>              &#125;),<br>            ),<br>          )),<br>    );<br>  &#125;<br></code></pre></td></tr></table></figure><h2 id="å°è£…Dio"><a href="#å°è£…Dio" class="headerlink" title="å°è£…Dio"></a>å°è£…Dio</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs dart"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:dio/dio.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:flutter/material.dart&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;package:fluttertoast/fluttertoast.dart&#x27;</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpsClient</span> </span>&#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-built_in">String</span> domain = <span class="hljs-string">&quot;https://miapp.itying.com/&quot;</span>;<br>  <span class="hljs-keyword">static</span> Dio dio = Dio();<br><br>  HttpsClient() &#123;<br>    BaseOptions options = BaseOptions();<br>    options.baseUrl = domain;<br>    <span class="hljs-comment">// è¶…æ—¶æ—¶é—´</span><br>    options.connectTimeout = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">5</span>);<br>    <span class="hljs-comment">// æ¥æ”¶æ•°æ®è¶…æ—¶æ—¶é—´</span><br>    options.receiveTimeout = <span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">5</span>);<br>    <span class="hljs-comment">// å“åº”æ•°æ®æ ¼å¼</span><br>    options.responseType = ResponseType.json;<br>    dio.options = options;<br>  &#125;<br><br>  Future&lt;<span class="hljs-built_in">dynamic</span>&gt; <span class="hljs-keyword">get</span>(<span class="hljs-built_in">String</span> url) <span class="hljs-keyword">async</span> &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">var</span> response = dio.<span class="hljs-keyword">get</span>(url);<br>      <span class="hljs-keyword">return</span> response;<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>      Fluttertoast.showToast(<br>          msg: <span class="hljs-string">&quot;è¯·æ±‚æ•°æ®å¼‚å¸¸&quot;</span>,<br>          toastLength: Toast.LENGTH_SHORT,<br>          gravity: ToastGravity.CENTER,<br>          timeInSecForIosWeb: <span class="hljs-number">1</span>,<br>          backgroundColor: Colors.red,<br>          textColor: Colors.white,<br>          fontSize: <span class="hljs-number">16.0</span>);<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">static</span> replaceUri(pic) &#123;<br>    <span class="hljs-built_in">String</span> picUrl = domain + pic;<br>    <span class="hljs-keyword">return</span> picUrl.replaceAll(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>);<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="å°è£…GetX"><a href="#å°è£…GetX" class="headerlink" title="å°è£…GetX"></a>å°è£…GetX</h2>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>Flutter</category>
      
      <category>Dart</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Flutter</tag>
      
      <tag>Getx</tag>
      
      <tag>Dio</tag>
      
      <tag>flutter_screenutil</tag>
      
      <tag>flutter_swiper_view</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo Fluid æ–‡ç« </title>
    <link href="/posts/%E5%89%8D%E7%AB%AF/Hexo&amp;Fluid/34482/"/>
    <url>/posts/%E5%89%8D%E7%AB%AF/Hexo&amp;Fluid/34482/</url>
    
    <content type="html"><![CDATA[<h2 id="æµ‹è¯•å‘å¸ƒæ–‡ç« "><a href="#æµ‹è¯•å‘å¸ƒæ–‡ç« " class="headerlink" title="æµ‹è¯•å‘å¸ƒæ–‡ç« "></a>æµ‹è¯•å‘å¸ƒæ–‡ç« </h2><p><code>è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•å‘å¸ƒæ–‡ç« ã€‚</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">quick_sort</span>(<span class="hljs-params">arr</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(arr) &lt;= <span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">return</span> arr<br>    pivot = arr[<span class="hljs-number">0</span>]<br>    left = []<br>    right = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(arr)):<br>        <span class="hljs-keyword">if</span> arr[i] &lt; pivot:<br>            left.append(arr[i])<br>        <span class="hljs-keyword">else</span>:<br>            right.append(arr[i])<br>    <span class="hljs-keyword">return</span> quick_sort(left) + [pivot] + quick_sort(right)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>Fluid</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
